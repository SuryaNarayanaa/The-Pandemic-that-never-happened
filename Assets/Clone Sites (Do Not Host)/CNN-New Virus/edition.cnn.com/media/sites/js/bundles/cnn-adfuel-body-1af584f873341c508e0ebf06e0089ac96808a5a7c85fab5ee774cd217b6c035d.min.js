(()=>{var I=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(h,e)=>(typeof require<"u"?require:h)[e]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var O=(r,h)=>()=>(h||r((h={exports:{}}).exports,h),h.exports);var q=O((df,At)=>{var Ss=Array.isArray;At.exports=Ss});var ke=O((cf,Mt)=>{var Os=typeof window=="object"&&window&&window.Object===Object&&window;Mt.exports=Os});var $=O((gf,Ft)=>{var As=ke(),Ms=typeof self=="object"&&self&&self.Object===Object&&self,Fs=As||Ms||Function("return this")();Ft.exports=Fs});var ce=O((pf,Lt)=>{var Ls=$(),Cs=Ls.Symbol;Lt.exports=Cs});var Pt=O((ff,It)=>{var Ct=ce(),Tt=Object.prototype,Ts=Tt.hasOwnProperty,Is=Tt.toString,ge=Ct?Ct.toStringTag:void 0;function Ps(r){var h=Ts.call(r,ge),e=r[ge];try{r[ge]=void 0;var l=!0}catch{}var c=Is.call(r);return l&&(h?r[ge]=e:delete r[ge]),c}It.exports=Ps});var Rt=O((hf,Dt)=>{var Ds=Object.prototype,Rs=Ds.toString;function Us(r){return Rs.call(r)}Dt.exports=Us});var K=O((yf,Nt)=>{var Ut=ce(),xs=Pt(),Ns=Rt(),js="[object Null]",ks="[object Undefined]",xt=Ut?Ut.toStringTag:void 0;function Ws(r){return r==null?r===void 0?ks:js:xt&&xt in Object(r)?xs(r):Ns(r)}Nt.exports=Ws});var Y=O((mf,jt)=>{function Gs(r){return r!=null&&typeof r=="object"}jt.exports=Gs});var Oe=O((vf,kt)=>{var Vs=K(),qs=Y(),Hs="[object Symbol]";function $s(r){return typeof r=="symbol"||qs(r)&&Vs(r)==Hs}kt.exports=$s});var Ae=O((wf,Wt)=>{var Bs=q(),zs=Oe(),Js=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ks=/^\w*$/;function Ys(r,h){if(Bs(r))return!1;var e=typeof r;return e=="number"||e=="symbol"||e=="boolean"||r==null||zs(r)?!0:Ks.test(r)||!Js.test(r)||h!=null&&r in Object(h)}Wt.exports=Ys});var Me=O((_f,Gt)=>{function Qs(r){var h=typeof r;return r!=null&&(h=="object"||h=="function")}Gt.exports=Qs});var We=O((bf,Vt)=>{var Zs=K(),Xs=Me(),el="[object AsyncFunction]",tl="[object Function]",ol="[object GeneratorFunction]",nl="[object Proxy]";function rl(r){if(!Xs(r))return!1;var h=Zs(r);return h==tl||h==ol||h==el||h==nl}Vt.exports=rl});var Ht=O((Ef,qt)=>{var il=$(),sl=il["__core-js_shared__"];qt.exports=sl});var zt=O((Sf,Bt)=>{var Ge=Ht(),$t=function(){var r=/[^.]+$/.exec(Ge&&Ge.keys&&Ge.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function ll(r){return!!$t&&$t in r}Bt.exports=ll});var Ve=O((Of,Jt)=>{var al=Function.prototype,ul=al.toString;function dl(r){if(r!=null){try{return ul.call(r)}catch{}try{return r+""}catch{}}return""}Jt.exports=dl});var Yt=O((Af,Kt)=>{var cl=We(),gl=zt(),pl=Me(),fl=Ve(),hl=/[\\^$.*+?()[\]{}|]/g,yl=/^\[object .+?Constructor\]$/,ml=Function.prototype,vl=Object.prototype,wl=ml.toString,_l=vl.hasOwnProperty,bl=RegExp("^"+wl.call(_l).replace(hl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function El(r){if(!pl(r)||gl(r))return!1;var h=cl(r)?bl:yl;return h.test(fl(r))}Kt.exports=El});var Zt=O((Mf,Qt)=>{function Sl(r,h){return r==null?void 0:r[h]}Qt.exports=Sl});var te=O((Ff,Xt)=>{var Ol=Yt(),Al=Zt();function Ml(r,h){var e=Al(r,h);return Ol(e)?e:void 0}Xt.exports=Ml});var pe=O((Lf,eo)=>{var Fl=te(),Ll=Fl(Object,"create");eo.exports=Ll});var no=O((Cf,oo)=>{var to=pe();function Cl(){this.__data__=to?to(null):{},this.size=0}oo.exports=Cl});var io=O((Tf,ro)=>{function Tl(r){var h=this.has(r)&&delete this.__data__[r];return this.size-=h?1:0,h}ro.exports=Tl});var lo=O((If,so)=>{var Il=pe(),Pl="__lodash_hash_undefined__",Dl=Object.prototype,Rl=Dl.hasOwnProperty;function Ul(r){var h=this.__data__;if(Il){var e=h[r];return e===Pl?void 0:e}return Rl.call(h,r)?h[r]:void 0}so.exports=Ul});var uo=O((Pf,ao)=>{var xl=pe(),Nl=Object.prototype,jl=Nl.hasOwnProperty;function kl(r){var h=this.__data__;return xl?h[r]!==void 0:jl.call(h,r)}ao.exports=kl});var go=O((Df,co)=>{var Wl=pe(),Gl="__lodash_hash_undefined__";function Vl(r,h){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=Wl&&h===void 0?Gl:h,this}co.exports=Vl});var fo=O((Rf,po)=>{var ql=no(),Hl=io(),$l=lo(),Bl=uo(),zl=go();function re(r){var h=-1,e=r==null?0:r.length;for(this.clear();++h<e;){var l=r[h];this.set(l[0],l[1])}}re.prototype.clear=ql;re.prototype.delete=Hl;re.prototype.get=$l;re.prototype.has=Bl;re.prototype.set=zl;po.exports=re});var yo=O((Uf,ho)=>{function Jl(){this.__data__=[],this.size=0}ho.exports=Jl});var qe=O((xf,mo)=>{function Kl(r,h){return r===h||r!==r&&h!==h}mo.exports=Kl});var fe=O((Nf,vo)=>{var Yl=qe();function Ql(r,h){for(var e=r.length;e--;)if(Yl(r[e][0],h))return e;return-1}vo.exports=Ql});var _o=O((jf,wo)=>{var Zl=fe(),Xl=Array.prototype,ea=Xl.splice;function ta(r){var h=this.__data__,e=Zl(h,r);if(e<0)return!1;var l=h.length-1;return e==l?h.pop():ea.call(h,e,1),--this.size,!0}wo.exports=ta});var Eo=O((kf,bo)=>{var oa=fe();function na(r){var h=this.__data__,e=oa(h,r);return e<0?void 0:h[e][1]}bo.exports=na});var Oo=O((Wf,So)=>{var ra=fe();function ia(r){return ra(this.__data__,r)>-1}So.exports=ia});var Mo=O((Gf,Ao)=>{var sa=fe();function la(r,h){var e=this.__data__,l=sa(e,r);return l<0?(++this.size,e.push([r,h])):e[l][1]=h,this}Ao.exports=la});var he=O((Vf,Fo)=>{var aa=yo(),ua=_o(),da=Eo(),ca=Oo(),ga=Mo();function ie(r){var h=-1,e=r==null?0:r.length;for(this.clear();++h<e;){var l=r[h];this.set(l[0],l[1])}}ie.prototype.clear=aa;ie.prototype.delete=ua;ie.prototype.get=da;ie.prototype.has=ca;ie.prototype.set=ga;Fo.exports=ie});var Fe=O((qf,Lo)=>{var pa=te(),fa=$(),ha=pa(fa,"Map");Lo.exports=ha});var Io=O((Hf,To)=>{var Co=fo(),ya=he(),ma=Fe();function va(){this.size=0,this.__data__={hash:new Co,map:new(ma||ya),string:new Co}}To.exports=va});var Do=O(($f,Po)=>{function wa(r){var h=typeof r;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?r!=="__proto__":r===null}Po.exports=wa});var ye=O((Bf,Ro)=>{var _a=Do();function ba(r,h){var e=r.__data__;return _a(h)?e[typeof h=="string"?"string":"hash"]:e.map}Ro.exports=ba});var xo=O((zf,Uo)=>{var Ea=ye();function Sa(r){var h=Ea(this,r).delete(r);return this.size-=h?1:0,h}Uo.exports=Sa});var jo=O((Jf,No)=>{var Oa=ye();function Aa(r){return Oa(this,r).get(r)}No.exports=Aa});var Wo=O((Kf,ko)=>{var Ma=ye();function Fa(r){return Ma(this,r).has(r)}ko.exports=Fa});var Vo=O((Yf,Go)=>{var La=ye();function Ca(r,h){var e=La(this,r),l=e.size;return e.set(r,h),this.size+=e.size==l?0:1,this}Go.exports=Ca});var Le=O((Qf,qo)=>{var Ta=Io(),Ia=xo(),Pa=jo(),Da=Wo(),Ra=Vo();function se(r){var h=-1,e=r==null?0:r.length;for(this.clear();++h<e;){var l=r[h];this.set(l[0],l[1])}}se.prototype.clear=Ta;se.prototype.delete=Ia;se.prototype.get=Pa;se.prototype.has=Da;se.prototype.set=Ra;qo.exports=se});var Bo=O((Zf,$o)=>{var Ho=Le(),Ua="Expected a function";function He(r,h){if(typeof r!="function"||h!=null&&typeof h!="function")throw new TypeError(Ua);var e=function(){var l=arguments,c=h?h.apply(this,l):l[0],d=e.cache;if(d.has(c))return d.get(c);var i=r.apply(this,l);return e.cache=d.set(c,i)||d,i};return e.cache=new(He.Cache||Ho),e}He.Cache=Ho;$o.exports=He});var Jo=O((Xf,zo)=>{var xa=Bo(),Na=500;function ja(r){var h=xa(r,function(l){return e.size===Na&&e.clear(),l}),e=h.cache;return h}zo.exports=ja});var Yo=O((eh,Ko)=>{var ka=Jo(),Wa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ga=/\\(\\)?/g,Va=ka(function(r){var h=[];return r.charCodeAt(0)===46&&h.push(""),r.replace(Wa,function(e,l,c,d){h.push(c?d.replace(Ga,"$1"):l||e)}),h});Ko.exports=Va});var Zo=O((th,Qo)=>{function qa(r,h){for(var e=-1,l=r==null?0:r.length,c=Array(l);++e<l;)c[e]=h(r[e],e,r);return c}Qo.exports=qa});var rn=O((oh,nn)=>{var Xo=ce(),Ha=Zo(),$a=q(),Ba=Oe(),za=1/0,en=Xo?Xo.prototype:void 0,tn=en?en.toString:void 0;function on(r){if(typeof r=="string")return r;if($a(r))return Ha(r,on)+"";if(Ba(r))return tn?tn.call(r):"";var h=r+"";return h=="0"&&1/r==-za?"-0":h}nn.exports=on});var ln=O((nh,sn)=>{var Ja=rn();function Ka(r){return r==null?"":Ja(r)}sn.exports=Ka});var $e=O((rh,an)=>{var Ya=q(),Qa=Ae(),Za=Yo(),Xa=ln();function eu(r,h){return Ya(r)?r:Qa(r,h)?[r]:Za(Xa(r))}an.exports=eu});var me=O((ih,un)=>{var tu=Oe(),ou=1/0;function nu(r){if(typeof r=="string"||tu(r))return r;var h=r+"";return h=="0"&&1/r==-ou?"-0":h}un.exports=nu});var Be=O((sh,dn)=>{var ru=$e(),iu=me();function su(r,h){h=ru(h,r);for(var e=0,l=h.length;r!=null&&e<l;)r=r[iu(h[e++])];return e&&e==l?r:void 0}dn.exports=su});var ze=O((lh,cn)=>{var lu=Be();function au(r,h,e){var l=r==null?void 0:lu(r,h);return l===void 0?e:l}cn.exports=au});var Je=O((ah,gn)=>{function uu(r,h){return function(e){return r(h(e))}}gn.exports=uu});var fn=O((uh,pn)=>{var du=Je(),cu=du(Object.getPrototypeOf,Object);pn.exports=cu});var mn=O((dh,yn)=>{var gu=K(),pu=fn(),fu=Y(),hu="[object Object]",yu=Function.prototype,mu=Object.prototype,hn=yu.toString,vu=mu.hasOwnProperty,wu=hn.call(Object);function _u(r){if(!fu(r)||gu(r)!=hu)return!1;var h=pu(r);if(h===null)return!0;var e=vu.call(h,"constructor")&&h.constructor;return typeof e=="function"&&e instanceof e&&hn.call(e)==wu}yn.exports=_u});var wn=O((ch,vn)=>{var bu=K(),Eu=q(),Su=Y(),Ou="[object String]";function Au(r){return typeof r=="string"||!Eu(r)&&Su(r)&&bu(r)==Ou}vn.exports=Au});var bn=O((gh,_n)=>{function Mu(r,h,e,l){var c=-1,d=r==null?0:r.length;for(l&&d&&(e=r[++c]);++c<d;)e=h(e,r[c],c,r);return e}_n.exports=Mu});var Sn=O((ph,En)=>{function Fu(r){return function(h,e,l){for(var c=-1,d=Object(h),i=l(h),o=i.length;o--;){var n=i[r?o:++c];if(e(d[n],n,d)===!1)break}return h}}En.exports=Fu});var An=O((fh,On)=>{var Lu=Sn(),Cu=Lu();On.exports=Cu});var Fn=O((hh,Mn)=>{function Tu(r,h){for(var e=-1,l=Array(r);++e<r;)l[e]=h(e);return l}Mn.exports=Tu});var Cn=O((yh,Ln)=>{var Iu=K(),Pu=Y(),Du="[object Arguments]";function Ru(r){return Pu(r)&&Iu(r)==Du}Ln.exports=Ru});var Ke=O((mh,Pn)=>{var Tn=Cn(),Uu=Y(),In=Object.prototype,xu=In.hasOwnProperty,Nu=In.propertyIsEnumerable,ju=Tn(function(){return arguments}())?Tn:function(r){return Uu(r)&&xu.call(r,"callee")&&!Nu.call(r,"callee")};Pn.exports=ju});var Rn=O((vh,Dn)=>{function ku(){return!1}Dn.exports=ku});var Ye=O((ve,le)=>{var Wu=$(),Gu=Rn(),Nn=typeof ve=="object"&&ve&&!ve.nodeType&&ve,Un=Nn&&typeof le=="object"&&le&&!le.nodeType&&le,Vu=Un&&Un.exports===Nn,xn=Vu?Wu.Buffer:void 0,qu=xn?xn.isBuffer:void 0,Hu=qu||Gu;le.exports=Hu});var Qe=O((wh,jn)=>{var $u=9007199254740991,Bu=/^(?:0|[1-9]\d*)$/;function zu(r,h){var e=typeof r;return h=h==null?$u:h,!!h&&(e=="number"||e!="symbol"&&Bu.test(r))&&r>-1&&r%1==0&&r<h}jn.exports=zu});var Ce=O((_h,kn)=>{var Ju=9007199254740991;function Ku(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Ju}kn.exports=Ku});var Gn=O((bh,Wn)=>{var Yu=K(),Qu=Ce(),Zu=Y(),Xu="[object Arguments]",ed="[object Array]",td="[object Boolean]",od="[object Date]",nd="[object Error]",rd="[object Function]",id="[object Map]",sd="[object Number]",ld="[object Object]",ad="[object RegExp]",ud="[object Set]",dd="[object String]",cd="[object WeakMap]",gd="[object ArrayBuffer]",pd="[object DataView]",fd="[object Float32Array]",hd="[object Float64Array]",yd="[object Int8Array]",md="[object Int16Array]",vd="[object Int32Array]",wd="[object Uint8Array]",_d="[object Uint8ClampedArray]",bd="[object Uint16Array]",Ed="[object Uint32Array]",P={};P[fd]=P[hd]=P[yd]=P[md]=P[vd]=P[wd]=P[_d]=P[bd]=P[Ed]=!0;P[Xu]=P[ed]=P[gd]=P[td]=P[pd]=P[od]=P[nd]=P[rd]=P[id]=P[sd]=P[ld]=P[ad]=P[ud]=P[dd]=P[cd]=!1;function Sd(r){return Zu(r)&&Qu(r.length)&&!!P[Yu(r)]}Wn.exports=Sd});var qn=O((Eh,Vn)=>{function Od(r){return function(h){return r(h)}}Vn.exports=Od});var $n=O((we,ae)=>{var Ad=ke(),Hn=typeof we=="object"&&we&&!we.nodeType&&we,_e=Hn&&typeof ae=="object"&&ae&&!ae.nodeType&&ae,Md=_e&&_e.exports===Hn,Ze=Md&&Ad.process,Fd=function(){try{var r=_e&&_e.require&&_e.require("util").types;return r||Ze&&Ze.binding&&Ze.binding("util")}catch{}}();ae.exports=Fd});var Xe=O((Sh,Jn)=>{var Ld=Gn(),Cd=qn(),Bn=$n(),zn=Bn&&Bn.isTypedArray,Td=zn?Cd(zn):Ld;Jn.exports=Td});var Yn=O((Oh,Kn)=>{var Id=Fn(),Pd=Ke(),Dd=q(),Rd=Ye(),Ud=Qe(),xd=Xe(),Nd=Object.prototype,jd=Nd.hasOwnProperty;function kd(r,h){var e=Dd(r),l=!e&&Pd(r),c=!e&&!l&&Rd(r),d=!e&&!l&&!c&&xd(r),i=e||l||c||d,o=i?Id(r.length,String):[],n=o.length;for(var a in r)(h||jd.call(r,a))&&!(i&&(a=="length"||c&&(a=="offset"||a=="parent")||d&&(a=="buffer"||a=="byteLength"||a=="byteOffset")||Ud(a,n)))&&o.push(a);return o}Kn.exports=kd});var Zn=O((Ah,Qn)=>{var Wd=Object.prototype;function Gd(r){var h=r&&r.constructor,e=typeof h=="function"&&h.prototype||Wd;return r===e}Qn.exports=Gd});var er=O((Mh,Xn)=>{var Vd=Je(),qd=Vd(Object.keys,Object);Xn.exports=qd});var or=O((Fh,tr)=>{var Hd=Zn(),$d=er(),Bd=Object.prototype,zd=Bd.hasOwnProperty;function Jd(r){if(!Hd(r))return $d(r);var h=[];for(var e in Object(r))zd.call(r,e)&&e!="constructor"&&h.push(e);return h}tr.exports=Jd});var et=O((Lh,nr)=>{var Kd=We(),Yd=Ce();function Qd(r){return r!=null&&Yd(r.length)&&!Kd(r)}nr.exports=Qd});var Te=O((Ch,rr)=>{var Zd=Yn(),Xd=or(),ec=et();function tc(r){return ec(r)?Zd(r):Xd(r)}rr.exports=tc});var sr=O((Th,ir)=>{var oc=An(),nc=Te();function rc(r,h){return r&&oc(r,h,nc)}ir.exports=rc});var ar=O((Ih,lr)=>{var ic=et();function sc(r,h){return function(e,l){if(e==null)return e;if(!ic(e))return r(e,l);for(var c=e.length,d=h?c:-1,i=Object(e);(h?d--:++d<c)&&l(i[d],d,i)!==!1;);return e}}lr.exports=sc});var dr=O((Ph,ur)=>{var lc=sr(),ac=ar(),uc=ac(lc);ur.exports=uc});var gr=O((Dh,cr)=>{var dc=he();function cc(){this.__data__=new dc,this.size=0}cr.exports=cc});var fr=O((Rh,pr)=>{function gc(r){var h=this.__data__,e=h.delete(r);return this.size=h.size,e}pr.exports=gc});var yr=O((Uh,hr)=>{function pc(r){return this.__data__.get(r)}hr.exports=pc});var vr=O((xh,mr)=>{function fc(r){return this.__data__.has(r)}mr.exports=fc});var _r=O((Nh,wr)=>{var hc=he(),yc=Fe(),mc=Le(),vc=200;function wc(r,h){var e=this.__data__;if(e instanceof hc){var l=e.__data__;if(!yc||l.length<vc-1)return l.push([r,h]),this.size=++e.size,this;e=this.__data__=new mc(l)}return e.set(r,h),this.size=e.size,this}wr.exports=wc});var tt=O((jh,br)=>{var _c=he(),bc=gr(),Ec=fr(),Sc=yr(),Oc=vr(),Ac=_r();function ue(r){var h=this.__data__=new _c(r);this.size=h.size}ue.prototype.clear=bc;ue.prototype.delete=Ec;ue.prototype.get=Sc;ue.prototype.has=Oc;ue.prototype.set=Ac;br.exports=ue});var Sr=O((kh,Er)=>{var Mc="__lodash_hash_undefined__";function Fc(r){return this.__data__.set(r,Mc),this}Er.exports=Fc});var Ar=O((Wh,Or)=>{function Lc(r){return this.__data__.has(r)}Or.exports=Lc});var Fr=O((Gh,Mr)=>{var Cc=Le(),Tc=Sr(),Ic=Ar();function Ie(r){var h=-1,e=r==null?0:r.length;for(this.__data__=new Cc;++h<e;)this.add(r[h])}Ie.prototype.add=Ie.prototype.push=Tc;Ie.prototype.has=Ic;Mr.exports=Ie});var Cr=O((Vh,Lr)=>{function Pc(r,h){for(var e=-1,l=r==null?0:r.length;++e<l;)if(h(r[e],e,r))return!0;return!1}Lr.exports=Pc});var Ir=O((qh,Tr)=>{function Dc(r,h){return r.has(h)}Tr.exports=Dc});var ot=O((Hh,Pr)=>{var Rc=Fr(),Uc=Cr(),xc=Ir(),Nc=1,jc=2;function kc(r,h,e,l,c,d){var i=e&Nc,o=r.length,n=h.length;if(o!=n&&!(i&&n>o))return!1;var a=d.get(r),u=d.get(h);if(a&&u)return a==h&&u==r;var g=-1,t=!0,f=e&jc?new Rc:void 0;for(d.set(r,h),d.set(h,r);++g<o;){var p=r[g],y=h[g];if(l)var w=i?l(y,p,g,h,r,d):l(p,y,g,r,h,d);if(w!==void 0){if(w)continue;t=!1;break}if(f){if(!Uc(h,function(s,_){if(!xc(f,_)&&(p===s||c(p,s,e,l,d)))return f.push(_)})){t=!1;break}}else if(!(p===y||c(p,y,e,l,d))){t=!1;break}}return d.delete(r),d.delete(h),t}Pr.exports=kc});var Rr=O(($h,Dr)=>{var Wc=$(),Gc=Wc.Uint8Array;Dr.exports=Gc});var xr=O((Bh,Ur)=>{function Vc(r){var h=-1,e=Array(r.size);return r.forEach(function(l,c){e[++h]=[c,l]}),e}Ur.exports=Vc});var jr=O((zh,Nr)=>{function qc(r){var h=-1,e=Array(r.size);return r.forEach(function(l){e[++h]=l}),e}Nr.exports=qc});var qr=O((Jh,Vr)=>{var kr=ce(),Wr=Rr(),Hc=qe(),$c=ot(),Bc=xr(),zc=jr(),Jc=1,Kc=2,Yc="[object Boolean]",Qc="[object Date]",Zc="[object Error]",Xc="[object Map]",eg="[object Number]",tg="[object RegExp]",og="[object Set]",ng="[object String]",rg="[object Symbol]",ig="[object ArrayBuffer]",sg="[object DataView]",Gr=kr?kr.prototype:void 0,nt=Gr?Gr.valueOf:void 0;function lg(r,h,e,l,c,d,i){switch(e){case sg:if(r.byteLength!=h.byteLength||r.byteOffset!=h.byteOffset)return!1;r=r.buffer,h=h.buffer;case ig:return!(r.byteLength!=h.byteLength||!d(new Wr(r),new Wr(h)));case Yc:case Qc:case eg:return Hc(+r,+h);case Zc:return r.name==h.name&&r.message==h.message;case tg:case ng:return r==h+"";case Xc:var o=Bc;case og:var n=l&Jc;if(o||(o=zc),r.size!=h.size&&!n)return!1;var a=i.get(r);if(a)return a==h;l|=Kc,i.set(r,h);var u=$c(o(r),o(h),l,c,d,i);return i.delete(r),u;case rg:if(nt)return nt.call(r)==nt.call(h)}return!1}Vr.exports=lg});var $r=O((Kh,Hr)=>{function ag(r,h){for(var e=-1,l=h.length,c=r.length;++e<l;)r[c+e]=h[e];return r}Hr.exports=ag});var zr=O((Yh,Br)=>{var ug=$r(),dg=q();function cg(r,h,e){var l=h(r);return dg(r)?l:ug(l,e(r))}Br.exports=cg});var Kr=O((Qh,Jr)=>{function gg(r,h){for(var e=-1,l=r==null?0:r.length,c=0,d=[];++e<l;){var i=r[e];h(i,e,r)&&(d[c++]=i)}return d}Jr.exports=gg});var Qr=O((Zh,Yr)=>{function pg(){return[]}Yr.exports=pg});var ei=O((Xh,Xr)=>{var fg=Kr(),hg=Qr(),yg=Object.prototype,mg=yg.propertyIsEnumerable,Zr=Object.getOwnPropertySymbols,vg=Zr?function(r){return r==null?[]:(r=Object(r),fg(Zr(r),function(h){return mg.call(r,h)}))}:hg;Xr.exports=vg});var oi=O((ey,ti)=>{var wg=zr(),_g=ei(),bg=Te();function Eg(r){return wg(r,bg,_g)}ti.exports=Eg});var ii=O((ty,ri)=>{var ni=oi(),Sg=1,Og=Object.prototype,Ag=Og.hasOwnProperty;function Mg(r,h,e,l,c,d){var i=e&Sg,o=ni(r),n=o.length,a=ni(h),u=a.length;if(n!=u&&!i)return!1;for(var g=n;g--;){var t=o[g];if(!(i?t in h:Ag.call(h,t)))return!1}var f=d.get(r),p=d.get(h);if(f&&p)return f==h&&p==r;var y=!0;d.set(r,h),d.set(h,r);for(var w=i;++g<n;){t=o[g];var s=r[t],_=h[t];if(l)var v=i?l(_,s,t,h,r,d):l(s,_,t,r,h,d);if(!(v===void 0?s===_||c(s,_,e,l,d):v)){y=!1;break}w||(w=t=="constructor")}if(y&&!w){var m=r.constructor,E=h.constructor;m!=E&&"constructor"in r&&"constructor"in h&&!(typeof m=="function"&&m instanceof m&&typeof E=="function"&&E instanceof E)&&(y=!1)}return d.delete(r),d.delete(h),y}ri.exports=Mg});var li=O((oy,si)=>{var Fg=te(),Lg=$(),Cg=Fg(Lg,"DataView");si.exports=Cg});var ui=O((ny,ai)=>{var Tg=te(),Ig=$(),Pg=Tg(Ig,"Promise");ai.exports=Pg});var ci=O((ry,di)=>{var Dg=te(),Rg=$(),Ug=Dg(Rg,"Set");di.exports=Ug});var pi=O((iy,gi)=>{var xg=te(),Ng=$(),jg=xg(Ng,"WeakMap");gi.exports=jg});var bi=O((sy,_i)=>{var rt=li(),it=Fe(),st=ui(),lt=ci(),at=pi(),wi=K(),de=Ve(),fi="[object Map]",kg="[object Object]",hi="[object Promise]",yi="[object Set]",mi="[object WeakMap]",vi="[object DataView]",Wg=de(rt),Gg=de(it),Vg=de(st),qg=de(lt),Hg=de(at),oe=wi;(rt&&oe(new rt(new ArrayBuffer(1)))!=vi||it&&oe(new it)!=fi||st&&oe(st.resolve())!=hi||lt&&oe(new lt)!=yi||at&&oe(new at)!=mi)&&(oe=function(r){var h=wi(r),e=h==kg?r.constructor:void 0,l=e?de(e):"";if(l)switch(l){case Wg:return vi;case Gg:return fi;case Vg:return hi;case qg:return yi;case Hg:return mi}return h});_i.exports=oe});var Ci=O((ly,Li)=>{var ut=tt(),$g=ot(),Bg=qr(),zg=ii(),Ei=bi(),Si=q(),Oi=Ye(),Jg=Xe(),Kg=1,Ai="[object Arguments]",Mi="[object Array]",Pe="[object Object]",Yg=Object.prototype,Fi=Yg.hasOwnProperty;function Qg(r,h,e,l,c,d){var i=Si(r),o=Si(h),n=i?Mi:Ei(r),a=o?Mi:Ei(h);n=n==Ai?Pe:n,a=a==Ai?Pe:a;var u=n==Pe,g=a==Pe,t=n==a;if(t&&Oi(r)){if(!Oi(h))return!1;i=!0,u=!1}if(t&&!u)return d||(d=new ut),i||Jg(r)?$g(r,h,e,l,c,d):Bg(r,h,n,e,l,c,d);if(!(e&Kg)){var f=u&&Fi.call(r,"__wrapped__"),p=g&&Fi.call(h,"__wrapped__");if(f||p){var y=f?r.value():r,w=p?h.value():h;return d||(d=new ut),c(y,w,e,l,d)}}return t?(d||(d=new ut),zg(r,h,e,l,c,d)):!1}Li.exports=Qg});var dt=O((ay,Pi)=>{var Zg=Ci(),Ti=Y();function Ii(r,h,e,l,c){return r===h?!0:r==null||h==null||!Ti(r)&&!Ti(h)?r!==r&&h!==h:Zg(r,h,e,l,Ii,c)}Pi.exports=Ii});var Ri=O((uy,Di)=>{var Xg=tt(),ep=dt(),tp=1,op=2;function np(r,h,e,l){var c=e.length,d=c,i=!l;if(r==null)return!d;for(r=Object(r);c--;){var o=e[c];if(i&&o[2]?o[1]!==r[o[0]]:!(o[0]in r))return!1}for(;++c<d;){o=e[c];var n=o[0],a=r[n],u=o[1];if(i&&o[2]){if(a===void 0&&!(n in r))return!1}else{var g=new Xg;if(l)var t=l(a,u,n,r,h,g);if(!(t===void 0?ep(u,a,tp|op,l,g):t))return!1}}return!0}Di.exports=np});var ct=O((dy,Ui)=>{var rp=Me();function ip(r){return r===r&&!rp(r)}Ui.exports=ip});var Ni=O((cy,xi)=>{var sp=ct(),lp=Te();function ap(r){for(var h=lp(r),e=h.length;e--;){var l=h[e],c=r[l];h[e]=[l,c,sp(c)]}return h}xi.exports=ap});var gt=O((gy,ji)=>{function up(r,h){return function(e){return e==null?!1:e[r]===h&&(h!==void 0||r in Object(e))}}ji.exports=up});var Wi=O((py,ki)=>{var dp=Ri(),cp=Ni(),gp=gt();function pp(r){var h=cp(r);return h.length==1&&h[0][2]?gp(h[0][0],h[0][1]):function(e){return e===r||dp(e,r,h)}}ki.exports=pp});var Vi=O((fy,Gi)=>{function fp(r,h){return r!=null&&h in Object(r)}Gi.exports=fp});var Hi=O((hy,qi)=>{var hp=$e(),yp=Ke(),mp=q(),vp=Qe(),wp=Ce(),_p=me();function bp(r,h,e){h=hp(h,r);for(var l=-1,c=h.length,d=!1;++l<c;){var i=_p(h[l]);if(!(d=r!=null&&e(r,i)))break;r=r[i]}return d||++l!=c?d:(c=r==null?0:r.length,!!c&&wp(c)&&vp(i,c)&&(mp(r)||yp(r)))}qi.exports=bp});var Bi=O((yy,$i)=>{var Ep=Vi(),Sp=Hi();function Op(r,h){return r!=null&&Sp(r,h,Ep)}$i.exports=Op});var Ji=O((my,zi)=>{var Ap=dt(),Mp=ze(),Fp=Bi(),Lp=Ae(),Cp=ct(),Tp=gt(),Ip=me(),Pp=1,Dp=2;function Rp(r,h){return Lp(r)&&Cp(h)?Tp(Ip(r),h):function(e){var l=Mp(e,r);return l===void 0&&l===h?Fp(e,r):Ap(h,l,Pp|Dp)}}zi.exports=Rp});var Yi=O((vy,Ki)=>{function Up(r){return r}Ki.exports=Up});var Zi=O((wy,Qi)=>{function xp(r){return function(h){return h==null?void 0:h[r]}}Qi.exports=xp});var es=O((_y,Xi)=>{var Np=Be();function jp(r){return function(h){return Np(h,r)}}Xi.exports=jp});var os=O((by,ts)=>{var kp=Zi(),Wp=es(),Gp=Ae(),Vp=me();function qp(r){return Gp(r)?kp(Vp(r)):Wp(r)}ts.exports=qp});var rs=O((Ey,ns)=>{var Hp=Wi(),$p=Ji(),Bp=Yi(),zp=q(),Jp=os();function Kp(r){return typeof r=="function"?r:r==null?Bp:typeof r=="object"?zp(r)?$p(r[0],r[1]):Hp(r):Jp(r)}ns.exports=Kp});var ss=O((Sy,is)=>{function Yp(r,h,e,l,c){return c(r,function(d,i,o){e=l?(l=!1,d):h(e,d,i,o)}),e}is.exports=Yp});var as=O((Oy,ls)=>{var Qp=bn(),Zp=dr(),Xp=rs(),ef=ss(),tf=q();function of(r,h,e){var l=tf(r)?Qp:ef,c=arguments.length<3;return l(r,Xp(h,4),e,c,Zp)}ls.exports=of});var cs=O((Ay,be)=>{var nf=ze(),rf=mn(),us=wn(),ds=as(),ft=typeof window<"u";function sf(r,h="ERROR"){console.log("[service/dotenv][".concat(h,"] ").concat(r))}function lf(r){return r==="True"||r==="true"?!0:r==="False"||r==="false"?!1:r}function ne(r){return Array.isArray(r)?ds(r,(h,e,l)=>(h[l]=ne(e),h),[]):rf(r)?ds(r,(h,e,l)=>(h[l]=ne(e),h),{}):us(r)&&r.split(",").length>1?r.split(","):us(r)?lf(r):r}function De(r,h){if(r){let e=nf(r,h,r[h]);return e!==void 0?ne(e):void 0}}var pt=class{constructor(){this.allowedOnClient=[],this.allowedOnEditClient=[],this.getAllForWindow=this.getAllForWindow.bind(this)}getForClient(h,e=void 0){let l=De(window.env,h),c=De(window.env,h);return l!==void 0?l:c!==void 0?c:ne(e)}getForServer(h,e=void 0){let l=De(window.env,h),c=De(process.env,h);return l!==void 0?l:c!==void 0?c:ne(e)}getAllForClient(){return ne({...window.env,...window.env})}getAllForWindow(h){["allowedOnClient","allowedOnEditClient"].forEach(l=>{this[l]&&!Array.isArray(this[l])&&sf("EnvVars.".concat(l," must be an array of environment variable key strings"))});let e=this.allowedOnClient;return h&&(e=e.concat(this.allowedOnEditClient)),e&&e.reduce((l,c)=>{let d=this.getForServer(c);return l[c]=d,l},{})}getAllForServer(){return ne({...process.env,...window.env})}},Q=new pt;function af(r={}){Q.allowedOnClient=r.allowedOnClient||[],Q.allowedOnEditClient=r.allowedOnEditClient||[]}be.exports.configure=af;be.exports.get=ft?Q.getForClient:Q.getForServer;be.exports.getAll=ft?Q.getAllForClient:Q.getAllForServer;be.exports.getAllForWindow=ft?Q.getForClient:Q.getAllForWindow});var ps=O((gs,ht)=>{(function(r){typeof gs=="object"&&typeof ht<"u"?ht.exports=r():typeof define=="function"&&define.amd?define([],r):(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:this).Cep=r()})(function(){return function r(h,e,l){function c(o,n){if(!e[o]){if(!h[o]){var a=typeof I=="function"&&I;if(!n&&a)return a(o,!0);if(d)return d(o,!0);throw(n=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",n}a=e[o]={exports:{}},h[o][0].call(a.exports,function(u){return c(h[o][1][u]||u)},a,a.exports,r,h,e,l)}return e[o].exports}for(var d=typeof I=="function"&&I,i=0;i<l.length;i++)c(l[i]);return c}({1:[function(o,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var l,c=o("./Logger"),d=o("./promiseWithTimeout"),i=o("./localization"),o=((o=l=e.ModuleFlags||(e.ModuleFlags={}))[o.None=0]="None",o[o.EnableForDomestic=1]="EnableForDomestic",o[o.EnableForForeign=2]="EnableForForeign",o[o.RunWithoutAdFuel=4]="RunWithoutAdFuel",o[o.RunWithoutConsent=8]="RunWithoutConsent",o[o.HasVideoAPI=16]="HasVideoAPI",o[o.DisableForCanada=32]="DisableForCanada",Object.defineProperty(n.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),n);function n(a,u,g,t,f,p,y,w){p===void 0&&(p=l.EnableForDomestic|l.EnableForForeign),y===void 0&&(y=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var s=this;this.config=a,this.MODULE_NAME=u,this.MODULE_VERSION=g,this.MODULE_LOG_TAG=t,this.logStyle=f,this.moduleFlags=p,this.consentTags=y,this.MODULE_VIDEO_API_KEY=w,this.adFuelExists=!!window.AdFuel,this.userConsentLib=((a=window.WM)==null?void 0:a.UserConsent)||((u=window.WBD)==null?void 0:u.UserConsent),this.environmentMatchesFlags=function(){return(0,i.isIntl)()?(!(0,i.isCanada)()||(s.moduleFlags&l.DisableForCanada)!==l.DisableForCanada)&&(s.moduleFlags&l.EnableForForeign)===l.EnableForForeign:(s.moduleFlags&l.EnableForDomestic)===l.EnableForDomestic},this.callInit=function(){s.logger.log("Waiting for UserConsent..."),s.waitForUserConsent().then(function(){var _;s.logger.log("Checking Module Flags...",s.moduleFlags),(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent||(_=s.userConsentLib)!=null&&_.inUserConsentState(s.consentTags,{id:s.MODULE_NAME})?(s.moduleFlags&&l.RunWithoutAdFuel)==l.RunWithoutAdFuel?((_=window.AdFuel)!=null&&_.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var v;s.logger.log("Registering with AdFuel..."),(v=window.AdFuel)!=null&&v.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var v;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(v=window.AdFuel)!=null&&v.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)}))})):(s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)}))):(s.logger.log("Waiting for AdFuel..."),s.waitForAdFuel().then(function(){var v;(v=window.AdFuel)!=null&&v.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Registering with AdFuel..."),(m=window.AdFuel)!=null&&m.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var m;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var E;s.logger.log("Setting Module Loaded..."),(E=window.AdFuel)!=null&&E.setModuleLoaded(s.MODULE_LOG_TAG)}))})):s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags)}).catch(function(v){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for AdFuel."),v)})):(s.logger.info("User consent is not granted.",(_=s.userConsentLib)==null?void 0:_.inUserConsentState(s.consentTags)),(_=window.AdFuel)!=null&&_.setModuleLoaded(s.MODULE_LOG_TAG))}).catch(function(_){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for consent."),_)})},this.waitForAdFuel=function(){return(s.moduleFlags&l.RunWithoutAdFuel)===l.RunWithoutAdFuel?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(_){window.AdFuel?_():document.addEventListener("AdFuelCreated",function(){_()})}))},this.waitForUserConsent=function(){return!s.userConsentLib||(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(_){var v;s._logger.log("Consent Promise with Timeout..."),(v=s.userConsentLib)!=null&&v.isReady()?(s._logger.log("Consent Is Ready..."),(v=s.userConsentLib)!=null&&v.isInRegion("gdpr")?(s._logger.log("Region is GDPR..."),(v=((v=s.userConsentLib)==null?void 0:v.isOneTrustLoaded())&&!((v=s.userConsentLib)!=null&&v.isOneTrustFailing()))!=null&&v?(s._logger.log("Optanon is Loaded..."),_()):(s._logger.log("Waiting for OneTrust..."),document.addEventListener("oneTrustLoaded",function(){s._logger.log("OneTrust is Loaded..."),_()}),document.addEventListener("oneTrustFailed",function(){s._logger.error("OneTrust Failed To Load..."),_()}),document.addEventListener("oneTrustBlocked",function(){s._logger.error("OneTrust Loading Was Blocked..."),_()}))):(s._logger.log("Region is not GDPR..."),_())):s.userConsentLib?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),_()})):(console.log("No User Consent..."),_())}))},this._logger=new c.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=o},{"./Logger":3,"./localization":6,"./promiseWithTimeout":7}],2:[function(r,h,e){"use strict";function l(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,l.hasCookie=function(c){return typeof window<"u"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+c+"=")||document.cookie.indexOf(c+"=")===0)},l.setCookie=function(c){var d=c.cookieName+"="+c.cookieValue+";";c.attributes.forEach(function(i){d+=" "+i.key+"="+i.value+";"}),c.secure&&(d+=" Secure"),document.cookie=d},l.readCookie=function(c){var d,i,o=!1,n=null;return(o=typeof localStorage<"u"?!0:o)&&(n=localStorage.getItem(c)),o&&n!==null||(i=(d=c).length+1,n=typeof document<"u"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,i)==="".concat(d,"=")}).map(function(a){return decodeURIComponent(a.substring(i))})[0]||null),n},e.CookieHelper=l},{}],3:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(c=l=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",c.Warning="background: orange;color: black",c.Error="background: red;color:white",Object.defineProperty(d.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),d.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},d.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},d.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},d.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},d.prototype.getUrlParam=function(i){return typeof document<"u"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var l,c=d;function d(i,o,n,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=n||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),l.Info,this._normalStyle))}e.Logger=c},{}],4:[function(r,h,e){"use strict";function l(c,d,i,o){var n=this;this.setMajorTo=c,this.setMinorTo=d,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(a){return n.setFamilyTo=a,n},this.toString=function(){return"".concat(n.major,".").concat(n.minor.toString().padStart(2,"0"),".").concat(n.revision.toString().padStart(3,"0")," ").concat(n.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(l.prototype,"major",{get:function(){var c;return(c=this.setMajorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"minor",{get:function(){var c;return(c=this.setMinorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"revision",{get:function(){var c;return(c=this.setRevisionTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"family",{get:function(){var c;return(c=this.setFamilyTo)!=null?c:""},enumerable:!1,configurable:!0}),e.Version=l},{}],5:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(l){return typeof document<"u"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""}},{}],6:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=e.isCanada=void 0;var l=r("./setHostAndPathNames"),c=r("./getUrlParam"),d=r("./Logger"),i=r("./variables"),o=new d.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),n=!1,a=!1,u=new Set(["US","CA"]),g=/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\.cnn.com/;e.isCanada=function(){var t;return(t=(t=(t=window.WM)==null?void 0:t.UserConsent)==null?void 0:t.getGeoCountry())!=null?t:i.countryCode},e.isIntl=function(){var t=!1,f=(0,l.setHostAndPathNames)(),p=(p=(p=window.WM)==null?void 0:p.UserConsent)!=null&&p.getGeoCountry&&typeof((p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry)=="function"?(p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry():i.countryCode,y=(y=(y=window.WM)==null?void 0:y.UserConsent)!=null&&y.getGeoState&&typeof((y=(y=window.WM)==null?void 0:y.UserConsent)==null?void 0:y.getGeoState)=="function"?(y=(y=window.WM)==null?void 0:y.UserConsent)==null?void 0:y.getGeoState():"",w=0<=f.search(/^(.*\.)?cnn\.com$/);return w&&u.delete("CA"),o.log("Is CNN:",w),o.log("Domestic Country Codes: ",Array.from(u)),o.log("UserConsent Location: ",{state:y,country:p}),(0,c.getUrlParam)("isIntl")==="true"?(n||(n=!0,o.log("Faking international site. Using International PubIds.")),t=!0):0<=f.search(g)?(n||(n=!0,o.log("Full international site. Using International PubIds.")),t=!0):p===""||p===null?(n||(n=!0,o.log("No country code. Using Domestic PubIds.")),t=!1):u.has(p)?n||(n=!0,o.log("Domestic site or country code. Using Domestic PubIds."),t=!1):0<=f.search(/^.*(money|\.cnn)\./)?(0<=f.search(/^.*us\.cnn\.com/)&&(n||o.log("International user but domestic page.  Using alternate International PubIds if available."),a=!0),n||(n=!0,o.log("International country code. Using International PubIds.")),t=!0):0<=f.search(/^.*us\.cnn\.com/)?(n||(n=!0,o.log("International user but domestic page. Using alternate International PubIds if available.")),a=t=!0):(n||(n=!0,o.log("International country code but domestic site. Using International PubIds if available.")),t=!0),t},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":8,"./variables":9}],7:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(l,c,d){d===void 0&&(d="The promise timed out.");var i=new Promise(function(o,n){var a=setTimeout(function(){clearTimeout(a),n(d)},l)});return Promise.race([c,i])}},{}],8:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var l=typeof document<"u"?document.createElement("a"):{href:"",hostname:"",pathname:""};return l.href=typeof document<"u"?document.location.href:"",l.hostname}},{}],9:[function(c,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var l=c("./Version"),c=c("./CookieHelper"),d=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new l.Version(5,0,102,"TS"),e.MODULE_LOG_TAG="utils",e.toString=d.toString,e.noop=function(){},e.countryCode=c.CookieHelper.readCookie("countryCode")||((d=(l=c.CookieHelper.readCookie("CG"))==null?void 0:l.substr(0,2))!=null?d:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(l=c.CookieHelper.readCookie("SelectedEdition"))!=null?l:"www",e.hasUserConsent=typeof window<"u"&&(window.WM&&window.WM.UserConsent||window.WBD&&window.WBD.UserConsent)||!1},{"./CookieHelper":2,"./Version":4}],10:[function(a,h,e){"use strict";var l,c,d=this&&this.__extends||(l=function(g,t){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(f,p){f.__proto__=p}:function(f,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(f[y]=p[y])}))(g,t)},function(g,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function f(){this.constructor=g}l(g,t),g.prototype=t===null?Object.create(t):(f.prototype=t.prototype,new f)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.Cep=void 0,a("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=a("@turnercode/digital-ads-utilities/dist/Version"),n=a("./version.json"),a=(c=i.AAdFuelModule,d(u,c),u.prototype.init=function(){var g=this;return new Promise(function(t){g.logger.log("Initializing the module...",g.site),window.AdFuel?window.AdFuel.setModuleReady(g.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(g.MODULE_LOG_TAG)}),t()})},u.prototype.preQueue=function(g){var t=this;return new Promise(function(f){t.cepTags=window[t.site]&&window[t.site].cep_topics?window[t.site].cep_topics:t.cepTags,f({name:"CEP",tags:t.cepTags})})},u.prototype.preDispatch=function(g){var t=this;return new Promise(function(f){var p;t.targetingSet?f({name:"CEP",tags:t.cepTags}):(p=!(t.targetingSet=!0),Object.keys(t.cepTags).forEach(function(y){0<t.cepTags[y].length&&(t.logger.log("Adding CEP "+y+" Targeting: ",t.cepTags[y]),window.AdFuel?window.AdFuel.addPageLevelTarget(y,t.cepTags[y]):window.googletag.cmd.push(function(){window.googletag.pubads().setTargeting(y,t.cepTags[y])}),p=!0,f({name:"CEP",tags:t.cepTags}))}),p||(f({name:"CEP",tags:t.cepTags}),t.logger.log("No CEP targeting... adding CEP=0..."),window.AdFuel?window.AdFuel.addPageLevelTarget("cep","0"):window.googletag.cmd.push(function(){window.googletag.pubads().setTargeting("cep","0")})))})},u);function u(g){return g=c.call(this,g,"CEP",new o.Version(n.major,n.minor,n.revision,n.family),"cep","color: #d2b000; padding: 2px",i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign|i.ModuleFlags.RunWithoutConsent)||this,g.cepTags={cep_brsf:[],cep_iabt:[],cep_sent:[],cep_tags:[]},g.site=window.AdFuelOptions.ADFUEL?window.AdFuelOptions.ADFUEL.SITE_OBJECT:"",g.targetingSet=!1,g}new(e.Cep=a)({debug:!1})},{"./version.json":11,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4}],11:[function(r,h,e){h.exports={family:"TS",major:5,minor:0,revision:11}},{}]},{},[10])(10)})});var hs=O((fs,yt)=>{(function(r){typeof fs=="object"&&typeof yt<"u"?yt.exports=r():typeof define=="function"&&define.amd?define([],r):(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:this).InViewRefresh=r()})(function(){return function r(h,e,l){function c(o,n){if(!e[o]){if(!h[o]){var a=typeof I=="function"&&I;if(!n&&a)return a(o,!0);if(d)return d(o,!0);throw(n=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",n}a=e[o]={exports:{}},h[o][0].call(a.exports,function(u){return c(h[o][1][u]||u)},a,a.exports,r,h,e,l)}return e[o].exports}for(var d=typeof I=="function"&&I,i=0;i<l.length;i++)c(l[i]);return c}({1:[function(o,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var l,c=o("./Logger"),d=o("./promiseWithTimeout"),i=o("./localization"),o=((o=l=e.ModuleFlags||(e.ModuleFlags={}))[o.None=0]="None",o[o.EnableForDomestic=1]="EnableForDomestic",o[o.EnableForForeign=2]="EnableForForeign",o[o.RunWithoutAdFuel=4]="RunWithoutAdFuel",o[o.RunWithoutConsent=8]="RunWithoutConsent",o[o.HasVideoAPI=16]="HasVideoAPI",o[o.DisableForCanada=32]="DisableForCanada",Object.defineProperty(n.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),n);function n(a,u,g,t,f,p,y,w){p===void 0&&(p=l.EnableForDomestic|l.EnableForForeign),y===void 0&&(y=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var s=this;this.config=a,this.MODULE_NAME=u,this.MODULE_VERSION=g,this.MODULE_LOG_TAG=t,this.logStyle=f,this.moduleFlags=p,this.consentTags=y,this.MODULE_VIDEO_API_KEY=w,this.adFuelExists=!!window.AdFuel,this.userConsentLib=((a=window.WM)==null?void 0:a.UserConsent)||((u=window.WBD)==null?void 0:u.UserConsent),this.environmentMatchesFlags=function(){return(0,i.isIntl)()?(!(0,i.isCanada)()||(s.moduleFlags&l.DisableForCanada)!==l.DisableForCanada)&&(s.moduleFlags&l.EnableForForeign)===l.EnableForForeign:(s.moduleFlags&l.EnableForDomestic)===l.EnableForDomestic},this.callInit=function(){s.logger.log("Waiting for UserConsent..."),s.waitForUserConsent().then(function(){var _;s.logger.log("Checking Module Flags...",s.moduleFlags),(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent||(_=s.userConsentLib)!=null&&_.inUserConsentState(s.consentTags,{id:s.MODULE_NAME})?(s.moduleFlags&&l.RunWithoutAdFuel)==l.RunWithoutAdFuel?((_=window.AdFuel)!=null&&_.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var v;s.logger.log("Registering with AdFuel..."),(v=window.AdFuel)!=null&&v.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var v;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(v=window.AdFuel)!=null&&v.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)}))})):(s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)}))):(s.logger.log("Waiting for AdFuel..."),s.waitForAdFuel().then(function(){var v;(v=window.AdFuel)!=null&&v.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Registering with AdFuel..."),(m=window.AdFuel)!=null&&m.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var m;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var E;s.logger.log("Setting Module Loaded..."),(E=window.AdFuel)!=null&&E.setModuleLoaded(s.MODULE_LOG_TAG)}))})):s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags)}).catch(function(v){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for AdFuel."),v)})):(s.logger.info("User consent is not granted.",(_=s.userConsentLib)==null?void 0:_.inUserConsentState(s.consentTags)),(_=window.AdFuel)!=null&&_.setModuleLoaded(s.MODULE_LOG_TAG))}).catch(function(_){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for consent."),_)})},this.waitForAdFuel=function(){return(s.moduleFlags&l.RunWithoutAdFuel)===l.RunWithoutAdFuel?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(_){window.AdFuel?_():document.addEventListener("AdFuelCreated",function(){_()})}))},this.waitForUserConsent=function(){return!s.userConsentLib||(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(_){var v;s._logger.log("Consent Promise with Timeout..."),(v=s.userConsentLib)!=null&&v.isReady()?(s._logger.log("Consent Is Ready..."),(v=s.userConsentLib)!=null&&v.isInRegion("gdpr")?(s._logger.log("Region is GDPR..."),(v=((v=s.userConsentLib)==null?void 0:v.isOneTrustLoaded())&&!((v=s.userConsentLib)!=null&&v.isOneTrustFailing()))!=null&&v?(s._logger.log("Optanon is Loaded..."),_()):(s._logger.log("Waiting for OneTrust..."),document.addEventListener("oneTrustLoaded",function(){s._logger.log("OneTrust is Loaded..."),_()}),document.addEventListener("oneTrustFailed",function(){s._logger.error("OneTrust Failed To Load..."),_()}),document.addEventListener("oneTrustBlocked",function(){s._logger.error("OneTrust Loading Was Blocked..."),_()}))):(s._logger.log("Region is not GDPR..."),_())):s.userConsentLib?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),_()})):(console.log("No User Consent..."),_())}))},this._logger=new c.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=o},{"./Logger":3,"./localization":6,"./promiseWithTimeout":7}],2:[function(r,h,e){"use strict";function l(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,l.hasCookie=function(c){return typeof window<"u"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+c+"=")||document.cookie.indexOf(c+"=")===0)},l.setCookie=function(c){var d=c.cookieName+"="+c.cookieValue+";";c.attributes.forEach(function(i){d+=" "+i.key+"="+i.value+";"}),c.secure&&(d+=" Secure"),document.cookie=d},l.readCookie=function(c){var d,i,o=!1,n=null;return(o=typeof localStorage<"u"?!0:o)&&(n=localStorage.getItem(c)),o&&n!==null||(i=(d=c).length+1,n=typeof document<"u"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,i)==="".concat(d,"=")}).map(function(a){return decodeURIComponent(a.substring(i))})[0]||null),n},e.CookieHelper=l},{}],3:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(c=l=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",c.Warning="background: orange;color: black",c.Error="background: red;color:white",Object.defineProperty(d.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),d.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},d.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},d.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},d.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},d.prototype.getUrlParam=function(i){return typeof document<"u"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var l,c=d;function d(i,o,n,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=n||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),l.Info,this._normalStyle))}e.Logger=c},{}],4:[function(r,h,e){"use strict";function l(c,d,i,o){var n=this;this.setMajorTo=c,this.setMinorTo=d,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(a){return n.setFamilyTo=a,n},this.toString=function(){return"".concat(n.major,".").concat(n.minor.toString().padStart(2,"0"),".").concat(n.revision.toString().padStart(3,"0")," ").concat(n.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(l.prototype,"major",{get:function(){var c;return(c=this.setMajorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"minor",{get:function(){var c;return(c=this.setMinorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"revision",{get:function(){var c;return(c=this.setRevisionTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"family",{get:function(){var c;return(c=this.setFamilyTo)!=null?c:""},enumerable:!1,configurable:!0}),e.Version=l},{}],5:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(l){return typeof document<"u"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""}},{}],6:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=e.isCanada=void 0;var l=r("./setHostAndPathNames"),c=r("./getUrlParam"),d=r("./Logger"),i=r("./variables"),o=new d.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),n=!1,a=!1,u=new Set(["US","CA"]),g=/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\.cnn.com/;e.isCanada=function(){var t;return(t=(t=(t=window.WM)==null?void 0:t.UserConsent)==null?void 0:t.getGeoCountry())!=null?t:i.countryCode},e.isIntl=function(){var t=!1,f=(0,l.setHostAndPathNames)(),p=(p=(p=window.WM)==null?void 0:p.UserConsent)!=null&&p.getGeoCountry&&typeof((p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry)=="function"?(p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry():i.countryCode,y=(y=(y=window.WM)==null?void 0:y.UserConsent)!=null&&y.getGeoState&&typeof((y=(y=window.WM)==null?void 0:y.UserConsent)==null?void 0:y.getGeoState)=="function"?(y=(y=window.WM)==null?void 0:y.UserConsent)==null?void 0:y.getGeoState():"",w=0<=f.search(/^(.*\.)?cnn\.com$/);return w&&u.delete("CA"),o.log("Is CNN:",w),o.log("Domestic Country Codes: ",Array.from(u)),o.log("UserConsent Location: ",{state:y,country:p}),(0,c.getUrlParam)("isIntl")==="true"?(n||(n=!0,o.log("Faking international site. Using International PubIds.")),t=!0):0<=f.search(g)?(n||(n=!0,o.log("Full international site. Using International PubIds.")),t=!0):p===""||p===null?(n||(n=!0,o.log("No country code. Using Domestic PubIds.")),t=!1):u.has(p)?n||(n=!0,o.log("Domestic site or country code. Using Domestic PubIds."),t=!1):0<=f.search(/^.*(money|\.cnn)\./)?(0<=f.search(/^.*us\.cnn\.com/)&&(n||o.log("International user but domestic page.  Using alternate International PubIds if available."),a=!0),n||(n=!0,o.log("International country code. Using International PubIds.")),t=!0):0<=f.search(/^.*us\.cnn\.com/)?(n||(n=!0,o.log("International user but domestic page. Using alternate International PubIds if available.")),a=t=!0):(n||(n=!0,o.log("International country code but domestic site. Using International PubIds if available.")),t=!0),t},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":8,"./variables":9}],7:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(l,c,d){d===void 0&&(d="The promise timed out.");var i=new Promise(function(o,n){var a=setTimeout(function(){clearTimeout(a),n(d)},l)});return Promise.race([c,i])}},{}],8:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var l=typeof document<"u"?document.createElement("a"):{href:"",hostname:"",pathname:""};return l.href=typeof document<"u"?document.location.href:"",l.hostname}},{}],9:[function(c,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var l=c("./Version"),c=c("./CookieHelper"),d=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new l.Version(5,0,102,"TS"),e.MODULE_LOG_TAG="utils",e.toString=d.toString,e.noop=function(){},e.countryCode=c.CookieHelper.readCookie("countryCode")||((d=(l=c.CookieHelper.readCookie("CG"))==null?void 0:l.substr(0,2))!=null?d:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(l=c.CookieHelper.readCookie("SelectedEdition"))!=null?l:"www",e.hasUserConsent=typeof window<"u"&&(window.WM&&window.WM.UserConsent||window.WBD&&window.WBD.UserConsent)||!1},{"./CookieHelper":2,"./Version":4}],10:[function(a,h,e){"use strict";var l,c,d=this&&this.__extends||(l=function(g,t){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(f,p){f.__proto__=p}:function(f,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(f[y]=p[y])}))(g,t)},function(g,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function f(){this.constructor=g}l(g,t),g.prototype=t===null?Object.create(t):(f.prototype=t.prototype,new f)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.InViewRefresh=void 0,a("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=a("@turnercode/digital-ads-utilities/dist/Version"),n=a("./version.json"),a=(c=i.AAdFuelModule,d(u,c),u);function u(g){var t=c.call(this,g,"In-View Refresh Module",new o.Version(n.major,n.minor,n.revision,n.family),"ivr","color: #00e1e1; padding: 2px",i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign|i.ModuleFlags.RunWithoutConsent)||this;return t.DISALLOWED_RENDERED_SIZES=["970x66","970x90","970x250"],t.TARGET_DISPLAY_MILLISECONDS=t.config.DEFAULT_DISPLAY_MILLISECONDS,t.TARGET_DISPLAY_PERCENT=t.config.DEFAULT_DISPLAY_PERCENT,t._focused=!0,t._registeredSlots=[],t._renderedCreativeIds={},t._renderedLineItemIds={},t._invalidSlotIds=[],t._viewabilityListenersStarted=!1,t._refreshableInViewSlots={},t.init=function(){return new Promise(function(f,p){t.logger.log("Initializing IVR..."),window.AdFuel?window.AdFuel.setModuleReady(t.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(t.MODULE_LOG_TAG)}),f()})},t.start=function(){return new Promise(function(){t.startViewabilityListeners()})},t.startViewabilityListeners=function(){t._viewabilityListenersStarted||(window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener("impressionViewable",function(y){t.logger.log("impressionViewable changed"),t.logger.log("impressionViewable changed");var p=y,y=(y=y.slot)==null?void 0:y.getSlotElementId();t.logger.log("Refreshable In View Slots: ",t._refreshableInViewSlots),t._refreshableInViewSlots[y]!==void 0&&t._refreshableInViewSlots[y].listenersSet?t.logger.log("Refreshable In View Slot listeners have already been set for: ",y,{object:t._refreshableInViewSlots[y]}):(t.logger.log("Refreshable In View Slot listeners have not been set: ",y,{object:t._refreshableInViewSlots[y]}),t.createInViewRefreshObject(p))}),window.googletag.pubads().addEventListener("slotVisibilityChanged",function(f){t.logger.log("slotVisibilityChanged"),t.logger.log("slotVisibilityChanged"),t.visibilityChanged(f)}),window.googletag.pubads().addEventListener("slotRenderEnded",function(f){t.logger.log("slotRenderEnded"),t.logger.log("slotRenderEnded");var y=f,p=y.slot.getSlotElementId(),y=(y.size?Array.isArray(y.size)&&(y.size=y.size.join("x")):y.size="0x0",y.size),w=(w=f.creativeId||f.sourceAgnosticCreativeId)!=null?w:0,s=(s=f.lineItemId||f.sourceAgnosticLineItemId)!=null?s:0,_=t._renderedCreativeIds[p]||[],v=t._renderedLineItemIds[p]||[];t.logger.log("----------Slot: ["+p+"]----------"),t.logger.log("Rendered Size: ",y),t.logger.log("Creative Ids: ",{selected:w,native:f.creativeId,agnostic:f.sourceAgnosticCreativeId}),0<=_.indexOf(w)?(delete t._refreshableInViewSlots[p],t._registeredSlots.splice(t._registeredSlots.indexOf(p),1),t._invalidSlotIds.push(p),t.logger.log("Duplicate Creative ["+w+"] returned for slot ["+p+"].  Stopping refresh.",t._registeredSlots)):0<=t.DISALLOWED_RENDERED_SIZES.indexOf(y)?(delete t._refreshableInViewSlots[p],t._registeredSlots.splice(t._registeredSlots.indexOf(p),1),t._invalidSlotIds.push(p),t.logger.log("Rendered size ["+y+"] for slot ["+p+"] is invalid for IVR.  Stopping refresh.",t._registeredSlots)):(w&&_.indexOf(w)<0&&_.push(w),s&&v.indexOf(s)<0&&v.push(s),t._renderedCreativeIds[p]=_,t._renderedLineItemIds[p]=v,t.logger.log("Rendered Creatives: ",t._renderedCreativeIds[p]),t.logger.log("Rendered LineItems: ",t._renderedLineItemIds[p]))})}),document.addEventListener("visibilitychange",t.visibilityChangeEvent),t._viewabilityListenersStarted=!0,t.logger.log("Listeners Started!"))},t.visibilityChangeEvent=function(f){t.logger.log("Visibility Change Event: ",f),t.logger.log("Relaying to _focusChanged..."),t._focused=!document.hidden,t.focusChanged(f)},t.focusChanged=function(f){t.logger.log("Focus Change Event: ",f),document.hidden?(t.logger.log("Page is hidden.  Destroying all intervals..."),t.destroyInterval()):(t.logger.log("Page is not hidden. Checking Intervals..."),Object.keys(t._refreshableInViewSlots).forEach(function(p){t.logger.log("",{index:p,slot:t._refreshableInViewSlots[p]}),t.getInterval(p)?t.logger.log("Interval exists...",p):(t.logger.log("Creating Interval...",p),t.detectInView())}))},t.visibilityChanged=function(y){var p=y.inViewPercentage||0,y=y.slot.getSlotElementId(),w=t.getInterval(y);p>=t.TARGET_DISPLAY_PERCENT?(t.logger.log("Element ["+y+"] Meets In-View Percentage Requirements",p),t._focused?(t.logger.log("... and page has focus"),w||(t.logger.log("... interval does not exist. Creating Interval..."),t.createInterval(y))):t.logger.log("... but page does not have focus.  Not creating interval.")):(t.logger.log("Element ["+y+"] Does NOT Meet In-View Percentage Requirements",p),w&&(t.logger.log("Found Interval for Element ["+y+"]... Destroying Interval."),t.destroyInterval(y)))},t.getInterval=function(f){return t.logger.log("Getting Interval for: ",f),!(t._refreshableInViewSlots[f]&&t._refreshableInViewSlots[f].timer===null||!t._refreshableInViewSlots[f])&&t._refreshableInViewSlots[f].timer},t.createInterval=function(f){var p,y;t.logger.log("Refreshable In-View Slots: ",t._refreshableInViewSlots),t._refreshableInViewSlots[f]&&(y=typeof(p=t._refreshableInViewSlots[f]).inViewRefreshInterval=="string"?1e3*parseInt(p.inViewRefreshInterval,10):typeof p.inViewRefreshInterval=="number"?1e3*p.inViewRefreshInterval:t.TARGET_DISPLAY_MILLISECONDS,t.logger.log("Slot ".concat(f," interval: ").concat(y)),p.inViewRefreshCounter=t._refreshableInViewSlots[f].inViewRefreshCounter||0,t.logger.log("Creating Interval for: ",f),p.timer=window.setInterval(function(){var w,s,_;t.logger.log("Slot: ",p),p!=null?(typeof p.inViewRefreshCount=="string"&&(p.inViewRefreshCount=parseInt(p.inViewRefreshCount)),0<p.inViewRefreshCount?(p.el=p.el||document.getElementById(f),w=(s=(s=p.el)==null?void 0:s.id)!=null?s:"",p.inViewRefreshCount--,p.inViewRefreshCounter++,0<=p.inViewRefreshCount&&(s=window.googletag.pubads().getSlots().filter(function(v){return v.getSlotElementId()===w})[0],t.logger.log("GoogleSlot: ",s),t.logger.log("Slot ["+w+"] is in view and is being refreshed."),t.logger.log("Starting Targeting Keys: ",s.getTargetingKeys()),t.logger.log("Clearing targeting on slot ["+w+"]...",p),_=s.getTargeting("pos"),s.clearTargeting(),_&&s.setTargeting("pos",_),t.logger.log("Cleared Targeting Keys: ",s.getTargetingKeys()),t.logger.log("Setting rfv count targeting on slot ["+w+"]: ",p.inViewRefreshCounter),s.setTargeting("rfv",p.inViewRefreshCounter.toString()),t._invalidSlotIds.indexOf(w)<0?(t.logger.log("Calling refresh On slot["+w+"]...",p),(_=window.AdFuel)!=null&&_.refresh([w]),t.logger.log("Slot ["+p.el.id+"] is in view, was just refreshed, and still has "+p.inViewRefreshCount+" refreshes remaining.")):t.logger.log("Slot ["+p.el.id+"] is invalid for refresh."))):t.logger.log("Slot ["+f+"] is in view but has no refreshes remaining.",p,p.inViewRefreshCount)):t.logger.log("Slot refresh prevented due to rendered size.")},y),t.logger.log("Done."))},t.destroyInterval=function(f){var p;f?(t.logger.log("Destroying interval for: ",f),p=t._refreshableInViewSlots[f],window.clearInterval((f=p.timer)!=null?f:0),p.timer=null,p.inView=!1):(t.logger.log("Destroying All Intervals"),Object.keys(t._refreshableInViewSlots).forEach(function(y){t.logger.log("Destroying interval for: ",y),p=t._refreshableInViewSlots[y],window.clearInterval((y=p.timer)!=null?y:0),p.timer=null,p.inView=!1}))},t.createInViewRefreshObject=function(p){t.logger.log("Checking Element: ",{event:p});var p=(p=p.slot)==null?void 0:p.getSlotElementId(),y=document.getElementById(p);t._registeredSlots.indexOf(p)!==-1&&t._refreshableInViewSlots[p]?(t.logger.log("Slot is registered with InView Refresh"),t._refreshableInViewSlots[p].inView=!1,t._refreshableInViewSlots[p].el=y,t._refreshableInViewSlots[p].refreshCount=0,t._refreshableInViewSlots[p].listenersSet=!0):t.logger.log("registered with InView Refresh")},t.isInsideBounds=function(f,p,F,w,s,_,v,m){var E=Math.max(F,v),S=Math.min(w,m),M=Math.max(f,s),T=Math.min(p,_),C=0,F=(F<=E&&E<=w&&F<=S&&S<=w&&f<=M&&M<=p&&f<=T&&T<=p&&(C=(S-E)*(T-M)),(_-s)*(m-v));return 0<F?C/F:0},t.getPercentInView=function(E){var p=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,y=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,w=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,s=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,v=E.getBoundingClientRect(),_=v.left+document.body.scrollLeft,v=v.top+document.body.scrollTop,m=_+E.clientWidth,E=v+E.clientHeight;return 100*t.isInsideBounds(w,w+p,s,s+y,_,m,v,E)},t.detectInView=function(){t.logger.log("Detecting In View Slots."),Object.keys(t._refreshableInViewSlots).length<1&&t.logger.log("No registered slots have been rendered yet."),Object.keys(t._refreshableInViewSlots).forEach(function(f){var y=t._refreshableInViewSlots[f].el||document.getElementById(f),p=!1,y=(y&&(p=y&&t._focused&&t.getPercentInView(y)>=t.TARGET_DISPLAY_PERCENT&&0<t._refreshableInViewSlots[f].inViewRefreshCount),t.getInterval(f));p&&!y&&t.createInterval(f)})},t.preQueue=function(f){return new Promise(function(p){for(var y=!1,w=0;w<f.length;w++){var s=f[w].unWrappedSlot;s.hasInViewRefresh===!0&&(t.logger.log("Slot has In-View Refresh..."),y=!(s.inViewRefreshCounter=0),t._registeredSlots.push(s.rktr_slot_id))}y&&(t.logger.log("Starting IVR Listeners..."),t.startViewabilityListeners()),p({name:"IVR"})})},t.preDispatch=function(f){return new Promise(function(p){for(var y=0;y<f.length;y++){var w=f[y].unWrappedSlot;w.hasInViewRefresh?(t.logger.log("Slot is configured for in view refresh.  Creating refresh object for slot ["+w.rktr_slot_id+"]"),t._refreshableInViewSlots[w.rktr_slot_id]=w):t.logger.log("Slot is not configured for in view refresh. ["+w.rktr_slot_id+"]")}p({name:"IVR"})})},t.logger.log("InViewRefresh created..."),t}new(e.InViewRefresh=a)(window.IVR||((d=window.AdFuelOptions)==null?void 0:d.IVR)||{DEFAULT_DISPLAY_MILLISECONDS:3e3,DEFAULT_DISPLAY_PERCENT:50,DEBUG:!1})},{"./version.json":11,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4}],11:[function(r,h,e){h.exports={family:"TS",major:5,minor:0,revision:12}},{}]},{},[10])(10)})});var ms=O((ys,mt)=>{(function(r){typeof ys=="object"&&typeof mt<"u"?mt.exports=r():typeof define=="function"&&define.amd?define([],r):(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:this).MalvertisingDetection=r()})(function(){return function r(h,e,l){function c(o,n){if(!e[o]){if(!h[o]){var a=typeof I=="function"&&I;if(!n&&a)return a(o,!0);if(d)return d(o,!0);throw(n=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",n}a=e[o]={exports:{}},h[o][0].call(a.exports,function(u){return c(h[o][1][u]||u)},a,a.exports,r,h,e,l)}return e[o].exports}for(var d=typeof I=="function"&&I,i=0;i<l.length;i++)c(l[i]);return c}({1:[function(o,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var l,c=o("./Logger"),d=o("./promiseWithTimeout"),i=o("./localization"),o=((o=l=e.ModuleFlags||(e.ModuleFlags={}))[o.None=0]="None",o[o.EnableForDomestic=1]="EnableForDomestic",o[o.EnableForForeign=2]="EnableForForeign",o[o.RunWithoutAdFuel=4]="RunWithoutAdFuel",o[o.RunWithoutConsent=8]="RunWithoutConsent",o[o.HasVideoAPI=16]="HasVideoAPI",o[o.DisableForCanada=32]="DisableForCanada",Object.defineProperty(n.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),n);function n(a,u,g,t,f,p,y,w){p===void 0&&(p=l.EnableForDomestic|l.EnableForForeign),y===void 0&&(y=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var s=this;this.config=a,this.MODULE_NAME=u,this.MODULE_VERSION=g,this.MODULE_LOG_TAG=t,this.logStyle=f,this.moduleFlags=p,this.consentTags=y,this.MODULE_VIDEO_API_KEY=w,this.adFuelExists=!!window.AdFuel,this.userConsentLib=((a=window.WM)==null?void 0:a.UserConsent)||((u=window.WBD)==null?void 0:u.UserConsent),this.environmentMatchesFlags=function(){return(0,i.isIntl)()?(!(0,i.isCanada)()||(s.moduleFlags&l.DisableForCanada)!==l.DisableForCanada)&&(s.moduleFlags&l.EnableForForeign)===l.EnableForForeign:(s.moduleFlags&l.EnableForDomestic)===l.EnableForDomestic},this.callInit=function(){s.logger.log("Waiting for UserConsent..."),s.waitForUserConsent().then(function(){var _;s.logger.log("Checking Module Flags...",s.moduleFlags),(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent||(_=s.userConsentLib)!=null&&_.inUserConsentState(s.consentTags,{id:s.MODULE_NAME})?(s.moduleFlags&&l.RunWithoutAdFuel)==l.RunWithoutAdFuel?((_=window.AdFuel)!=null&&_.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var v;s.logger.log("Registering with AdFuel..."),(v=window.AdFuel)!=null&&v.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var v;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(v=window.AdFuel)!=null&&v.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)}))})):(s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)}))):(s.logger.log("Waiting for AdFuel..."),s.waitForAdFuel().then(function(){var v;(v=window.AdFuel)!=null&&v.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Registering with AdFuel..."),(m=window.AdFuel)!=null&&m.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var m;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var E;s.logger.log("Setting Module Loaded..."),(E=window.AdFuel)!=null&&E.setModuleLoaded(s.MODULE_LOG_TAG)}))})):s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags)}).catch(function(v){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for AdFuel."),v)})):(s.logger.info("User consent is not granted.",(_=s.userConsentLib)==null?void 0:_.inUserConsentState(s.consentTags)),(_=window.AdFuel)!=null&&_.setModuleLoaded(s.MODULE_LOG_TAG))}).catch(function(_){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for consent."),_)})},this.waitForAdFuel=function(){return(s.moduleFlags&l.RunWithoutAdFuel)===l.RunWithoutAdFuel?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(_){window.AdFuel?_():document.addEventListener("AdFuelCreated",function(){_()})}))},this.waitForUserConsent=function(){return!s.userConsentLib||(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(_){var v;s._logger.log("Consent Promise with Timeout..."),(v=s.userConsentLib)!=null&&v.isReady()?(s._logger.log("Consent Is Ready..."),(v=s.userConsentLib)!=null&&v.isInRegion("gdpr")?(s._logger.log("Region is GDPR..."),(v=((v=s.userConsentLib)==null?void 0:v.isOneTrustLoaded())&&!((v=s.userConsentLib)!=null&&v.isOneTrustFailing()))!=null&&v?(s._logger.log("Optanon is Loaded..."),_()):(s._logger.log("Waiting for OneTrust..."),document.addEventListener("oneTrustLoaded",function(){s._logger.log("OneTrust is Loaded..."),_()}),document.addEventListener("oneTrustFailed",function(){s._logger.error("OneTrust Failed To Load..."),_()}),document.addEventListener("oneTrustBlocked",function(){s._logger.error("OneTrust Loading Was Blocked..."),_()}))):(s._logger.log("Region is not GDPR..."),_())):s.userConsentLib?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),_()})):(console.log("No User Consent..."),_())}))},this._logger=new c.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=o},{"./Logger":3,"./localization":7,"./promiseWithTimeout":8}],2:[function(r,h,e){"use strict";function l(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,l.hasCookie=function(c){return typeof window<"u"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+c+"=")||document.cookie.indexOf(c+"=")===0)},l.setCookie=function(c){var d=c.cookieName+"="+c.cookieValue+";";c.attributes.forEach(function(i){d+=" "+i.key+"="+i.value+";"}),c.secure&&(d+=" Secure"),document.cookie=d},l.readCookie=function(c){var d,i,o=!1,n=null;return(o=typeof localStorage<"u"?!0:o)&&(n=localStorage.getItem(c)),o&&n!==null||(i=(d=c).length+1,n=typeof document<"u"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,i)==="".concat(d,"=")}).map(function(a){return decodeURIComponent(a.substring(i))})[0]||null),n},e.CookieHelper=l},{}],3:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(c=l=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",c.Warning="background: orange;color: black",c.Error="background: red;color:white",Object.defineProperty(d.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),d.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},d.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},d.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},d.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},d.prototype.getUrlParam=function(i){return typeof document<"u"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var l,c=d;function d(i,o,n,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=n||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),l.Info,this._normalStyle))}e.Logger=c},{}],4:[function(r,h,e){"use strict";function l(c,d,i,o){var n=this;this.setMajorTo=c,this.setMinorTo=d,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(a){return n.setFamilyTo=a,n},this.toString=function(){return"".concat(n.major,".").concat(n.minor.toString().padStart(2,"0"),".").concat(n.revision.toString().padStart(3,"0")," ").concat(n.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(l.prototype,"major",{get:function(){var c;return(c=this.setMajorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"minor",{get:function(){var c;return(c=this.setMinorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"revision",{get:function(){var c;return(c=this.setRevisionTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"family",{get:function(){var c;return(c=this.setFamilyTo)!=null?c:""},enumerable:!1,configurable:!0}),e.Version=l},{}],5:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(l){return typeof document<"u"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""}},{}],6:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadScriptFromUrl=void 0;var l=r("./promiseWithTimeout");e.loadScriptFromUrl=function(c,d,i,o){return i===void 0&&(i=document),o===void 0&&(o=!0),(0,l.promiseWithTimeout)(5e3,new Promise(function(n,a){var u,g,t=i.createElement("script");if(t.setAttribute("data-nscript","beforeInteractive"),document.getElementById(d))a("Element name ".concat(d," already exists in the document."));else try{var f="",p=(f=1<c.split("//").length?c:((g=((u=i.location)==null?void 0:u.protocol)==="https:")!==null&&g?"https://":"http://").concat(c),i.getElementsByTagName("script")[0]);if(t.id=d,t.type="text/javascript",t.src=f,t.async=o,t.addEventListener("load",function(){n(t)}),p==null||!p.parentNode)throw new Error("Could not insert script.");p.parentNode.insertBefore(t,p)}catch(y){console.log("Error in loading script from ".concat(t.src),y),a(y)}}))}},{"./promiseWithTimeout":8}],7:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=e.isCanada=void 0;var l=r("./setHostAndPathNames"),c=r("./getUrlParam"),d=r("./Logger"),i=r("./variables"),o=new d.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),n=!1,a=!1,u=new Set(["US","CA"]),g=/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\.cnn.com/;e.isCanada=function(){var t;return(t=(t=(t=window.WM)==null?void 0:t.UserConsent)==null?void 0:t.getGeoCountry())!=null?t:i.countryCode},e.isIntl=function(){var t=!1,f=(0,l.setHostAndPathNames)(),p=(p=(p=window.WM)==null?void 0:p.UserConsent)!=null&&p.getGeoCountry&&typeof((p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry)=="function"?(p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry():i.countryCode,y=(y=(y=window.WM)==null?void 0:y.UserConsent)!=null&&y.getGeoState&&typeof((y=(y=window.WM)==null?void 0:y.UserConsent)==null?void 0:y.getGeoState)=="function"?(y=(y=window.WM)==null?void 0:y.UserConsent)==null?void 0:y.getGeoState():"",w=0<=f.search(/^(.*\.)?cnn\.com$/);return w&&u.delete("CA"),o.log("Is CNN:",w),o.log("Domestic Country Codes: ",Array.from(u)),o.log("UserConsent Location: ",{state:y,country:p}),(0,c.getUrlParam)("isIntl")==="true"?(n||(n=!0,o.log("Faking international site. Using International PubIds.")),t=!0):0<=f.search(g)?(n||(n=!0,o.log("Full international site. Using International PubIds.")),t=!0):p===""||p===null?(n||(n=!0,o.log("No country code. Using Domestic PubIds.")),t=!1):u.has(p)?n||(n=!0,o.log("Domestic site or country code. Using Domestic PubIds."),t=!1):0<=f.search(/^.*(money|\.cnn)\./)?(0<=f.search(/^.*us\.cnn\.com/)&&(n||o.log("International user but domestic page.  Using alternate International PubIds if available."),a=!0),n||(n=!0,o.log("International country code. Using International PubIds.")),t=!0):0<=f.search(/^.*us\.cnn\.com/)?(n||(n=!0,o.log("International user but domestic page. Using alternate International PubIds if available.")),a=t=!0):(n||(n=!0,o.log("International country code but domestic site. Using International PubIds if available.")),t=!0),t},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":9,"./variables":10}],8:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(l,c,d){d===void 0&&(d="The promise timed out.");var i=new Promise(function(o,n){var a=setTimeout(function(){clearTimeout(a),n(d)},l)});return Promise.race([c,i])}},{}],9:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var l=typeof document<"u"?document.createElement("a"):{href:"",hostname:"",pathname:""};return l.href=typeof document<"u"?document.location.href:"",l.hostname}},{}],10:[function(c,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var l=c("./Version"),c=c("./CookieHelper"),d=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new l.Version(5,0,102,"TS"),e.MODULE_LOG_TAG="utils",e.toString=d.toString,e.noop=function(){},e.countryCode=c.CookieHelper.readCookie("countryCode")||((d=(l=c.CookieHelper.readCookie("CG"))==null?void 0:l.substr(0,2))!=null?d:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(l=c.CookieHelper.readCookie("SelectedEdition"))!=null?l:"www",e.hasUserConsent=typeof window<"u"&&(window.WM&&window.WM.UserConsent||window.WBD&&window.WBD.UserConsent)||!1},{"./CookieHelper":2,"./Version":4}],11:[function(u,h,e){"use strict";var l,c,d=this&&this.__extends||(l=function(t,f){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(p,y){p.__proto__=y}:function(p,y){for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(p[w]=y[w])}))(t,f)},function(t,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function p(){this.constructor=t}l(t,f),t.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.MalvertisingDetection=void 0,u("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=u("@turnercode/digital-ads-utilities/dist/loadScriptFromUrl"),n=u("@turnercode/digital-ads-utilities/dist/Version"),a=u("./version.json"),u=(c=i.AAdFuelModule,d(g,c),g.prototype.init=function(){var t=this;return new Promise(function(f,p){t.config.SCRIPT_SRC==""?p("SCRIPT_SRC is not set."):((0,o.loadScriptFromUrl)("".concat(t.config.SCRIPT_SRC),"maldetect").finally(function(){t.logger.info("Setting ready."),window.AdFuel?window.AdFuel.setModuleReady(t.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(t.MODULE_LOG_TAG)})}).catch(function(y){t.logger.error("There was an error loading MalvertisingDetection:",y)}),f())})},g);function g(t){return t=c.call(this,t,"Malvertising Detection",new n.Version(a.major,a.minor,a.revision,a.family),"maldetect","color: #58f53f; padding: 2px",i.ModuleFlags.RunWithoutAdFuel|i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign)||this,t.logger.log("Malvertising Detection constructed..."),t}new(e.MalvertisingDetection=u)(((d=window.AdFuelOptions)==null?void 0:d.MALVERTISING)||{SCRIPT_SRC:""})},{"./version.json":12,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4,"@turnercode/digital-ads-utilities/dist/loadScriptFromUrl":6}],12:[function(r,h,e){h.exports={family:"TS",major:5,minor:0,revision:11}},{}]},{},[11])(11)})});var ws=O((vs,vt)=>{(function(r){typeof vs=="object"&&typeof vt<"u"?vt.exports=r():typeof define=="function"&&define.amd?define([],r):(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:this).Blockthrough=r()})(function(){return function r(h,e,l){function c(o,n){if(!e[o]){if(!h[o]){var a=typeof I=="function"&&I;if(!n&&a)return a(o,!0);if(d)return d(o,!0);throw(n=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",n}a=e[o]={exports:{}},h[o][0].call(a.exports,function(u){return c(h[o][1][u]||u)},a,a.exports,r,h,e,l)}return e[o].exports}for(var d=typeof I=="function"&&I,i=0;i<l.length;i++)c(l[i]);return c}({1:[function(o,h,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var l,c=o("./Logger"),d=o("./promiseWithTimeout"),i=o("./localization"),o=((o=l=e.ModuleFlags||(e.ModuleFlags={}))[o.None=0]="None",o[o.EnableForDomestic=1]="EnableForDomestic",o[o.EnableForForeign=2]="EnableForForeign",o[o.RunWithoutAdFuel=4]="RunWithoutAdFuel",o[o.RunWithoutConsent=8]="RunWithoutConsent",o[o.HasVideoAPI=16]="HasVideoAPI",o[o.DisableForCanada=32]="DisableForCanada",Object.defineProperty(n.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),n);function n(a,u,g,t,f,p,y,w){p===void 0&&(p=l.EnableForDomestic|l.EnableForForeign),y===void 0&&(y=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var s=this;this.config=a,this.MODULE_NAME=u,this.MODULE_VERSION=g,this.MODULE_LOG_TAG=t,this.logStyle=f,this.moduleFlags=p,this.consentTags=y,this.MODULE_VIDEO_API_KEY=w,this.adFuelExists=!!window.AdFuel,this.userConsentLib=((a=window.WM)==null?void 0:a.UserConsent)||((u=window.WBD)==null?void 0:u.UserConsent),this.environmentMatchesFlags=function(){return(0,i.isIntl)()?(!(0,i.isCanada)()||(s.moduleFlags&l.DisableForCanada)!==l.DisableForCanada)&&(s.moduleFlags&l.EnableForForeign)===l.EnableForForeign:(s.moduleFlags&l.EnableForDomestic)===l.EnableForDomestic},this.callInit=function(){s.logger.log("Waiting for UserConsent..."),s.waitForUserConsent().then(function(){var _;s.logger.log("Checking Module Flags...",s.moduleFlags),(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent||(_=s.userConsentLib)!=null&&_.inUserConsentState(s.consentTags,{id:s.MODULE_NAME})?(s.moduleFlags&&l.RunWithoutAdFuel)==l.RunWithoutAdFuel?((_=window.AdFuel)!=null&&_.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var v;s.logger.log("Registering with AdFuel..."),(v=window.AdFuel)!=null&&v.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var v;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(v=window.AdFuel)!=null&&v.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)}))})):(s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)}))):(s.logger.log("Waiting for AdFuel..."),s.waitForAdFuel().then(function(){var v;(v=window.AdFuel)!=null&&v.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Registering with AdFuel..."),(m=window.AdFuel)!=null&&m.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var m;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var E;s.logger.log("Setting Module Loaded..."),(E=window.AdFuel)!=null&&E.setModuleLoaded(s.MODULE_LOG_TAG)}))})):s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags)}).catch(function(v){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for AdFuel."),v)})):(s.logger.info("User consent is not granted.",(_=s.userConsentLib)==null?void 0:_.inUserConsentState(s.consentTags)),(_=window.AdFuel)!=null&&_.setModuleLoaded(s.MODULE_LOG_TAG))}).catch(function(_){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for consent."),_)})},this.waitForAdFuel=function(){return(s.moduleFlags&l.RunWithoutAdFuel)===l.RunWithoutAdFuel?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(_){window.AdFuel?_():document.addEventListener("AdFuelCreated",function(){_()})}))},this.waitForUserConsent=function(){return!s.userConsentLib||(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(_){var v;s._logger.log("Consent Promise with Timeout..."),(v=s.userConsentLib)!=null&&v.isReady()?(s._logger.log("Consent Is Ready..."),(v=s.userConsentLib)!=null&&v.isInRegion("gdpr")?(s._logger.log("Region is GDPR..."),(v=((v=s.userConsentLib)==null?void 0:v.isOneTrustLoaded())&&!((v=s.userConsentLib)!=null&&v.isOneTrustFailing()))!=null&&v?(s._logger.log("Optanon is Loaded..."),_()):(s._logger.log("Waiting for OneTrust..."),document.addEventListener("oneTrustLoaded",function(){s._logger.log("OneTrust is Loaded..."),_()}),document.addEventListener("oneTrustFailed",function(){s._logger.error("OneTrust Failed To Load..."),_()}),document.addEventListener("oneTrustBlocked",function(){s._logger.error("OneTrust Loading Was Blocked..."),_()}))):(s._logger.log("Region is not GDPR..."),_())):s.userConsentLib?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),_()})):(console.log("No User Consent..."),_())}))},this._logger=new c.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=o},{"./Logger":3,"./localization":7,"./promiseWithTimeout":8}],2:[function(r,h,e){function l(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,l.hasCookie=function(c){return typeof window<"u"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+c+"=")||document.cookie.indexOf(c+"=")===0)},l.setCookie=function(c){var d=c.cookieName+"="+c.cookieValue+";";c.attributes.forEach(function(i){d+=" "+i.key+"="+i.value+";"}),c.secure&&(d+=" Secure"),document.cookie=d},l.readCookie=function(c){var d,i,o=!1,n=null;return(o=typeof localStorage<"u"?!0:o)&&(n=localStorage.getItem(c)),o&&n!==null||(i=(d=c).length+1,n=typeof document<"u"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,i)==="".concat(d,"=")}).map(function(a){return decodeURIComponent(a.substring(i))})[0]||null),n},e.CookieHelper=l},{}],3:[function(r,h,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(c=l=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",c.Warning="background: orange;color: black",c.Error="background: red;color:white",Object.defineProperty(d.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),d.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},d.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},d.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},d.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},d.prototype.getUrlParam=function(i){return typeof document<"u"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var l,c=d;function d(i,o,n,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=n||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),l.Info,this._normalStyle))}e.Logger=c},{}],4:[function(r,h,e){function l(c,d,i,o){var n=this;this.setMajorTo=c,this.setMinorTo=d,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(a){return n.setFamilyTo=a,n},this.toString=function(){return"".concat(n.major,".").concat(n.minor.toString().padStart(2,"0"),".").concat(n.revision.toString().padStart(3,"0")," ").concat(n.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(l.prototype,"major",{get:function(){var c;return(c=this.setMajorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"minor",{get:function(){var c;return(c=this.setMinorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"revision",{get:function(){var c;return(c=this.setRevisionTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"family",{get:function(){var c;return(c=this.setFamilyTo)!=null?c:""},enumerable:!1,configurable:!0}),e.Version=l},{}],5:[function(r,h,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(l){return typeof document<"u"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""}},{}],6:[function(r,h,e){Object.defineProperty(e,"__esModule",{value:!0}),e.loadScriptFromUrl=void 0;var l=r("./promiseWithTimeout");e.loadScriptFromUrl=function(c,d,i,o){return i===void 0&&(i=document),o===void 0&&(o=!0),(0,l.promiseWithTimeout)(5e3,new Promise(function(n,a){var u,g,t=i.createElement("script");if(t.setAttribute("data-nscript","beforeInteractive"),document.getElementById(d))a("Element name ".concat(d," already exists in the document."));else try{var f="",p=(f=1<c.split("//").length?c:((g=((u=i.location)==null?void 0:u.protocol)==="https:")!==null&&g?"https://":"http://").concat(c),i.getElementsByTagName("script")[0]);if(t.id=d,t.type="text/javascript",t.src=f,t.async=o,t.addEventListener("load",function(){n(t)}),p==null||!p.parentNode)throw new Error("Could not insert script.");p.parentNode.insertBefore(t,p)}catch(y){console.log("Error in loading script from ".concat(t.src),y),a(y)}}))}},{"./promiseWithTimeout":8}],7:[function(r,h,e){Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=e.isCanada=void 0;var l=r("./setHostAndPathNames"),c=r("./getUrlParam"),d=r("./Logger"),i=r("./variables"),o=new d.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),n=!1,a=!1,u=new Set(["US","CA"]),g=/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\.cnn.com/;e.isCanada=function(){var t;return(t=(t=(t=window.WM)==null?void 0:t.UserConsent)==null?void 0:t.getGeoCountry())!=null?t:i.countryCode},e.isIntl=function(){var t=!1,f=(0,l.setHostAndPathNames)(),p=(p=(p=window.WM)==null?void 0:p.UserConsent)!=null&&p.getGeoCountry&&typeof((p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry)=="function"?(p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry():i.countryCode,y=(y=(y=window.WM)==null?void 0:y.UserConsent)!=null&&y.getGeoState&&typeof((y=(y=window.WM)==null?void 0:y.UserConsent)==null?void 0:y.getGeoState)=="function"?(y=(y=window.WM)==null?void 0:y.UserConsent)==null?void 0:y.getGeoState():"",w=0<=f.search(/^(.*\.)?cnn\.com$/);return w&&u.delete("CA"),o.log("Is CNN:",w),o.log("Domestic Country Codes: ",Array.from(u)),o.log("UserConsent Location: ",{state:y,country:p}),(0,c.getUrlParam)("isIntl")==="true"?(n||(n=!0,o.log("Faking international site. Using International PubIds.")),t=!0):0<=f.search(g)?(n||(n=!0,o.log("Full international site. Using International PubIds.")),t=!0):p===""||p===null?(n||(n=!0,o.log("No country code. Using Domestic PubIds.")),t=!1):u.has(p)?n||(n=!0,o.log("Domestic site or country code. Using Domestic PubIds."),t=!1):0<=f.search(/^.*(money|\.cnn)\./)?(0<=f.search(/^.*us\.cnn\.com/)&&(n||o.log("International user but domestic page.  Using alternate International PubIds if available."),a=!0),n||(n=!0,o.log("International country code. Using International PubIds.")),t=!0):0<=f.search(/^.*us\.cnn\.com/)?(n||(n=!0,o.log("International user but domestic page. Using alternate International PubIds if available.")),a=t=!0):(n||(n=!0,o.log("International country code but domestic site. Using International PubIds if available.")),t=!0),t},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":9,"./variables":10}],8:[function(r,h,e){Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(l,c,d){d===void 0&&(d="The promise timed out.");var i=new Promise(function(o,n){var a=setTimeout(function(){clearTimeout(a),n(d)},l)});return Promise.race([c,i])}},{}],9:[function(r,h,e){Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var l=typeof document<"u"?document.createElement("a"):{href:"",hostname:"",pathname:""};return l.href=typeof document<"u"?document.location.href:"",l.hostname}},{}],10:[function(c,h,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var l=c("./Version"),c=c("./CookieHelper"),d=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new l.Version(5,0,102,"TS"),e.MODULE_LOG_TAG="utils",e.toString=d.toString,e.noop=function(){},e.countryCode=c.CookieHelper.readCookie("countryCode")||((d=(l=c.CookieHelper.readCookie("CG"))==null?void 0:l.substr(0,2))!=null?d:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(l=c.CookieHelper.readCookie("SelectedEdition"))!=null?l:"www",e.hasUserConsent=typeof window<"u"&&(window.WM&&window.WM.UserConsent||window.WBD&&window.WBD.UserConsent)||!1},{"./CookieHelper":2,"./Version":4}],11:[function(g,h,e){var l,c,d=this&&this.__extends||(l=function(f,p){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(y,w){y.__proto__=w}:function(y,w){for(var s in w)Object.prototype.hasOwnProperty.call(w,s)&&(y[s]=w[s])}))(f,p)},function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function y(){this.constructor=f}l(f,p),f.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.Blockthrough=void 0,g("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=g("@turnercode/digital-ads-utilities/dist/loadScriptFromUrl"),n=g("@turnercode/digital-ads-utilities/dist/Version"),a=g("./version.json"),u=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"],g=(c=i.AAdFuelModule,d(t,c),t.prototype.init=function(){var f=this;return new Promise(function(p,y){(0,o.loadScriptFromUrl)("warnermediagroup-com.videoplayerhub.com/galleryloader.js","btScript").finally(function(){f.logger.info("Setting ready."),window.AdFuel?window.AdFuel.setModuleReady(f.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(f.MODULE_LOG_TAG)})}).catch(function(w){f.logger.error("There was an error loading the Blockthrough script.",w)}),p()})},t);function t(f){f===void 0&&(f=i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign|i.ModuleFlags.RunWithoutAdFuel);var p=c.call(this,null,"Blockthrough",new n.Version(a.major,a.minor,a.revision,a.family),"bt","color: #d2b000; padding: 2px",f,u)||this;return p.preDispatch=function(y){return new Promise(function(w,s){var _;p.logger.info("BLOCKTHROUGH: preDispatch was fired."),window.AdFuelUtils||(window.AdFuelUtils={isBlockerEnabled:!1,isReinsertionAllowed:!1,getPermissionToReinsert:function(v){}}),window.AdFuelUtils.isBlockerEnabled=(_=(_=window.BT)==null?void 0:_.BLOCKER_ENABLED)!=null&&_,window.AdFuelUtils.isReinsertionAllowed=(_=(_=window.BT)==null?void 0:_.REINSERTION_ALLOWED)!=null&&_,window.AdFuelUtils.getPermissionToReinsert=function(v){window.BT&&window.BT.getPermissionToReinsert(function(m){m&&v()})},w()})},console.log("ModuleFlags: ",{DOM:i.ModuleFlags.EnableForDomestic,INTL:i.ModuleFlags.EnableForForeign,ADF:i.ModuleFlags.RunWithoutAdFuel}),p.logger.info("Created Blockthrough Module"),p}new(e.Blockthrough=g)(i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign|i.ModuleFlags.RunWithoutAdFuel)},{"./version.json":12,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4,"@turnercode/digital-ads-utilities/dist/loadScriptFromUrl":6}],12:[function(r,h,e){h.exports={family:"TS",major:5,minor:0,revision:13}},{}]},{},[11])(11)})});var bs=O((_s,wt)=>{(function(r){typeof _s=="object"&&typeof wt<"u"?wt.exports=r():typeof define=="function"&&define.amd?define([],r):(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:this).AdFuel=r()})(function(){return function r(h,e,l){function c(o,n){if(!e[o]){if(!h[o]){var a=typeof I=="function"&&I;if(!n&&a)return a(o,!0);if(d)return d(o,!0);throw(n=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",n}a=e[o]={exports:{}},h[o][0].call(a.exports,function(u){return c(h[o][1][u]||u)},a,a.exports,r,h,e,l)}return e[o].exports}for(var d=typeof I=="function"&&I,i=0;i<l.length;i++)c(l[i]);return c}({1:[function(o,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var l,c=o("./Logger"),d=o("./promiseWithTimeout"),i=o("./localization"),o=((o=l=e.ModuleFlags||(e.ModuleFlags={}))[o.None=0]="None",o[o.EnableForDomestic=1]="EnableForDomestic",o[o.EnableForForeign=2]="EnableForForeign",o[o.RunWithoutAdFuel=4]="RunWithoutAdFuel",o[o.RunWithoutConsent=8]="RunWithoutConsent",o[o.HasVideoAPI=16]="HasVideoAPI",Object.defineProperty(n.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),n);function n(a,u,g,t,f,p,y,w){p===void 0&&(p=l.EnableForDomestic|l.EnableForForeign),y===void 0&&(y=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var s=this;this.config=a,this.MODULE_NAME=u,this.MODULE_VERSION=g,this.MODULE_LOG_TAG=t,this.logStyle=f,this.moduleFlags=p,this.consentTags=y,this.MODULE_VIDEO_API_KEY=w,this.adFuelExists=!!window.AdFuel,this.environmentMatchesFlags=function(){var _=l.None;return(0,i.isIntl)()&&(_|=l.EnableForForeign),(0,i.isIntl)()||(_|=l.EnableForDomestic),(s.moduleFlags&l.EnableForDomestic)===l.EnableForDomestic&&(s.moduleFlags&l.EnableForForeign)===l.EnableForForeign?_===(_&l.EnableForDomestic)||_===(_&l.EnableForForeign):(s.moduleFlags&l.EnableForDomestic)===l.EnableForDomestic?_===(_&l.EnableForDomestic):_===(_&l.EnableForForeign)},this.callInit=function(){s.logger.log("Waiting for UserConsent..."),s.waitForUserConsent().then(function(){var _;s.logger.log("Checking Module Flags...",s.moduleFlags),(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent||(_=(_=window.WM)==null?void 0:_.UserConsent)!=null&&_.inUserConsentState(s.consentTags)?(s.moduleFlags&&l.RunWithoutAdFuel)==l.RunWithoutAdFuel?((_=window.AdFuel)!=null&&_.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var v;s.logger.log("Registering with AdFuel..."),(v=window.AdFuel)!=null&&v.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var v;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(v=window.AdFuel)!=null&&v.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)}))})):s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags)):(s.logger.log("Waiting for AdFuel..."),s.waitForAdFuel().then(function(){var v;(v=window.AdFuel)!=null&&v.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Registering with AdFuel..."),(m=window.AdFuel)!=null&&m.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var m;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var E;s.logger.log("Setting Module Loaded..."),(E=window.AdFuel)!=null&&E.setModuleLoaded(s.MODULE_LOG_TAG)}))})):s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags)}).catch(function(v){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for AdFuel."),v)})):s.logger.info("User consent is not granted.",(_=(_=window.WM)==null?void 0:_.UserConsent)==null?void 0:_.inUserConsentState(s.consentTags))}).catch(function(_){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for consent."),_)})},this.waitForAdFuel=function(){return(s.moduleFlags&l.RunWithoutAdFuel)===l.RunWithoutAdFuel?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(_){window.AdFuel?_():document.addEventListener("AdFuelCreated",function(){_()})}))},this.waitForUserConsent=function(){var _;return(_=window.WM)==null||!_.UserConsent||(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(v){var m;s._logger.log("Consent Promise with Timeout..."),(m=(m=window.WM)==null?void 0:m.UserConsent)!=null&&m.isReady()?(s._logger.log("Consent Is Ready..."),(m=(m=window.WM)==null?void 0:m.UserConsent)!=null&&m.isInRegion("gdpr")?(s._logger.log("Region is GDPR..."),(m=(m=(m=window.WM)==null?void 0:m.UserConsent)==null?void 0:m.isOptanonLoaded())!=null&&m?(s._logger.log("Optanon is Loaded..."),v()):(s._logger.log("Waiting for Optanon..."),document.addEventListener("optanonLoaded",function(){s._logger.log("Optanon is Loaded..."),v()}))):(s._logger.log("Region is not GDPR..."),v())):(m=window.WM)!=null&&m.UserConsent?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),v()})):(console.log("No User Consent..."),v())}))},this._logger=new c.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=o},{"./Logger":3,"./localization":13,"./promiseWithTimeout":15}],2:[function(r,h,e){"use strict";function l(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,l.hasCookie=function(c){return typeof window<"u"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+c+"=")||document.cookie.indexOf(c+"=")===0)},l.setCookie=function(c){var d=c.cookieName+"="+c.cookieValue+";";c.attributes.forEach(function(i){d+=" "+i.key+"="+i.value+";"}),c.secure&&(d+=" Secure"),document.cookie=d},l.readCookie=function(c){var d,i,o=!1,n=null;return(o=typeof localStorage<"u"?!0:o)&&(n=localStorage.getItem(c)),o&&n!==null||(i=(d=c).length+1,n=typeof document<"u"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,i)==="".concat(d,"=")}).map(function(a){return decodeURIComponent(a.substring(i))})[0]||null),n},e.CookieHelper=l},{}],3:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(c=l=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",c.Warning="background: orange;color: black",c.Error="background: red;color:white",Object.defineProperty(d.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),d.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},d.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},d.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},d.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},d.prototype.getUrlParam=function(i){return typeof document<"u"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var l,c=d;function d(i,o,n,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=n||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),l.Info,this._normalStyle))}e.Logger=c},{}],4:[function(r,h,e){"use strict";function l(c){this._tag="ADFUEL",this._tag=c,this.addMark("AdFuel Load START")}Object.defineProperty(e,"__esModule",{value:!0}),e.Performance=void 0,l.prototype.addMark=function(c){typeof window<"u"&&window.performance.mark("[".concat(this._tag,"] ").concat(c))},l.prototype.addMeasure=function(c){typeof window<"u"&&window.performance.measure("[".concat(this._tag,"] ").concat(c),"[".concat(this._tag,"] ").concat(c," START"),"[".concat(this._tag,"] ").concat(c," END"))},l.prototype.getMarks=function(){var c,d=this;return(c=window==null?void 0:window.performance.getEntriesByType("mark").filter(function(i){return i.name.indexOf("[".concat(d._tag,"] "))}))!=null?c:[]},l.prototype.getMeasures=function(){var c,d=this;return(c=window==null?void 0:window.performance.getEntriesByType("measure").filter(function(i){return i.name.indexOf("[".concat(d._tag,"] "))}))!=null?c:[]},e.Performance=l},{}],5:[function(r,h,e){"use strict";function l(c){var d=this;this.logger=c,this.re=/(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()\[\]\.,;:\s@\"]+\.)+[^<>()\[\]\.,;:\s@\"]{2,})/i,this.present=function(){return d.presentInQueryString()||d.presentInHash()||d.presentInReferrer()}}Object.defineProperty(e,"__esModule",{value:!0}),e.PiiFilter=void 0,l.prototype.presentInQueryString=function(){if(document.location.search){var c=document.location.search.search(this.re)+1,d=void 0;try{d=decodeURIComponent(document.location.search).search(this.re)+1}catch{d=c}return c===1||d===1}return!1},l.prototype.presentInHash=function(){if(document.location.hash){var c=document.location.hash.search(this.re)+1,d=void 0;try{d=decodeURIComponent(document.location.hash).search(this.re)+1}catch{d=c}return c||d}return!1},l.prototype.presentInReferrer=function(){if(document.referrer){var c=document.referrer.search(this.re)+1,d=void 0;try{d=decodeURIComponent(document.location.referrer).search(this.re)+1}catch{d=c}return c||d}return!1},l.prototype.filterDFPRequest=function(){if(this.presentInQueryString()||this.presentInHash()||this.presentInReferrer()){if(typeof window<"u"&&window.AdFuel){this.logger.log("Filtering DFP Request due to PII in query string.");for(var c=Object.getOwnPropertyNames(window.AdFuel),d=0;d<c.length;d++);window.googletag=null}return!0}return!1},Object.defineProperty(l.prototype,"qs",{get:function(){return this.presentInQueryString},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"hash",{get:function(){return this.presentInHash},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"ref",{get:function(){return this.presentInReferrer},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"isPIIPresent",{get:function(){return this.present},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"filter",{get:function(){return this.filterDFPRequest},enumerable:!1,configurable:!0}),e.PiiFilter=l},{}],6:[function(r,h,e){"use strict";function l(c,d,i,o){var n=this;this.setMajorTo=c,this.setMinorTo=d,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(a){return n.setFamilyTo=a,n},this.toString=function(){return"".concat(n.major,".").concat(n.minor.toString().padStart(2,"0"),".").concat(n.revision.toString().padStart(3,"0")," ").concat(n.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(l.prototype,"major",{get:function(){var c;return(c=this.setMajorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"minor",{get:function(){var c;return(c=this.setMinorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"revision",{get:function(){var c;return(c=this.setRevisionTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"family",{get:function(){var c;return(c=this.setFamilyTo)!=null?c:""},enumerable:!1,configurable:!0}),e.Version=l},{}],7:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateCacheBuster=void 0,e.generateCacheBuster=function(){for(var l="",c=0;c<10;c++)l+=Math.floor(9*Math.random()).toString();return l}},{}],8:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(l){return typeof document<"u"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""}},{}],9:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getViewport=void 0,e.getViewport=function(){var l=0,c=0,c=typeof window<"u"&&window&&window.innerWidth!==void 0?(l=window.innerWidth,window.innerHeight):(typeof document<"u"&&document&&document.documentElement!==void 0&&document.documentElement.clientWidth!==void 0&&document.documentElement.clientWidth!==0?(l=document.documentElement.clientWidth,document.documentElement):(l=document.getElementsByTagName("body")[0].clientWidth,document.getElementsByTagName("body")[0])).clientHeight;return{width:l,height:c,toGpt:[""+l,""+c]}}},{}],10:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasVideo=void 0,e.hasVideo=function(){var l=document.getElementsByTagName("video"),c=document.getElementsByClassName("fave-wrapper"),d=document.getElementsByClassName("top-container");return!!l.length||!!c.length||!!d.length}},{}],11:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.waitForVideo=e.Version=e.PiiFilter=e.Performance=e.toString=e.setHostAndPathNames=e.selectedEdition=e.promiseWithTimeout=e.normalizeUrl=e.noop=e.ModuleFlags=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=e.Logger=e.locationServiceURL=e.loadScriptFromUrl=e.isUSCNN=e.isIntl=e.hasVideo=e.hasUserConsent=e.getUrlParam=e.generateCacheBuster=e.countryCode=e.CookieHelper=e.AAdFuelModule=void 0;var l=r("./AAdFuelModule"),c=(Object.defineProperty(e,"AAdFuelModule",{enumerable:!0,get:function(){return l.AAdFuelModule}}),Object.defineProperty(e,"ModuleFlags",{enumerable:!0,get:function(){return l.ModuleFlags}}),r("./CookieHelper")),d=(Object.defineProperty(e,"CookieHelper",{enumerable:!0,get:function(){return c.CookieHelper}}),r("./getUrlParam")),i=(Object.defineProperty(e,"getUrlParam",{enumerable:!0,get:function(){return d.getUrlParam}}),r("./hasVideo")),o=(Object.defineProperty(e,"hasVideo",{enumerable:!0,get:function(){return i.hasVideo}}),r("./localization")),n=(Object.defineProperty(e,"isIntl",{enumerable:!0,get:function(){return o.isIntl}}),Object.defineProperty(e,"isUSCNN",{enumerable:!0,get:function(){return o.isUSCNN}}),r("./loadScriptFromUrl")),a=(Object.defineProperty(e,"loadScriptFromUrl",{enumerable:!0,get:function(){return n.loadScriptFromUrl}}),r("./Logger")),u=(Object.defineProperty(e,"Logger",{enumerable:!0,get:function(){return a.Logger}}),r("./normalizeUrl")),g=(Object.defineProperty(e,"normalizeUrl",{enumerable:!0,get:function(){return u.normalizeUrl}}),r("./promiseWithTimeout")),t=(Object.defineProperty(e,"promiseWithTimeout",{enumerable:!0,get:function(){return g.promiseWithTimeout}}),r("./Performance")),f=(Object.defineProperty(e,"Performance",{enumerable:!0,get:function(){return t.Performance}}),r("./PiiFilter")),p=(Object.defineProperty(e,"PiiFilter",{enumerable:!0,get:function(){return f.PiiFilter}}),r("./setHostAndPathNames")),y=(Object.defineProperty(e,"setHostAndPathNames",{enumerable:!0,get:function(){return p.setHostAndPathNames}}),r("./generateCacheBuster")),w=(Object.defineProperty(e,"generateCacheBuster",{enumerable:!0,get:function(){return y.generateCacheBuster}}),r("./variables")),s=(Object.defineProperty(e,"MODULE_VERSION",{enumerable:!0,get:function(){return w.MODULE_VERSION}}),Object.defineProperty(e,"MODULE_NAME",{enumerable:!0,get:function(){return w.MODULE_NAME}}),Object.defineProperty(e,"MODULE_LOG_TAG",{enumerable:!0,get:function(){return w.MODULE_LOG_TAG}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return w.toString}}),Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return w.noop}}),Object.defineProperty(e,"countryCode",{enumerable:!0,get:function(){return w.countryCode}}),Object.defineProperty(e,"locationServiceURL",{enumerable:!0,get:function(){return w.locationServiceURL}}),Object.defineProperty(e,"selectedEdition",{enumerable:!0,get:function(){return w.selectedEdition}}),Object.defineProperty(e,"hasUserConsent",{enumerable:!0,get:function(){return w.hasUserConsent}}),r("./Version")),_=(Object.defineProperty(e,"Version",{enumerable:!0,get:function(){return s.Version}}),r("./waitForVideo"));Object.defineProperty(e,"waitForVideo",{enumerable:!0,get:function(){return _.waitForVideo}})},{"./AAdFuelModule":1,"./CookieHelper":2,"./Logger":3,"./Performance":4,"./PiiFilter":5,"./Version":6,"./generateCacheBuster":7,"./getUrlParam":8,"./hasVideo":10,"./loadScriptFromUrl":12,"./localization":13,"./normalizeUrl":14,"./promiseWithTimeout":15,"./setHostAndPathNames":16,"./variables":17,"./waitForVideo":18}],12:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadScriptFromUrl=void 0;var l=r("./promiseWithTimeout");e.loadScriptFromUrl=function(c,d,i,o){return i===void 0&&(i=document),o===void 0&&(o=!0),(0,l.promiseWithTimeout)(5e3,new Promise(function(n,a){var u,g,t=i.createElement("script");if(document.getElementById(d))a("Element name ".concat(d," already exists in the document."));else try{var f="",p=(f=1<c.split("//").length?c:((g=((u=i.location)==null?void 0:u.protocol)==="https:")!==null&&g?"https://":"http://").concat(c),i.getElementsByTagName("script")[0]);if(t.id=d,t.type="text/javascript",t.src=f,t.async=o,t.addEventListener("load",function(){n(t)}),p==null||!p.parentNode)throw new Error("Could not insert script.");p.parentNode.insertBefore(t,p)}catch(y){console.log("Error in loading script from ".concat(t.src),y),a(y)}}))}},{"./promiseWithTimeout":15}],13:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=void 0;var l=r("./setHostAndPathNames"),c=r("./getUrlParam"),d=r("./Logger"),i=r("./variables"),o=new d.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),n=!1,a=!1;e.isIntl=function(){var u=!1,g=(0,l.setHostAndPathNames)();return(0,c.getUrlParam)("isIntl")==="true"?(n||(n=!0,o.log("Faking international site. Using International PubIds.")),u=!0):0<=g.search(/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\./)?(n||(n=!0,o.log("Full international site. Using International PubIds.")),u=!0):i.countryCode===""||i.countryCode===null?(n||(n=!0,o.log("No country code.")),u=!1):i.countryCode!=="US"&&i.countryCode!=="CA"?0<=g.search(/^.*(money|\.cnn)\./)?(0<=g.search(/^.*us\.cnn\.com/)&&(n||o.log("International user but domestic page.  Using alternate international PubIds if available."),a=!0),n||(n=!0,o.log("International country code.")),u=!0):0<=g.search(/^.*us\.cnn\.com/)?(n||(n=!0,o.log("International user but domestic page. Using alternate international PubIds if available.")),a=u=!0):(n||(n=!0,o.log("International country code but domestic site.")),u=!0):n||(n=!0,o.log("Domestic site or country code."),u=!1),u},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":8,"./setHostAndPathNames":16,"./variables":17}],14:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeUrl=void 0,e.normalizeUrl=function(l){var c=Object.assign({normalizeProtocol:!0,normalizeHttps:!1,normalizeHttp:!0,stripFragment:!0,stripWWW:!0,removeQueryParameters:!0,removeTrailingSlash:!1,removeDirectoryIndex:!1},{}),d=l.trim(),i=l[0]==="/"&&l[1]==="/",o=(!i&&/^\.*\//.test(l)||(d=l.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,"http://")),document.createElement("a"));if(o.href=d,c.normalizeHttps&&c.normalizeHttp)throw new Error("The `normalizeHttp` and `normalizeHttps` options cannot be used together");return c.normalizeHttp&&(o.protocol==="http:"||i)&&(o.protocol="https:"),c.normalizeHttps&&(o.protocol==="https:"||i)&&(o.protocol="http:"),c.stripFragment&&(o.hash=""),o.pathname&&(o.pathname=o.pathname.replace(/((?![https?:]).)\/{2,}/g,function(n,a){return/^(?!\/)/g.test(a)?a+"/":"/"})),o.pathname&&(o.pathname=decodeURI(o.pathname)),o.hostname&&(o.hostname=o.hostname.replace(/\.$/,""),c.stripWWW)&&(o.hostname=o.hostname.replace(/^www\./,"")),c.removeQueryParameters&&(o.search=""),d=o.href,!c.removeTrailingSlash&&o.pathname!=="/"||(d=l.replace(/\/$/,"")),d=i&&!c.normalizeProtocol?l.replace(/^http:\/\//,"//"):d}},{}],15:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(l,c,d){d===void 0&&(d="The promise timed out.");var i=new Promise(function(o,n){var a=setTimeout(function(){clearTimeout(a),n(d)},l)});return Promise.race([c,i])}},{}],16:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var l=typeof document<"u"?document.createElement("a"):{href:"",hostname:"",pathname:""};return l.href=typeof document<"u"?document.location.href:"",l.hostname}},{}],17:[function(c,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var l=c("./Version"),c=c("./CookieHelper"),d=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new l.Version(1,0,0,"TS"),e.MODULE_LOG_TAG="utils",e.toString=d.toString,e.noop=function(){},e.countryCode=c.CookieHelper.readCookie("countryCode")||((d=(l=c.CookieHelper.readCookie("CG"))==null?void 0:l.substr(0,2))!=null?d:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(l=c.CookieHelper.readCookie("SelectedEdition"))!=null?l:"www",e.hasUserConsent=typeof window<"u"&&window.WM&&window.WM.UserConsent||!1},{"./CookieHelper":2,"./Version":6}],18:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.waitForVideo=void 0,e.waitForVideo=function(l){var c=!1,d=new MutationObserver(function(a){var u=document.getElementsByTagName("video"),g=document.getElementsByClassName("fave-wrapper"),t=document.getElementsByClassName("top-container");(u.length||g.length||t.length)&&(c||l(),c=!0,d.disconnect())}),i=(d.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),document.getElementsByTagName("video")),o=document.getElementsByClassName("fave-wrapper"),n=document.getElementsByClassName("top-container");(i.length||o.length||n.length)&&(l(),c=!0,d.disconnect())}},{}],19:[function(o,h,e){"use strict";var l,c=this&&this.__extends||(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(m,E){m.__proto__=E}:function(m,E){for(var S in E)E.hasOwnProperty(S)&&(m[S]=E[S])}),function(m,E){function S(){this.constructor=m}l(m,E),m.prototype=E===null?Object.create(E):(S.prototype=E.prototype,new S)}),d=(Object.defineProperty(e,"__esModule",{value:!0}),o("./Enumerables")),i=o("./Comparers"),o=(n.prototype.toList=function(){return new t(this.toArray())},n.prototype.toDictionary=function(m,E){return _.fromArray(this.toArray(),m,E)},n.prototype.reverse=function(){return new d.ReverseEnumerable(this.asEnumerable())},n.prototype.concat=function(m){for(var E,S=[],M=1;M<arguments.length;M++)S[M-1]=arguments[M];return(E=this.asEnumerable()).concat.apply(E,[m].concat(S))},n.prototype.contains=function(m){return this.any(function(E){return E===m})},n.prototype.where=function(m){return new d.ConditionalEnumerable(this.asEnumerable(),m)},n.prototype.select=function(m){return new d.TransformEnumerable(this.asEnumerable(),m)},n.prototype.selectMany=function(m){return this.select(function(E){return E=m(E),E instanceof Array?new d.ArrayEnumerable(E):E.asEnumerable()}).toArray().reduce(function(E,S){return new d.ConcatEnumerable(E,S)},d.Enumerable.empty())},n.prototype.elementAt=function(m){if(m=this.elementAtOrDefault(m),m===void 0)throw new Error("Out of bounds");return m},n.prototype.except=function(m){return this.asEnumerable().except(m)},n.prototype.first=function(m){if(m=m!==void 0?this.firstOrDefault(m):this.firstOrDefault(),m===void 0)throw new Error("Sequence contains no elements");return m},n.prototype.groupBy=function(m,E){for(var S=this.toArray(),M=new _,T=0;T<S.length;++T){var C=m(S[T]),F=E!==void 0?E(S[T]):S[T];M.containsKey(C)||M.set(C,new t),M.get(C).push(F)}return M.asEnumerable()},n.prototype.last=function(m){if(m=m!==void 0?this.lastOrDefault(m):this.lastOrDefault(),m===void 0)throw new Error("Sequence contains no elements");return m},n.prototype.single=function(m){if(m=m!==void 0?this.singleOrDefault(m):this.singleOrDefault(),m===void 0)throw new Error("Sequence contains no elements");return m},n.prototype.singleOrDefault=function(m){return m!==void 0?this.asEnumerable().singleOrDefault(m):this.asEnumerable().singleOrDefault()},n.prototype.skipWhile=function(m){return this.asEnumerable().skipWhile(m)},n.prototype.takeWhile=function(m){return this.asEnumerable().takeWhile(m)},n.prototype.sequenceEqual=function(m,E){return E!==void 0?this.asEnumerable().sequenceEqual(m,E):this.asEnumerable().sequenceEqual(m)},n.prototype.distinct=function(m){return new d.UniqueEnumerable(this.asEnumerable(),m)},n.prototype.min=function(m){return m!==void 0?new d.TransformEnumerable(this.asEnumerable(),m).min():this.aggregate(function(E,S){return E!==void 0&&E<S?E:S})},n.prototype.orderBy=function(m,E){return new d.OrderedEnumerable(this.asEnumerable(),i.createComparer(m,!0,E))},n.prototype.orderByDescending=function(m){return new d.OrderedEnumerable(this.asEnumerable(),i.createComparer(m,!1,void 0))},n.prototype.max=function(m){return m!==void 0?new d.TransformEnumerable(this.asEnumerable(),m).max():this.aggregate(function(E,S){return E!==void 0&&S<E?E:S})},n.prototype.sum=function(m){return this.aggregate(function(E,S){return E+m(S)},0)},n.prototype.skip=function(m){return new d.RangeEnumerable(this.asEnumerable(),m,void 0)},n.prototype.take=function(m){return new d.RangeEnumerable(this.asEnumerable(),void 0,m)},n.prototype.union=function(m){return new d.UniqueEnumerable(this.concat(m))},n.prototype.aggregate=function(m,E){return E!==void 0?this.asEnumerable().aggregate(m,E):this.asEnumerable().aggregate(m)},n.prototype.any=function(m){return m!==void 0?this.asEnumerable().any(m):this.asEnumerable().any()},n.prototype.all=function(m){return this.asEnumerable().all(m)},n.prototype.average=function(m){return this.asEnumerable().average(m)},n.prototype.count=function(m){return m!==void 0?this.asEnumerable().count(m):this.asEnumerable().count()},n.prototype.elementAtOrDefault=function(m){return this.asEnumerable().elementAtOrDefault(m)},n.prototype.firstOrDefault=function(m){return m!==void 0?this.asEnumerable().firstOrDefault(m):this.asEnumerable().firstOrDefault()},n.prototype.lastOrDefault=function(m){return m!==void 0?this.asEnumerable().lastOrDefault(m):this.asEnumerable().lastOrDefault()},n.prototype.forEach=function(m){return this.asEnumerable().forEach(m)},n.prototype.defaultIfEmpty=function(m){return m!==void 0?this.asEnumerable().defaultIfEmpty(m):this.asEnumerable().defaultIfEmpty()},n.prototype.zip=function(m,E){return this.asEnumerable().zip(m,E)},n);function n(){}e.EnumerableCollection=o,c(u,a=o),u.prototype.asArray=function(){return this.source},u.prototype.toArray=function(){return[].concat(this.source)},u.prototype.toList=function(){return new t(this.toArray())},u.prototype.asEnumerable=function(){return new d.ArrayEnumerable(this.source)},u.prototype.aggregate=function(m,E){return E!==void 0?this.source.reduce(m,E):this.source.reduce(m)},u.prototype.any=function(m){return m!==void 0?this.source.some(m):0<this.source.length},u.prototype.all=function(m){return this.source.every(m)},u.prototype.average=function(m){if(this.count()===0)throw new Error("Sequence contains no elements");for(var E=0,S=0,M=this.source.length;S<M;++S)E+=m(this.source[S]);return E/this.source.length},u.prototype.count=function(m){return(m!==void 0?this.source.filter(m):this.source).length},u.prototype.elementAtOrDefault=function(m){if(m<0)throw new Error("Negative index is forbiden");return this.source[m]},u.prototype.firstOrDefault=function(m){return(m!==void 0?this.source.filter(m):this.source)[0]},u.prototype.groupBy=function(m,E){for(var S=this.asArray(),M=new _,T=0;T<S.length;++T){var C=m(S[T]),F=E!==void 0?E(S[T]):S[T];M.containsKey(C)||M.set(C,new t),M.get(C).push(F)}return M.asEnumerable()},u.prototype.lastOrDefault=function(m){return m!==void 0?(m=this.source.filter(m))[m.length-1]:this.source[this.source.length-1]},u.prototype.forEach=function(m){for(var E=0,S=this.source.length;E<S;++E)m(this.source[E],E)},u.prototype.sequenceEqual=function(m,E){if(E===void 0&&(E=i.strictEqualityComparer()),m instanceof u||m instanceof Array){var S=this.asArray(),M=m instanceof u?m.asArray():m;if(S.length!=M.length)return!1;for(var T=0;T<S.length;++T)if(!E(S[T],M[T]))return!1;return!0}return this.asEnumerable().sequenceEqual(m,E)};var a,y=u;function u(m){m===void 0&&(m=[]);var E=a.call(this)||this;return E.source=m,E}e.ArrayQueryable=y,c(f,g=y),f.prototype.copy=function(){return new f(this.toArray())},f.prototype.asReadOnly=function(){return this},f.prototype.clear=function(){this.source=[]},f.prototype.remove=function(m){for(var E=[],S=0,M=this.source.length;S<M;++S)this.source[S]!==m&&E.push(this.source[S]);this.source=E},f.prototype.removeAt=function(m){if(m<0||this.source[m]===void 0)throw new Error("Out of bounds");return this.source.splice(m,1)[0]},f.prototype.get=function(m){return this.source[m]},f.prototype.push=function(m){return this.source.push(m)},f.prototype.pushRange=function(m){return m instanceof Array||(m=m.toArray()),this.source.push.apply(this.source,m)},f.prototype.pushFront=function(m){return this.source.unshift(m)},f.prototype.pop=function(){return this.source.pop()},f.prototype.popFront=function(){return this.source.shift()},f.prototype.set=function(m,E){if(m<0)throw new Error("Out of bounds");this.source[m]=E},f.prototype.insert=function(m,E){if(m<0||m>this.source.length)throw new Error("Out of bounds");this.source.splice(m,0,E)},f.prototype.indexOf=function(m){return this.source.indexOf(m)};var g,t=f;function f(){return g!==null&&g.apply(this,arguments)||this}e.List=t,c(w,p=y),w.prototype.copy=function(){return new w(this.toArray())},w.prototype.clear=function(){this.source=[]},w.prototype.peek=function(){return this.source[this.source.length-1]},w.prototype.pop=function(){return this.source.pop()},w.prototype.push=function(m){return this.source.push(m)};var p,y=w;function w(){return p!==null&&p.apply(this,arguments)||this}e.Stack=y,c(v,s=o),v.fromArray=function(m,E,S){return new v(m.map(function(M){return{key:E(M),value:S(M)}}))},v.fromJsObject=function(m){return new v(new t(Object.getOwnPropertyNames(m)).select(function(E){return{key:E,value:m[E]}}).toArray())},v.prototype.copy=function(){return new v(this.toArray())},v.prototype.asReadOnly=function(){return this},v.prototype.asEnumerable=function(){return new d.ArrayEnumerable(this.toArray())},v.prototype.toArray=function(){var m=this;return this.getKeys().select(function(E){return{key:E,value:m.dictionary[E]}}).toArray()},v.prototype.clear=function(){this.dictionary={}},v.prototype.containsKey=function(m){return this.dictionary.hasOwnProperty(m)},v.prototype.containsValue=function(m){for(var E=this.getKeysFast(),S=0;S<E.length;++S)if(this.dictionary[E[S]]===m)return!0;return!1},v.prototype.getKeys=function(){var m=this,E=this.getKeysFast();return new t(E.map(function(S){return m.keyType==="number"?parseFloat(S):S}))},v.prototype.getKeysFast=function(){return Object.getOwnPropertyNames(this.dictionary)},v.prototype.getValues=function(){for(var m=this.getKeysFast(),E=new Array(m.length),S=0;S<m.length;++S)E[S]=this.dictionary[m[S]];return new t(E)},v.prototype.remove=function(m){this.containsKey(m)&&delete this.dictionary[m]},v.prototype.get=function(m){if(this.containsKey(m))return this.dictionary[m];throw new Error("Key doesn't exist: "+m)},v.prototype.set=function(m,E){if(this.containsKey(m))throw new Error("Key already exists: "+m);this.setOrUpdate(m,E)},v.prototype.setOrUpdate=function(m,E){this.keyType===void 0&&(this.keyType=typeof m),this.dictionary[m]=E};var s,_=v;function v(m){var E=s.call(this)||this;if(E.clear(),m!==void 0)for(var S=0;S<m.length;++S){var M=m[S];E.set(M.key,M.value)}return E}e.Dictionary=_},{"./Comparers":20,"./Enumerables":21}],20:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.strictEqualityComparer=function(){return function(l,c){return l===c}},e.combineComparers=function(l,c){return function(d,i){return l(d,i)||c(d,i)}},e.createComparer=function(l,c,d){return d!==void 0?function(i,o){return d(l(i),l(o))}:c?function(i,o){return i=l(i),o=l(o),i<o?-1:o<i?1:0}:function(i,o){return i=l(i),o=l(o),i<o?1:o<i?-1:0}}},{}],21:[function(a,h,e){"use strict";var l,c=this&&this.__extends||(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(b,A){b.__proto__=A}:function(b,A){for(var L in A)A.hasOwnProperty(L)&&(b[L]=A[L])}),function(b,A){function L(){this.constructor=b}l(b,A),b.prototype=A===null?Object.create(A):(L.prototype=A.prototype,new L)}),d=(Object.defineProperty(e,"__esModule",{value:!0}),a("./Iterators")),i=a("./Comparers"),o=a("./Collections"),n=a("./Utils"),a=(u.prototype.reset=function(){this.source.reset()},u.prototype.next=function(){return this.source.next()},u.prototype.asEnumerable=function(){return this},u.prototype.toArray=function(){var b=[];for(this.reset();this.next();)b.push(this.value());return b},u.prototype.toList=function(){return new o.List(this.toArray())},u.prototype.toDictionary=function(b,A){return o.Dictionary.fromArray(this.toArray(),b,A)},u.prototype.count=function(b){if(b!==void 0)return new y(this,b).count();var A=0;for(this.reset();this.next();)++A;return A>>>0},u.prototype.any=function(b){return b!==void 0?new y(this,b).any():(this.reset(),this.next())},u.prototype.all=function(b){for(this.reset();this.next();)if(!b(this.value()))return!1;return!0},u.prototype.reverse=function(){return new Ue(this.copy())},u.prototype.contains=function(b){return this.any(function(A){return A===b})},u.prototype.sequenceEqual=function(b,A){A===void 0&&(A=i.strictEqualityComparer());var L=b instanceof Array?new J(b):b.asEnumerable();for(this.reset(),L.reset();this.next();)if(!L.next()||!A(this.value(),L.value()))return!1;return!L.next()},u.prototype.where=function(b){return new y(this.copy(),b)},u.prototype.select=function(b){return new z(this.copy(),b)},u.prototype.selectMany=function(b){return this.select(function(A){return A=b(A),Array.isArray(A)?new J(A):A.asEnumerable()}).toArray().reduce(function(A,L){return new T(A,L)},t.empty())},u.prototype.skipWhile=function(b){return new _(this.copy(),b)},u.prototype.concat=function(b){for(var A=[],L=1;L<arguments.length;L++)A[L-1]=arguments[L];for(var D=function(je){return je instanceof Array?new J(je):je.asEnumerable()},N=new T(this.copy(),D(b).copy()),ee=0,Ne=A.length;ee<Ne;++ee)N=new T(N,D(A[ee]).copy());return N},u.prototype.defaultIfEmpty=function(b){return new St(this,b)},u.prototype.elementAt=function(b){if(b=this.elementAtOrDefault(b),b===void 0)throw new Error("Out of bounds");return b},u.prototype.elementAtOrDefault=function(b){if(b<0)throw new Error("Negative index is forbiden");this.reset();for(var A=-1;this.next()&&++A!==b;);if(A===b)return this.value()},u.prototype.except=function(b){return this.where(function(A){return!b.contains(A)})},u.prototype.first=function(b){if(b=b!==void 0?this.firstOrDefault(b):this.firstOrDefault(),b===void 0)throw new Error("Sequence contains no elements");return b},u.prototype.firstOrDefault=function(b){return b!==void 0?new y(this,b).firstOrDefault():(this.reset(),this.next()?this.value():void 0)},u.prototype.forEach=function(b){this.reset();for(var A=0;this.next();++A)b(this.value(),A)},u.prototype.groupBy=function(b,A){for(var L=this.toArray(),D=new o.Dictionary,N=0;N<L.length;++N){var ee=b(L[N]),Ne=A!==void 0?A(L[N]):L[N];D.containsKey(ee)||D.set(ee,new o.List),D.get(ee).push(Ne)}return D.asEnumerable()},u.prototype.last=function(b){if(b=b!==void 0?this.lastOrDefault(b):this.lastOrDefault(),b===void 0)throw new Error("Sequence contains no elements");return b},u.prototype.lastOrDefault=function(b){return b!==void 0?new y(this,b).lastOrDefault():((b=new Ue(this)).reset(),b.next()?b.value():void 0)},u.prototype.single=function(b){if(b=b!==void 0?this.singleOrDefault(b):this.singleOrDefault(),b===void 0)throw new Error("Sequence contains no elements");return b},u.prototype.singleOrDefault=function(b){if(b!==void 0)return new y(this,b).singleOrDefault();if(this.reset(),this.next()){if(b=this.value(),this.next())throw new Error("Sequence contains more than 1 element");return b}},u.prototype.distinct=function(b){return new R(this.copy(),b)},u.prototype.aggregate=function(b,A){var L=A;if(this.reset(),A===void 0){if(!this.next())throw new Error("Sequence contains no elements");L=b(L,this.value())}for(;this.next();)L=b(L,this.value());return L},u.prototype.min=function(b){return b!==void 0?new z(this,b).min():this.aggregate(function(A,L){return A!==void 0&&A<L?A:L})},u.prototype.orderBy=function(b,A){return new xe(this.copy(),i.createComparer(b,!0,A))},u.prototype.orderByDescending=function(b){return new xe(this.copy(),i.createComparer(b,!1,void 0))},u.prototype.max=function(b){return b!==void 0?new z(this,b).max():this.aggregate(function(A,L){return A!==void 0&&L<A?A:L})},u.prototype.sum=function(b){return this.aggregate(function(A,L){return A+b(L)},0)},u.prototype.average=function(b){if(this.reset(),!this.next())throw new Error("Sequence contains no elements");for(var A=0,L=0;A+=b(this.value()),++L,this.next(););return A/L},u.prototype.skip=function(b){return new U(this.copy(),b,void 0)},u.prototype.take=function(b){return new U(this.copy(),void 0,b)},u.prototype.takeWhile=function(b){return new E(this.copy(),b)},u.prototype.union=function(b){return new R(this.concat(b))},u.prototype.zip=function(b,A){return b=b instanceof Array?new J(b):b.asEnumerable(),new Ot(this,b,A)},u);function u(b){this.source=b}e.EnumerableBase=a,c(f,g=a),f.fromSource=function(b){return new(b instanceof Array?J:f)(b)},f.empty=function(){return f.fromSource([])},f.range=function(b,A,L){if(L===void 0&&(L=!0),A<0)throw new Error("Count must be >= 0");var D=new Array(A);if(L)for(var N=0;N<A;D[N]=b+N++);else for(N=0;N<A;D[N]=b-N++);return new J(D)},f.repeat=function(b,A){if(A<0)throw new Error("Count must me >= 0");for(var L=new Array(A),D=0;D<A;++D)L[D]=b;return new J(L)},f.prototype.copy=function(){return new f(this.source.copy())},f.prototype.value=function(){return this.currentValue.isValid()||(this.currentValue.value=this.source.value()),this.currentValue.value},f.prototype.reset=function(){g.prototype.reset.call(this),this.currentValue.invalidate()},f.prototype.next=function(){return this.currentValue.invalidate(),g.prototype.next.call(this)};var g,t=f;function f(b){return b=g.call(this,b)||this,b.currentValue=new n.Cached,b}e.Enumerable=t,c(w,p=t),w.prototype.copy=function(){return new w(this.source.copy(),this._predicate)},w.prototype.next=function(){for(var b;(b=p.prototype.next.call(this))&&!this._predicate(this.value()););return b};var p,y=w;function w(b,A){return b=p.call(this,b)||this,b._predicate=A,b}e.ConditionalEnumerable=y,c(v,s=t),v.prototype.reset=function(){s.prototype.reset.call(this),this._shouldContinueChecking=!0},v.prototype.copy=function(){return new v(this.source.copy(),this._predicate)},v.prototype.next=function(){if(!this._shouldContinueChecking)return s.prototype.next.call(this);for(var b;(b=s.prototype.next.call(this))&&this._predicate(this.value()););return this._shouldContinueChecking=!1,b};var s,_=v;function v(b,A){return b=s.call(this,b)||this,b._predicate=A,b._shouldContinueChecking=!0,b}e.SkipWhileEnumerable=_,c(S,m=t),S.prototype.reset=function(){m.prototype.reset.call(this),this._shouldContinueTaking=!0},S.prototype.copy=function(){return new S(this.source.copy(),this._predicate)},S.prototype.next=function(){return!!(m.prototype.next.call(this)&&this._shouldContinueTaking&&this._predicate(this.value()))||(this._shouldContinueTaking=!1)};var m,E=S;function S(b,A){return b=m.call(this,b)||this,b._predicate=A,b._shouldContinueTaking=!0,b}e.TakeWhileEnumerable=E,c(C,M=t),C.prototype.copy=function(){return new C(this.source.copy(),this._otherSource.copy())},C.prototype.reset=function(){this.source.reset(),this._otherSource.reset(),this._isFirstSourceFinished=!1,this.currentValue.invalidate()},C.prototype.next=function(){this.currentValue.invalidate();var b=(this._isFirstSourceFinished?this._otherSource:this.source).next();return b||this._isFirstSourceFinished?b:(this._isFirstSourceFinished=!0,this.next())},C.prototype.value=function(){return this.currentValue.isValid()||(this.currentValue.value=(this._isFirstSourceFinished?this._otherSource:this.source).value()),this.currentValue.value};var M,T=C;function C(b,A){return b=M.call(this,b)||this,b._otherSource=A,b._isFirstSourceFinished=!1,b}e.ConcatEnumerable=T,c(k,F=t),k.prototype.copy=function(){return new k(this.source.copy(),this._keySelector)},k.prototype.reset=function(){F.prototype.reset.call(this),this._seen={primitive:{number:{},string:{},boolean:{}},complex:[]}},k.prototype.isUnique=function(A){var A=this._keySelector!==void 0?this._keySelector(A):A,L=typeof A;return L in this._seen.primitive?!this._seen.primitive[L].hasOwnProperty(A)&&(this._seen.primitive[L][A]=!0):this._seen.complex.indexOf(A)===-1&&-1<this._seen.complex.push(A)},k.prototype.next=function(){for(var b;(b=F.prototype.next.call(this))&&!this.isUnique(this.value()););return b};var F,R=k;function k(b,A){return b=F.call(this,b)||this,b._keySelector=A,b._seen={primitive:{number:{},string:{},boolean:{}},complex:[]},b}e.UniqueEnumerable=R,c(G,W=t),G.prototype.copy=function(){return new G(this.source.copy(),this._start,this._count)},G.prototype.reset=function(){W.prototype.reset.call(this),this._currentIndex=-1},G.prototype.isValidIndex=function(){var b=this._start!==void 0?this._start:0,A=this._count!==void 0?b+this._count:void 0;return this._currentIndex>=b&&(A===void 0||this._currentIndex<A)},G.prototype.performSkip=function(){for(var b=this._start!==void 0?this._start:0,A=!0;A&&this._currentIndex+1<b;)A=W.prototype.next.call(this),++this._currentIndex;return A},G.prototype.next=function(){return!(this._currentIndex<0&&!this.performSkip())&&(++this._currentIndex,W.prototype.next.call(this))&&this.isValidIndex()},G.prototype.value=function(){if(this.isValidIndex())return W.prototype.value.call(this);throw new Error("Out of bounds")};var W,U=G;function G(b,A,L){var D=this;if(A!==void 0&&A<0||L!==void 0&&L<0)throw new Error("Incorrect parameters");return(D=W.call(this,b)||this)._start=A,D._count=L,D._currentIndex=-1,D}e.RangeEnumerable=U,c(H,B=a),H.prototype.copy=function(){return new H(this.source.copy(),this._transform)},H.prototype.value=function(){return this._currentValue.isValid()||(this._currentValue.value=this._transform(this.source.value())),this._currentValue.value},H.prototype.reset=function(){B.prototype.reset.call(this),this._currentValue.invalidate()},H.prototype.next=function(){return this._currentValue.invalidate(),B.prototype.next.call(this)};var B,z=H;function H(b,A){return b=B.call(this,b)||this,b._transform=A,b._currentValue=new n.Cached,b}e.TransformEnumerable=z,c(j,_t=t),j.prototype.copy=function(){return new j(this.source.copy())},j.prototype.reset=function(){this._elements.invalidate(),this._currentIndex=-1},j.prototype.isValidIndex=function(){return 0<=this._currentIndex&&this._currentIndex<this._elements.value.length},j.prototype.all=function(b){return this.source.all(b)},j.prototype.any=function(b){return b!==void 0?this.source.any(b):this.source.any()},j.prototype.average=function(b){return this.source.average(b)},j.prototype.count=function(b){return b!==void 0?this.source.count(b):this.source.count()},j.prototype.max=function(b){return b!==void 0?this.source.max(b):this.source.max()},j.prototype.min=function(b){return b!==void 0?this.source.min(b):this.source.min()},j.prototype.reverse=function(){return this.source.copy()},j.prototype.sum=function(b){return this.source.sum(b)},j.prototype.next=function(){return this._elements.isValid()||(this._elements.value=this.source.toArray()),++this._currentIndex,this.isValidIndex()},j.prototype.value=function(){if(this._elements.isValid()&&this.isValidIndex())return this._elements.value[this._elements.value.length-1-this._currentIndex];throw new Error("Out of bounds")};var _t,Ue=j;function j(b){return b=_t.call(this,b)||this,b._elements=new n.Cached,b._currentIndex=-1,b}e.ReverseEnumerable=Ue,c(x,bt=a),x.prototype.isValidIndex=function(){return 0<=this._currentIndex&&this._currentIndex<this._elements.value.length},x.prototype.orderBy=function(b,A){return new x(this.source.copy(),i.createComparer(b,!0,A))},x.prototype.orderByDescending=function(b){return new x(this.source.copy(),i.createComparer(b,!1,void 0))},x.prototype.thenBy=function(b,A){return new x(this.source.copy(),i.combineComparers(this._comparer,i.createComparer(b,!0,A)))},x.prototype.thenByDescending=function(b){return new x(this.source.copy(),i.combineComparers(this._comparer,i.createComparer(b,!1,void 0)))},x.prototype.reset=function(){this._elements.invalidate(),this._currentIndex=-1},x.prototype.copy=function(){return new x(this.source.copy(),this._comparer)},x.prototype.value=function(){if(this._elements.isValid()&&this.isValidIndex())return this._elements.value[this._currentIndex];throw new Error("Out of bounds")},x.prototype.next=function(){return this._elements.isValid()||(this._elements.value=this.toArray()),++this._currentIndex,this.isValidIndex()},x.prototype.toArray=function(){return this.source.toArray().sort(this._comparer)};var bt,xe=x;function x(b,A){return b=bt.call(this,b)||this,b._comparer=A,b._elements=new n.Cached,b._currentIndex=-1,b}e.OrderedEnumerable=xe,c(V,Et=t),V.prototype.toArray=function(){return this.list.toArray()},V.prototype.aggregate=function(b,A){return A!==void 0?this.list.aggregate(b,A):this.list.aggregate(b)},V.prototype.any=function(b){return b!==void 0?this.list.any(b):this.list.any()},V.prototype.all=function(b){return this.list.all(b)},V.prototype.average=function(b){return this.list.average(b)},V.prototype.count=function(b){return b!==void 0?this.list.count(b):this.list.count()},V.prototype.copy=function(){return new V(this.list.asArray())},V.prototype.elementAtOrDefault=function(b){return this.list.elementAtOrDefault(b)},V.prototype.firstOrDefault=function(b){return b!==void 0?this.list.firstOrDefault(b):this.list.firstOrDefault()},V.prototype.lastOrDefault=function(b){return b!==void 0?this.list.lastOrDefault(b):this.list.lastOrDefault()};var Et,J=V;function V(b){var A=Et.call(this,new d.ArrayIterator(b))||this;return A.list=new o.List(b),A}e.ArrayEnumerable=J,c(Z,Ee=a),Z.prototype.copy=function(){return new Z(this.source.copy(),this._defaultValue)},Z.prototype.value=function(){return this._mustUseDefaultValue?this._defaultValue:this.source.value()},Z.prototype.next=function(){var b=Ee.prototype.next.call(this);return this._mustUseDefaultValue=this._mustUseDefaultValue===void 0&&!b,this._mustUseDefaultValue||b},Z.prototype.reset=function(){Ee.prototype.reset.call(this),this._mustUseDefaultValue=void 0};var Ee,St=Z;function Z(b,A){return b=Ee.call(this,b)||this,b._mustUseDefaultValue=void 0,b._defaultValue=A,b}e.DefaultIfEmptyEnumerable=St,c(X,Se=a),X.prototype.copy=function(){return new X(this.source.copy(),this._otherSource.copy(),this._selector)},X.prototype.value=function(){return this._currentValue.isValid()||(this._currentValue.value=this._selector(this.source.value(),this._otherSource.value())),this._currentValue.value},X.prototype.reset=function(){Se.prototype.reset.call(this),this._otherSource.reset(),this._isOneOfTheSourcesFinished=!1,this._currentValue.invalidate()},X.prototype.next=function(){return this._currentValue.invalidate(),this._isOneOfTheSourcesFinished||(this._isOneOfTheSourcesFinished=!Se.prototype.next.call(this)||!this._otherSource.next()),!this._isOneOfTheSourcesFinished};var Se,Ot=X;function X(b,A,L){return b=Se.call(this,b)||this,b._otherSource=A,b._isOneOfTheSourcesFinished=!1,b._currentValue=new n.Cached,b._selector=L,b}e.ZippedEnumerable=Ot},{"./Collections":19,"./Comparers":20,"./Iterators":22,"./Utils":24}],22:[function(r,h,e){"use strict";function l(c){this.source=c,this.reset()}Object.defineProperty(e,"__esModule",{value:!0}),l.prototype.copy=function(){return new l(this.source)},l.prototype.reset=function(){this._index=-1},l.prototype.isValidIndex=function(){return 0<=this._index&&this._index<this.source.length},l.prototype.next=function(){return++this._index,this.isValidIndex()},l.prototype.value=function(){if(this.isValidIndex())return this.source[this._index];throw new Error("Out of bounds")},e.ArrayIterator=l},{}],23:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=r("./Enumerables"),l=(e.Enumerable=l.Enumerable,r("./Iterators")),l=(e.ArrayIterator=l.ArrayIterator,r("./Collections")),l=(e.List=l.List,e.Dictionary=l.Dictionary,e.Stack=l.Stack,r("./Comparers"));e.strictEqualityComparer=l.strictEqualityComparer},{"./Collections":19,"./Comparers":20,"./Enumerables":21,"./Iterators":22}],24:[function(r,h,e){"use strict";function l(){this._isValid=!1}Object.defineProperty(e,"__esModule",{value:!0}),l.prototype.invalidate=function(){this._isValid=!1},l.prototype.isValid=function(){return this._isValid},Object.defineProperty(l.prototype,"value",{get:function(){if(this._isValid)return this._value;throw new Error("Trying to get value of invalid cache")},set:function(c){this._value=c,this._isValid=!0},enumerable:!0,configurable:!0}),e.Cached=l},{}],25:[function(r,h,e){"use strict";var l=this&&this.__spreadArray||function(t,f,p){if(p||arguments.length===2)for(var y,w=0,s=f.length;w<s;w++)!y&&w in f||((y=y||Array.prototype.slice.call(f,0,w))[w]=f[w]);return t.concat(y||Array.prototype.slice.call(f))},c=(Object.defineProperty(e,"__esModule",{value:!0}),e.bf=e.credits=e.getPageAdUnit=e.getCachedRegistries=e.getSlotDetails=e.setModuleLoaded=e.isModuleLoaded=e.setModuleReady=e.isModuleReady=e.moduleStatuses=e.getRocketeerSlots=e.getRegisteredModules=e.getQueuedSlots=e.getPageSlots=e.getExcludedSlotIds=e.getDispatchedSlots=e.getBuiltSlots=e.version=e.registerModule=e.__VERSION__=e.registry=e.setOptions=e.addEvent=e.dispatchQueue=e.enableLazyLoad=e.setBulkTargeting=e.clearSlots=e.removeSlotLevelTarget=e.addSlotLevelTarget=e.removePageLevelTarget=e.addPageLevelTarget=e.queueRegistry=e.refresh=e.destroySlots=e.configure=void 0,r("./presets.js"),r("@turnercode/digital-ads-utilities/dist")),d=r("./processors"),i=r("./system"),o=r("linq-collections"),n=r("./system/MissionControl"),a=r("./version.json"),u=(g.prototype.fireAdFuelCreated=function(){var t=this,f=1500,p=setInterval(function(){if(document.readyState==="interactive"||document.readyState==="complete"){try{t.logger.log("Dispatching AdFuelCreated..."),document.dispatchEvent(new CustomEvent("AdFuelCreated",{detail:{AdFuel:window.AdFuel}}))}catch(y){t.logger.error("Error dispatching AdFuelCreated",y)}clearInterval(p)}else f<1&&clearInterval(p);f--},1)},g.createInstance=function(){this._instance=new g,window.AdFuel=this._instance,(t=this._instance.logger)!=null&&t.warn("New AdFuel instance created.",this._instance.adFuelOptions);var t=Object.assign(i.BaseAdFuelOptions,(t=JSON.parse(JSON.stringify(this._instance.adFuelOptions)))!=null?t:{});this._instance.adFuelOptions=t,this.processLoadedModules()},g.processLoadedModules=function(){if(window.AdFuelModules){for(var t=0,f=window.AdFuelModules;t<f.length;t++){var p=f[t];this._instance.perf.addMark("Registering Module - ".concat(p.MODULE_NAME)),this._instance.registerModule(p)}window.AdFuelModules=void 0}},Object.defineProperty(g,"instance",{get:function(){var t,f=this;return(t=window.WM)!=null&&t.UserConsent&&window.WM.UserConsent.isReady()?window.WM.UserConsent.getRegion()!=="ccpa"&&window.WM.UserConsent.getRegion()==="gdpr"?this._instance||(window.WM.UserConsent.isOneTrustLoaded()?window.WM.UserConsent.getUserConsentAdvertisingState()?this.createInstance():console.warn("Unable to create new instance of AdFuel due to consent restrictions."):(document.addEventListener("oneTrustLoaded",function(){var p;(p=(p=window.WM)==null?void 0:p.UserConsent)!=null&&p.getUserConsentAdvertisingState()?f.createInstance():console.warn("Unable to create new instance of AdFuel due to consent restrictions.")}),document.addEventListener("oneTrustFailed",function(){console.warn("Unable to create new instance of AdFuel due to OneTrust load failure.")}),document.addEventListener("oneTrustBlocked",function(){console.warn("Unable to create new instance of AdFuel due to OneTrust load blocking.")}))):this._instance||this.createInstance():(t=window.WM)!=null&&t.UserConsent||this._instance||(console.warn("No User Consent.  Assuming consent is granted.  User Location switching will be unavailble."),this.createInstance()),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"missionControl",{get:function(){return this._missionControl},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"moduleManager",{get:function(){return this._moduleManager},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"adFuelOptions",{get:function(){var t;return(t=(t=window.AdFuelOptions)==null?void 0:t.ADFUEL)!=null?t:i.BaseAdFuelOptions},set:function(t){window.AdFuelOptions?window.AdFuelOptions.ADFUEL=t:window.AdFuelOptions={ADFUEL:t,USER_CONSENT:{ENABLED:!0}}},enumerable:!1,configurable:!0}),g.prototype.configure=function(t){var f=this;return typeof t=="string"?fetch(t).then(function(p){f.ingestOptions(p.json())}):this.ingestOptions(t),this},g.prototype.ingestOptions=function(t){if("ADFUEL"in t)for(var f in window.AdFuelOptions||(window.AdFuelOptions={ADFUEL:{},USER_CONSENT:{ENABLED:!0}}),t)window.AdFuelOptions&&f in window.AdFuelOptions?Object.assign(window.AdFuelOptions[f],t[f]):window.AdFuelOptions[f]=t[f];else this.adFuelOptions=Object.assign(this.adFuelOptions,t)},Object.defineProperty(g.prototype,"registryOptions",{get:function(){return this._registryOptions},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"perf",{get:function(){return this._perf},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"ver",{get:function(){return this._version.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"fetchedRegistries",{get:function(){return this._registryLoader.fetchedRegistries},enumerable:!1,configurable:!0}),g.prototype.lastProcessed=function(){var t;return 0<this.processedData.count()?(t=this.processedData.max(function(f){return f.value.timestamp}),this.processedData.first(function(f){return f.value.timestamp===t}).value):new i.GptProcessData},g.prototype.undispatched=function(){return 0<this.processedData.count()?this.processedData.select(function(t){return t.value}).where(function(t){return!t.dispatched}).where(function(t){var f=!1;return t.wrappedSlots.forEach(function(p){f=f||!!p.gSlot}),f}).toArray():[]},g.prototype.isModuleReady=function(t){return(t=this.registeredModules.get(t).isReady)!=null&&t},g.prototype.setModuleReady=function(t){this.logger.info("Module ".concat(t," is reporting ready.")),this.perf.addMark("Module ".concat(t," is ready.")),this.registeredModules.containsKey(t)?this.registeredModules.get(t).isReady=!0:this.registeredModules.setOrUpdate(t,{moduleName:t,isLoaded:!0,isReady:!0,unWrappedModule:void 0}),this._moduleManager.areAllModulesReady&&this._moduleManager.areAllExpectedModulesLoaded&&this._missionControl.setReady({readyId:"modules"})},g.prototype.isModuleLoaded=function(t){return(t=this.registeredModules.get(t).isLoaded)!=null&&t},g.prototype.setModuleLoaded=function(t){this.logger.log("Module ".concat(t," is reporting loaded.")),this.perf.addMark("Module ".concat(t," is loaded.")),this.registeredModules.containsKey(t)?this.registeredModules.get(t).isLoaded=!0:this.registeredModules.setOrUpdate(t,{moduleName:t,isLoaded:!1,isReady:!1,unWrappedModule:void 0})},g.prototype.queueRegistry=function(t,y){y===void 0&&(y={dispatch:this.adFuelOptions.AUTO_DISPATCH||!0}),(p=this.logger)!=null&&p.info("[queueRegistry] Queueing registry...",t,y),this.perf.addMark("Queueing Registry START"),this._initialRequestComplete=0<this.processedData.count(),y.slots&&(y.slots=Array.isArray(y.slots)?y.slots:[y.slots]),y.exclude&&(y.exclude=Array.isArray(y.exclude)?y.exclude:[y.exclude]),this._registryOptions=y,p=Array.isArray(t)?{registry:t}:t;var p,y=Object.assign({},this.adFuelOptions,y);return p.registry?this._registryLoader.loadRegistryFromJson(p.registry,y):this._registryLoader.loadRegistryFromUrl(t,y),this},g.prototype.flushCmdQueue=function(){for(this.logger.log("Flushing command",this._cmdQueue.length);0<this._cmdQueue.length;){var t=this._cmdQueue.shift();t&&(t(),this.logger.log("Command flushed."))}},g.prototype.dispatchQueue=function(t){var f=this;return t===void 0&&(t={}),this.undispatched().forEach(function(p){f.logger.log("[dispatchQueue] Dispatching Data: ",p),f._requestProcessor.dispatch(p)}),this},g.prototype.destroySlots=function(t){var f,p,y=this,w=(t?Array.isArray(t)||(t=[t]):t=[],this.logger.log("[ADFUEL] START ---------- destroySlots::slotsToDestroy:",t),new Set),s=[],_=[];if(0<t.length){if(this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::Searching registries for matching candidates..."),this.processedData.getValues().forEach(function(v){s=Array.from(new Set(s.concat(v.wrappedSlots.where(function(m){return t!==void 0&&(t==null?void 0:t.includes(m.slotId))&&m.isBuilt}).toArray())))}),0<s.length)try{this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - RegistrySlotWrappers...",s),_=((p=(f=window.googletag)==null?void 0:f.pubads().getSlots())==null?void 0:p.map(function(v){if(y.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - Googletag Slot:",v.getSlotElementId()),t!=null&&t.includes(v.getSlotElementId()))return v}).filter(function(v){return v!=null}))||[],this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - GoogleTag Candidates",_),_.forEach(function(v){v&&w.add(v)})}catch(v){this.logger.error("There was an error in DestroySlots.",v)}else this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - registrySlotWrappers array was empty.");this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::FINAL CANDIDATES:",w)}else this.logger.log("[ADFUEL] ---------- destroySlots[ALL]::Getting all built slots..."),this.processedData.getValues().forEach(function(v){s=s.concat(v.wrappedSlots.where(function(m){return m.isBuilt}).toArray())}),this.logger.log("[ADFUEL] ---------- destroySlots[ALL]::Registry Slot Wrappers:",s),(typeof((f=window.googletag)==null?void 0:f.pubads)=="function"?(p=window.googletag)==null?void 0:p.pubads().getSlots():[]).forEach(function(v){w.add(v)}),this.logger.log("[ADFUEL] ---------- destroySlots[ALL]::CANDIDATES:",w);return 0<t.length&&s.length!==t.length?this.logger.warn("Slot numbers do not match. Not destroying slots: ",s,t):(this.logger.log("[ADFUEL] ---------- destroySlots::Matching Registry Slot Wrappers: ",s),s.forEach(function(v){y.logger.log("[ADFUEL] ---------- destroySlots::Clearing GSlot from Wrapper: ",v),y.perf.addMark("Destroying Slot ".concat(v.slotId)),v.gSlot=void 0}),this.logger.log("[ADFUEL] ---------- destroySlots::Updated Registry Slot Wrappers: ",{registrySlotWrappers:s}),this.logger.log("[ADFUEL] ---------- destroySlots::handoffToSlotProcessor:",w),this._slotProcessor.destroySlots(Array.from(w)),Array.from(document.getElementsByClassName("adfuel-rendered")).forEach(function(v){(t!=null&&t.includes(v.id)||(t==null?void 0:t.length)===0)&&(y.logger.log("[ADFUEL] ---------- DestroySlots::Removing Class from Element:",v),v.classList.remove("adfuel-rendered"))})),this},g.prototype.addPageLevelTarget=function(t,f){return f=Array.isArray(f)?f:[f],this._targetProcessor.addPageLevelTargets(t,f),this.logger.log("Adding page level target ".concat(t)),this.perf.addMark("Adding Page-Level Target - ".concat(t)),this},g.prototype.removePageLevelTarget=function(t,f){var p=[];return f&&(p=Array.isArray(f)?f:[f]),this._targetProcessor.removePageLevelTargets(t,p),this.perf.addMark("Removing Page-Level Target - ".concat(t)),this},g.prototype.addSlotLevelTarget=function(t,f,p){var y=Array.isArray(p)?p:[p];return this._targetProcessor.addSlotLevelTargets(t,f,y),this.logger.log("Adding slot-level target slotId: ".concat(t,", targetKey: ").concat(f),p),this.perf.addMark("Adding Slot-Level Target - ".concat(f)),this},g.prototype.removeSlotLevelTarget=function(t,f,p){var y=[];return p&&(y=Array.isArray(p)?p:[p]),this._targetProcessor.removeSlotLevelTargets(t,f,y),this.perf.addMark("Removing Slot-Level Target - ".concat(f)),this},g.prototype.registerModule=function(t){return this.logger.info("Registering module: ".concat(t.MODULE_NAME,".")),this.perf.addMark("Registering Module - ".concat(t.MODULE_NAME)),this._moduleManager.registerModule(t),this},g.prototype.moduleStatuses=function(){var t=[];return this.registeredModules.forEach(function(f){t.push({name:f.value.moduleName,isReady:f.value.isReady,isLoaded:f.value.isLoaded})}),t},g.prototype.getSlotsForRefresh=function(t){var f,p=[];if(0<(t=t===void 0?[]:t).length)for(var y=this,w=0,s=t;w<s.length;w++)(function(v){var m=(f=y.processedData.firstOrDefault(function(E){return E.value.wrappedSlots.any(function(S){return v.includes(S.slotId)&&S.isBuilt})}))==null?void 0:f.value.wrappedSlots.firstOrDefault(function(E){return v.includes(E.slotId)&&E.isBuilt});m&&p.push(m)})(s[w]);else{var _=[];this.processedData.where(function(v){return v.value.wrappedSlots.any(function(m){return m.isBuilt})}).forEach(function(v){_.concat(v.value.wrappedSlots.where(function(m){return m.isBuilt}).toArray())}),_&&p.concat(_)}return p},g.prototype.refresh=function(t,f){var p=this,y=(f===void 0&&(f=0),this.moduleManager.callPreRefresh(this.lastProcessed().wrappedSlots),new o.List),y=t&&!["ALL","all","*","All"].includes(t)?(Array.isArray(t)||(t=[t]),new o.List(this.getSlotsForRefresh(t))):new o.List(this.lastProcessed().wrappedSlots.toArray());return this.lastProcessed().wrappedSlots?(t=function(){var w;0<y.count()&&0<f?(w=setInterval(function(){p._requestProcessor.refresh(y),p.moduleManager.callPostRefresh(y)},1e3*f),y.forEach(function(s){p._refreshers.containsKey(s.slotId)&&clearInterval(p._refreshers.get(s.slotId)),p._refreshers.setOrUpdate(s.slotId,w)})):0<y.count()&&f===0?p._requestProcessor.refresh(y):p.logger.warn("There is nothing to refresh.",y)},this._initialRequestComplete?t():this._waitingFunctions.push(t)):(t=this.logger)!=null&&t.warn("There are no slots defined. Has the registry been loaded?"),this},g.prototype.waitFor=function(t){return this.missionControl.register({readyId:t}),this},g.prototype.makeReady=function(t){return this.missionControl.setReady({readyId:t}),this},g.prototype.version=function(){return this._version},g.prototype.getBuiltSlots=function(){var t=[];return this.processedData.forEach(function(f){f.value.wrappedSlots.any(function(p){return p.isBuilt})&&t.push({timeStamp:f.value.timestamp,slots:f.value.wrappedSlots.where(function(p){return p.isBuilt}).toArray()})}),t},g.prototype.getDispatchedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(t){return t.hasBeenDisplayed}).toArray()},g.prototype.getExcludedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(t){return t.isExcluded}).toArray()},g.prototype.getPageSlots=function(){return this.lastProcessed().wrappedSlots.where(function(t){return t.isBuilt}).select(function(t){return t.gSlot}).toArray()},g.prototype.getQueuedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(t){return!t.isBuilt}).toArray()},g.prototype.getRegisteredModules=function(){return this.registeredModules.select(function(t){return t.value.unWrappedModule}).toArray()},g.prototype.getRocketeerSlots=function(){return this._registry.slots},g.prototype.getPageAdUnit=function(){return this._pageAdUnit},Object.defineProperty(g.prototype,"pageAdUnit",{get:function(){return this._pageAdUnit},set:function(t){this._pageAdUnit=t},enumerable:!1,configurable:!0}),g.prototype.clearSlots=function(t){return this._slotProcessor.clearSlots(t),this},g.prototype.setBulkTargeting=function(t){return this._targetProcessor.setBulkTargeting(t),this},g.prototype.enableLazyLoad=function(t){return t.fetch=t.fetch||500,t.render=t.render||200,t.scaling=t.scaling||2,this.perf.addMark("Enabling Lazy Load"),this.logger.log("#################### Enabling Lazy Load"),this._googleApi.enableLazyLoad(t),this},g.prototype.getSlotDetails=function(t){var f,p=this.lastProcessed().wrappedSlots.firstOrDefault(function(y){return y.slotId===t});if(p)return{adUnitPath:(f=(f=p.gSlot)==null?void 0:f.getAdUnitPath())!=null?f:"UNKNOWN",slotTargeting:p.targeting,programmatic:p.programmatic,response:(f=p.gSlot)==null?void 0:f.getResponseInformation()};this.logger.log("Couldn't find details for slot: ".concat(t))},g.prototype.getCachedRegistries=function(){var t=new Map;return this.processedData.forEach(function(f){t.set(f.value.url,l([f.value.registry],f.value.registry.slots,!0))}),t},g);function g(){var t=this;this._version=new c.Version(a.major,a.minor,a.revision,a.family),this._googleApi=new i.GoogleApi(this),this._missionControl=new n.MissionControl(this,this._googleApi),this._requestProcessor=new d.RequestProcessor(this,void 0,this._googleApi),this._moduleManager=new i.ModuleManager(this),this._targetProcessor=new d.TargetProcessor(this,this._googleApi,this._requestProcessor),this._slotProcessor=new d.SlotProcessor(this,this._targetProcessor,this._googleApi),this._queueDispatched=!1,this._pageAdUnit="",this._initialRequestComplete=!1,this._waitingFunctions=[],this._refreshers=new o.Dictionary,this.processedData=new o.Dictionary,this._cmdQueue=[],this.registeredModules=new o.Dictionary,this._logger=new c.Logger("AdFuel TS",this._version.toString(),"adfuel","color: #4f86f7; padding: 2px"),this._perf=new c.Performance("ADFUEL TS"),this._gptScriptLoader=new i.GptScriptLoader(this.missionControl,this._logger),this._registryLoader=new i.RegistryLoader(this),this._overlayLoader=new i.OverlayLoader(this),this._gptScriptLoader.loadScript().then(function(){t._googleApi.flushCmdQueue()}),this._missionControl.firstProcessor=this._slotProcessor,this._perf.addMark("AdFuel Load END"),this._perf.addMeasure("AdFuel Load"),this.fireAdFuelCreated(),this._overlayLoader.startConsoleTool(),document.addEventListener("AdFuelRequestComplete",function(){t._initialRequestComplete=!0,t._waitingFunctions.forEach(function(f){f()}),t._waitingFunctions=[]}),window.addEventListener("load",function(){var f,p;t.logger.log("[window.load] Load fired:  AUTO_DISPATCH: ".concat(t.adFuelOptions.AUTO_DISPATCH," queueDispatched: ").concat(t._queueDispatched)),t.adFuelOptions.AUTO_DISPATCH||t._queueDispatched?t.adFuelOptions.AUTO_DISPATCH&&(t.dispatchQueue(),f=1,p=setInterval(function(){0<t.undispatched().length&&(t.logger.warn("[window.load] AdFuel is configured to automatically dispatch the queue on window.load but ".concat(100*f," milliseconds later and there are slots that still are not dispatched.")),t.logger.warn("[window.load] Undispatched: ",t.undispatched()),t.dispatchQueue()),5e3<100*f&&clearInterval(p),f++},100)):t.logger.error("[window.load] AdFuel is not configured to automatically dispatch the queue and the user's code never called AdFuel.dispatchQueue().")}),this.perf.addMark("AdFuel Created")}window.AdFuel=u.instance,e.configure=function(t){return u.instance.configure(t)},e.destroySlots=function(t){return u.instance.destroySlots(t=t===void 0?[]:t)},e.refresh=function(t,f){return u.instance.refresh(t,f)},e.queueRegistry=function(t,f){return u.instance.queueRegistry(t,f)},e.addPageLevelTarget=function(t,f){return u.instance.addPageLevelTarget(t,f)},e.removePageLevelTarget=function(t,f){return u.instance.removePageLevelTarget(t,f)},e.addSlotLevelTarget=function(t,f,p){return u.instance.addSlotLevelTarget(t,f,p)},e.removeSlotLevelTarget=function(t,f,p){return u.instance.removeSlotLevelTarget(t,f,p)},e.clearSlots=function(t){return u.instance.clearSlots(t=t===void 0?[]:t)},e.setBulkTargeting=function(t){return u.instance.setBulkTargeting(t)},e.enableLazyLoad=function(t){return u.instance.enableLazyLoad(t)},e.dispatchQueue=function(t){return u.instance.dispatchQueue(t)},e.addEvent=function(t,f,p){var y="background: red;color:white;",w="background: inherit;color:inherit;";console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",y,w),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",y,w),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",y,w),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",y,w),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",y,w),console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",y,w),console.error("%c *** use addEventListener() instead.                         *** %c",y,w),console.error("%c *** No event was added                                      *** %c",y,w)},e.setOptions=function(){var t="background: red;color:white;",f="background: inherit;color:inherit;";console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",t,f),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",t,f),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",t,f),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",t,f),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",t,f),console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",t,f),console.error("%c *** No options were set                                     *** %c",t,f)},e.registry={push:function(t,f){console.warn("%c *** This functionality will be removed in future releases. Instead of 'registry.push()', please use AdFuel.queueRegistry() *** %c","background: orange;color:white;","background: inherit;color:inherit;"),u.instance.queueRegistry(t,f)}},e.__VERSION__=function(){return u.instance.version().toString()},e.registerModule=function(t){return u.instance.registerModule(t)},e.version=function(){return u.instance.version()},e.getBuiltSlots=function(){return u.instance.getBuiltSlots()},e.getDispatchedSlots=function(){return u.instance.getDispatchedSlots()},e.getExcludedSlotIds=function(){return u.instance.getExcludedSlots()},e.getPageSlots=function(){return u.instance.getPageSlots()},e.getQueuedSlots=function(){return u.instance.getQueuedSlots()},e.getRegisteredModules=function(){return u.instance.getRegisteredModules()},e.getRocketeerSlots=function(){return u.instance.getRocketeerSlots()},e.moduleStatuses=function(){return u.instance.moduleStatuses()},e.isModuleReady=function(t){return u.instance.isModuleReady(t)},e.setModuleReady=function(t){u.instance.setModuleReady(t)},e.isModuleLoaded=function(t){return u.instance.isModuleLoaded(t)},e.setModuleLoaded=function(t){u.instance.setModuleLoaded(t)},e.getSlotDetails=function(t){return u.instance.getSlotDetails(t)},e.getCachedRegistries=function(){return u.instance.getCachedRegistries()},e.getPageAdUnit=function(){return u.instance.getPageAdUnit()},e.credits=function(){var t="\n\n          \u2591\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557\u2591\u2591\u2591\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2557\n          \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u255A\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\n          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2551\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u255A\u2588\u2588\u2588\u2588\u2588\u2557\u2591\n          \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u255D\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u255D\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u255A\u2550\u2550\u2550\u2588\u2588\u2557\n          \u2588\u2588\u2551\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u255A\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557\u2591\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\n          \u255A\u2550\u255D\u2591\u2591\u255A\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u255D\u2591\u255A\u2550\u255D\u2591\u2591\u2591\u2591\u2591\u2591\u255A\u2550\u2550\u2550\u2550\u2550\u255D\u2591\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u255D\u2591\u2591\u2591\u255A\u2550\u255D\u2591\u2591\u2591\u255A\u2550\u2550\u2550\u2550\u2550\u255D\u2591\n          =====================================================================\n          Version: ".concat(u.instance.version().toString(),"\n          Developed by: \n            Joe Lazarski\n            Steve Trofemuk\n\n          Serve ads or die trying!\n  ");console.log(t)},e.bf=function(){console.info("\n  ++++++++++[>+>+++>+++++++>++++++++++<<<<-]>>>>--.+++++++++++++++++++++++.<<++.>+++++++++++++.>-----.---------------.\n  +++++++++++++++++.-----------------.<<.>+.>+++++++++++++.---.---------.-.++++++++.++++++++.----------.>++++++++++.\n  ")}},{"./presets.js":26,"./processors":30,"./system":45,"./system/MissionControl":36,"./version.json":46,"@turnercode/digital-ads-utilities/dist":11,"linq-collections":23}],26:[function(r,h,e){"use strict";window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[]},{}],27:[function(r,h,e){"use strict";var l=this&&this.__awaiter||function(o,n,a,u){return new(a=a||Promise)(function(g,t){function f(w){try{y(u.next(w))}catch(s){t(s)}}function p(w){try{y(u.throw(w))}catch(s){t(s)}}function y(w){var s;w.done?g(w.value):((s=w.value)instanceof a?s:new a(function(_){_(s)})).then(f,p)}y((u=u.apply(o,n||[])).next())})},c=this&&this.__generator||function(o,n){var a,u,g,t={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]},f={next:p(0),throw:p(1),return:p(2)};return typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(y){return function(w){var s=[y,w];if(a)throw new TypeError("Generator is already executing.");for(;t=f&&s[f=0]?0:t;)try{if(a=1,u&&(g=2&s[0]?u.return:s[0]?u.throw||((g=u.return)&&g.call(u),0):u.next)&&!(g=g.call(u,s[1])).done)return g;switch(u=0,(s=g?[2&s[0],g.value]:s)[0]){case 0:case 1:g=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,u=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(!(g=0<(g=t.trys).length&&g[g.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!g||s[1]>g[0]&&s[1]<g[3]))t.label=s[1];else if(s[0]===6&&t.label<g[1])t.label=g[1],g=s;else{if(!(g&&t.label<g[2])){g[2]&&t.ops.pop(),t.trys.pop();continue}t.label=g[2],t.ops.push(s)}}s=n.call(o,t)}catch(_){s=[6,_],u=0}finally{a=g=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}},d=(Object.defineProperty(e,"__esModule",{value:!0}),e.RequestProcessor=void 0,r("@turnercode/digital-ads-utilities"));function i(o,n,a){this.adFuel=o,this.nextProcessor=n,this.googleApi=a}i.prototype.process=function(o){var n=this;return new Promise(function(a,u){return l(n,void 0,void 0,function(){var g,t=this;return c(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),(g=this.adFuel.logger)!=null&&g.log(" ### START Request Processor ====",o.wrappedSlots.select(function(p){return p.toLogging()}).toArray(),o.options),(g=this.adFuel.perf)!=null&&g.addMark("Processing Request START"),[4,(g=this.googleApi)==null?void 0:g.configurePubAds().then(function(){return l(t,void 0,void 0,function(){var p,y;return c(this,function(w){switch(w.label){case 0:return(o.options.dispatch!==void 0?o.options.dispatch:o.options.AUTO_DISPATCH)&&((p=this.adFuel.logger)!=null&&p.info("RequestProcessor.process is calling Dispatch",o),o.wrappedSlots.where(function(s){return!s.hasBeenDisplayed&&s.isBuilt&&!s.isExcluded}).toList(),this.dispatch(o)),(p=this.adFuel.perf)!=null&&p.addMark("Processing Request END"),(y=this.adFuel.perf)!=null&&y.addMeasure("Processing Request"),(y=this.adFuel.logger)!=null&&y.log("========== [RequestProcessor/process] CALLING POST DISPATCH =========="),[4,this.adFuel.moduleManager.callPostDispatch(o.wrappedSlots)];case 1:return w.sent(),(y=this.adFuel.logger)!=null&&y.log(" ### STOP Request Processor ====",o.wrappedSlots.select(function(s){return s.toLogging()}).toArray(),o.options),this.nextProcessor?a(this.nextProcessor.process(o)):a(o),[2]}})})})];case 1:return f.sent(),[3,3];case 2:return g=f.sent(),u(g),[3,3];case 3:return[2]}})})})},i.prototype.dispatch=function(o){var n,a;return l(this,void 0,void 0,function(){var u,g,t=this;return c(this,function(f){return 0<(u=o.wrappedSlots.where(function(p){return!p.hasBeenDisplayed&&p.isBuilt&&!p.isExcluded}).toList()).count()?(o.dispatched=!0,(n=this.adFuel.logger)!=null&&n.log("[RequestProcessor - dispatch] Setting dispatched to true",o),this.adFuel.processedData.setOrUpdate(o.timestamp,o),(n=this.adFuel.logger)!=null&&n.log("========== [RequestProcessor/dispatch] CALLING PRE DISPATCH =========="),this.adFuel.moduleManager.callPreDispatch(u).then(function(){var p;try{document.dispatchEvent(new CustomEvent("PreDispatchComplete",{detail:{slots:u.count()}}))}catch(y){(p=t.adFuel.logger)!=null&&p.error("Error dispatching custom event: PreDispatchComplete",{error:y})}t.buildGPTObject(o),u.forEach(function(y){var w;(w=t.adFuel.perf)!=null&&w.addMark("[".concat(y.slotId,"] Slot Displayed With Googletag")),googletag.display(y.gSlot),y.hasBeenDisplayed=!0}),(p=t.googleApi)!=null&&p.refreshSlots(u,{dispatch:!0}),(p=t.adFuel.logger)!=null&&p.log("========== [RequestProcessor/dispatch] CALLING POST DISPATCH =========="),t.adFuel.moduleManager.callPostDispatch(u),document.dispatchEvent(new CustomEvent("AdFuelRequestComplete",{detail:{slots:u.select(function(y){return y.unWrappedSlot}).toArray(),options:t.adFuel.registryOptions}}))})):(n=this.adFuel.logger)!=null&&n.log("No slots to dispatch."),g={slotsBuilt:o.wrappedSlots.where(function(p){return p.hasBeenDisplayed&&!p.isExcluded}).toArray(),registry:o.registry,optionsUsed:o.options},window.AdFuelHistory||((a=this.adFuel.logger)!=null&&a.log("Creating AdFuelHistory"),window.AdFuelHistory=[]),(a=this.adFuel.logger)!=null&&a.log("Adding to AdFuelHistory",g),window.AdFuelHistory.push(g),[2]})})},i.prototype.refresh=function(o,n,a){var u;return n===void 0&&(n=!0),a===void 0&&(a=!0),l(this,void 0,void 0,function(){return c(this,function(g){switch(g.label){case 0:return(u=this.adFuel.perf)!=null&&u.addMark("Refresh Called..."),(u=this.adFuel.logger)!=null&&u.log("Refreshing slots",o.select(function(t){return t.toLogging()}).toArray()),n?[4,this.adFuel.moduleManager.callPreRefresh(o)]:[3,2];case 1:g.sent(),g.label=2;case 2:return(u=this.googleApi)!=null&&u.refreshSlots(o,this.adFuel.registryOptions),a?[4,this.adFuel.moduleManager.callPostRefresh(o)]:[3,4];case 3:g.sent(),g.label=4;case 4:return[2]}})})},i.prototype.buildGPTObject=function(o){var n,a,u,g=d.CookieHelper.readCookie("gptgeo");g?(u=g.split("%2C"),a=parseFloat(u[0]),u=parseFloat(u[1]),(n=this.googleApi)!=null&&n.setLocation(a,u),o.registry.child_directed_treatment&&(n=this.googleApi)!=null&&n.setChildDirectedTreatmentTag(o.registry.child_directed_treatment),o.registry.safeframe_config&&((a=this.adFuel.logger)!=null&&a.log("Setting SafeFrame config tag: ",o.registry.safeframe_config),(u=this.googleApi)!=null)&&u.setSafeFrameConfig(o.registry.safeframe_config)):(n=this.adFuel.logger)!=null&&n.log("Unable to retrieve location cookie",g)},e.RequestProcessor=i},{"@turnercode/digital-ads-utilities":11}],28:[function(r,h,e){"use strict";var l=this&&this.__awaiter||function(n,a,u,g){return new(u=u||Promise)(function(t,f){function p(s){try{w(g.next(s))}catch(_){f(_)}}function y(s){try{w(g.throw(s))}catch(_){f(_)}}function w(s){var _;s.done?t(s.value):((_=s.value)instanceof u?_:new u(function(v){v(_)})).then(p,y)}w((g=g.apply(n,a||[])).next())})},c=this&&this.__generator||function(n,a){var u,g,t,f={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},p={next:y(0),throw:y(1),return:y(2)};return typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(w){return function(s){var _=[w,s];if(u)throw new TypeError("Generator is already executing.");for(;f=p&&_[p=0]?0:f;)try{if(u=1,g&&(t=2&_[0]?g.return:_[0]?g.throw||((t=g.return)&&t.call(g),0):g.next)&&!(t=t.call(g,_[1])).done)return t;switch(g=0,(_=t?[2&_[0],t.value]:_)[0]){case 0:case 1:t=_;break;case 4:return f.label++,{value:_[1],done:!1};case 5:f.label++,g=_[1],_=[0];continue;case 7:_=f.ops.pop(),f.trys.pop();continue;default:if(!(t=0<(t=f.trys).length&&t[t.length-1])&&(_[0]===6||_[0]===2)){f=0;continue}if(_[0]===3&&(!t||_[1]>t[0]&&_[1]<t[3]))f.label=_[1];else if(_[0]===6&&f.label<t[1])f.label=t[1],t=_;else{if(!(t&&f.label<t[2])){t[2]&&f.ops.pop(),f.trys.pop();continue}f.label=t[2],f.ops.push(_)}}_=a.call(n,f)}catch(v){_=[6,v],g=0}finally{u=t=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}},d=(Object.defineProperty(e,"__esModule",{value:!0}),e.SlotProcessor=void 0,r("../system")),i=r("linq-collections");function o(n,a,u){u===void 0&&(u=new d.GoogleApi(n)),this.adFuel=n,this.nextProcessor=a,this.googleApi=u}o.prototype.process=function(n){var a=this;return new Promise(function(u,g){return l(a,void 0,void 0,function(){var t,f,p,y,w=this;return c(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),(t=this.adFuel.logger)!=null&&t.info("Entering SlotProcessor.Process()"),(t=this.adFuel.perf)!=null&&t.addMark("SlotProcessor.Process() START"),t=n.wrappedSlots.select(function(_){return _.toLogging()}).toArray(),(f=this.adFuel.logger)!=null&&f.log(" ### START Slot Processor ====",t,n.options),n.wrappedSlots.forEach(function(_){var v;(v=w.adFuel.perf)!=null&&v.addMark("[".concat(_.slotId,"] SlotProcessor.Process()"))}),(f=this.adFuel.logger)!=null&&f.log(" #################### Building Slots: ",n),this.buildSlots(n),[4,this.adFuel.moduleManager.callPostQueue(n.wrappedSlots)];case 1:return s.sent(),(f=this.adFuel.logger)!=null&&f.log(" ### STOP Slot Processor ====",t,n.options),(p=this.adFuel.logger)!=null&&p.log("========== [slotProcessor/process] CALLING PRE DISPATCH =========="),[4,this.adFuel.moduleManager.callPreDispatch(n.wrappedSlots)];case 2:return s.sent(),(p=this.adFuel.perf)!=null&&p.addMark("SlotProcessor.Process() END"),(y=this.adFuel.perf)!=null&&y.addMeasure("SlotProcessor.Process()"),this.nextProcessor?u((y=this.nextProcessor)==null?void 0:y.process(n)):u(n),[3,4];case 3:return y=s.sent(),g(y),[3,4];case 4:return[2]}})})})},o.prototype.buildSlots=function(n){var a,u=this,g=((g=this.adFuel.logger)!=null&&g.log("#################### Wrapped Slots: ",n.wrappedSlots.toArray()),n.wrappedSlots.where(function(t){return!t.isBuilt&&!t.hasBeenDisplayed&&t.slotExistsOnPage&&!t.isExcluded}));(a=this.adFuel.logger)!=null&&a.log("#################### Filtered Slots: ",g.toArray()),g.forEach(function(t){var f,p=u.adFuel.processedData.where(function(y){return y.value.url===n.url}).select(function(y){return(y=y.value.wrappedSlots.firstOrDefault(function(w){return w.isBuilt&&w.slotId===t.slotId}))==null?void 0:y.gSlot}).toArray();0<p.length&&p[0]!==void 0&&(f=u.adFuel.logger)!=null&&f.info("#################### Found historic gslot for ".concat(t.slotId),p)}),(a=this.adFuel.logger)!=null&&a.info("Building these slots: ",g.select(function(t){return t.toLogging()}).toArray()),g.where(function(t){return!t.isBuilt}).forEach(function(t){var f;(f=u.adFuel.logger)!=null&&f.info("Building slot for ".concat(t.slotId)),u.buildSlot(t),u.setResponsive(t),t.unWrappedSlot.safeframe_config&&u.googleApi.setSlotSafeFrameConfig(t.gSlot,t.unWrappedSlot.safeframe_config)})},o.prototype.buildSlot=function(n){(a=this.adFuel.logger)!=null&&a.log("Wrapped Slot: ",n);var a="/".concat(this.adFuel.adFuelOptions.NETWORK_ID,"/").concat(n.adUnitMap||n.unWrappedSlot.rktr_ad_id),u=n.slotId,g=((g=this.adFuel.perf)!=null&&g.addMark("Building Slot [".concat(n.slotId,"] adPath ").concat(a," START")),n=this.getSlotIfAlreadyProcessed(n),document.getElementById(n.slotId));if(g!=null&&g.className.includes("adfuel-rendered"))(g=this.adFuel.logger)!=null&&g.warn("".concat(n.slotId," element has already been rendered."));else if(n.isBuilt)(g=this.adFuel.logger)!=null&&g.log("You are trying to build ".concat(n.slotId," but it already exists in processedData."),n);else if(n.isOutOfPage)n.gSlot=this.googleApi.defineOutOfPageSlot(a,u);else{(g=this.adFuel.logger)!=null&&g.log("Defining slot for ".concat(n.slotId),n);try{n.gSlot=this.googleApi.defineSlot(a,n.unWrappedSlot.sizes,u)}catch(t){(g=this.adFuel.logger)!=null&&g.error("Error defining slot: ",t)}(u=this.adFuel.logger)!=null&&u.log("Slot built!",n)}(g=this.adFuel.perf)!=null&&g.addMark("Building Slot [".concat(n.slotId,"] adPath ").concat(a," END")),(u=this.adFuel.perf)!=null&&u.addMeasure("Building Slot [".concat(n.slotId,"] adPath ").concat(a))},o.prototype.getSlotIfAlreadyProcessed=function(n){var a=(a=this.adFuel.processedData.firstOrDefault(function(u){return u.value.wrappedSlots.any(function(g){return g.slotId===n.slotId&&g.isBuilt})}))==null?void 0:a.value.wrappedSlots.firstOrDefault(function(u){return u.slotId===n.slotId&&u.isBuilt});return n=a!=null?a:n},o.prototype.setResponsive=function(n){var a;n.isBuilt&&((a=this.adFuel.perf)!=null&&a.addMark("Setting Responsive Mapping [".concat(n.slotId,"]")),this.googleApi.defineSlotSizeMapping(n.gSlot,n.unWrappedSlot.responsive))},o.prototype.changeSlotId=function(n,a){var u=n.slotId.slice();n.unWrappedSlot.rktr_slot_id=a;try{document.dispatchEvent(new CustomEvent("SlotIdChange",{detail:{asset:n.unWrappedSlot,originalId:u,newId:a}}))}catch(g){(n=this.adFuel.logger)!=null&&n.error("Error dispatching SlotIdChange event.",g)}},o.prototype.destroySlots=function(n){var a;n===void 0&&(n=[]),(a=this.adFuel.logger)!=null&&a.log("[SLOT PROCESSOR] START ---------- destroySlots::slotsToDestroy:",n),(a=this.adFuel.perf)!=null&&a.addMark("Destroying Slots [".concat(JSON.stringify(n.map(function(u){return u.getSlotElementId()})),"]")),(a=this.adFuel.logger)!=null&&a.log("[SLOT PROCESSOR] ---------- destroySlots::handoffToGoogleAPI:",n),this.googleApi.destroySlots(n)},o.prototype.clearSlots=function(n){var a=this;this.googleApi.executeWhenAvailable(function(){var u,g=((g=(g=a.adFuel.lastProcessed())==null?void 0:g.wrappedSlots)!=null?g:new i.List).where(function(t){return n.includes(t.slotId)&&t.isBuilt}).select(function(t){return t.gSlot}).toArray();(u=a.adFuel.perf)!=null&&u.addMark("Clearing Slots [".concat(JSON.stringify(g.map(function(t){return t.getSlotElementId()})),"]")),a.googleApi.clearSlots(g)})},e.SlotProcessor=o},{"../system":45,"linq-collections":23}],29:[function(r,h,e){"use strict";var l=this&&this.__assign||function(){return(l=Object.assign||function(o){for(var n,a=1,u=arguments.length;a<u;a++)for(var g in n=arguments[a])Object.prototype.hasOwnProperty.call(n,g)&&(o[g]=n[g]);return o}).apply(this,arguments)},c=this&&this.__spreadArray||function(o,n,a){if(a||arguments.length===2)for(var u,g=0,t=n.length;g<t;g++)!u&&g in n||((u=u||Array.prototype.slice.call(n,0,g))[g]=n[g]);return o.concat(u||Array.prototype.slice.call(n))},d=(Object.defineProperty(e,"__esModule",{value:!0}),e.TargetProcessor=void 0,r("@turnercode/digital-ads-utilities/dist/getUrlParam"));function i(o,n,a){a===void 0&&(a=void 0),this.adFuel=o,this._googleApi=n,this.nextProcessor=a,this._slotTargets={},this._pageTargets={}}i.prototype.process=function(o){var n=this;return new Promise(function(a,u){var g,t,f,p,y,w,s,_,v,m,E,S;try{(g=n.adFuel.perf)!=null&&g.addMark("TargetProcessor.Process() START"),(t=n.adFuel.logger)!=null&&t.log(" ### START Target Processor ====",o.wrappedSlots.select(function(M){return M.toLogging()}).toArray(),o.options),(f=n.adFuel.logger)!=null&&f.log("slotTargets",n._slotTargets),(p=n.adFuel.logger)!=null&&p.log("pageTargets",n._pageTargets),n._slotTargets=Object.assign({},n._slotTargets,o.slotTargets),n._pageTargets=Object.assign({},n._pageTargets,o.pageTargets),(y=n.adFuel.logger)!=null&&y.log("slotTargets",n._slotTargets),(w=n.adFuel.logger)!=null&&w.log("pageTargets",n._pageTargets),n.getAdsQaTargeting(),(s=n.adFuel.logger)!=null&&s.log(" ### START BUILDING SLOT TARGETING ====",o),n.buildSlotLevelTargeting(o),(_=n.adFuel.logger)!=null&&_.log(" ### START BUILDING PAGE TARGETING ====",o),n.buildPageLevelTargeting(o),(v=n.adFuel.logger)!=null&&v.log(" ### STOP Target Processor ====",o.wrappedSlots.select(function(M){return M.toLogging()}).toArray(),o.options),(m=n.adFuel.perf)!=null&&m.addMark("TargetProcessor.Process() END"),(E=n.adFuel.perf)!=null&&E.addMeasure("TargetProcessor.Process()"),n.nextProcessor?a((S=n.nextProcessor)==null?void 0:S.process(o)):a(o)}catch(M){u(M)}})},i.prototype.windowObjectName=function(o){var n;return((n=(n=o.options)==null?void 0:n.SITE_OBJECT)!=null?n:(o=(n=(n=o.registry)==null?void 0:n.root)!=null?n:(n=o.registry)==null?void 0:n.site)!=null?o:"").toUpperCase()},i.prototype.buildSlotLevelTargeting=function(o){(n=this.adFuel.logger)!=null&&n.log("Building slot level targeting.",{raw:window.CNN,root:this.windowObjectName(o),data:o});for(var n,a,u,g=function(y){(u=t.adFuel.perf)!=null&&u.addMark("Building Slot-Level Targeting [".concat(y.slotId,"]")),(u=t.adFuel.logger)!=null&&u.log("[TargetProcessor] Building Slot-Level Targeting [".concat(y.slotId,"]"),y);var w,s=(((u=window[t.windowObjectName(o)])==null?void 0:u.slotTargets)||{})[y.slotId]||{},_=((u=t.adFuel.logger)!=null&&u.log("[TargetProcessor] Site Slot Targets [".concat(y.slotId,"]"),s),{pos:[y.posMap]}),v=((u=t.adFuel.logger)!=null&&u.log("[TargetProcessor] posTargets::",_),new Map(y.targeting)),m=(v.delete("pos"),l(l(l(l({},t._slotTargets[y.slotId]),Object.fromEntries(v)),_),s));(u=t.adFuel.logger)!=null&&u.log("[TargetProcessor] slotTargets to be built are: ",m,y);for(w in m)(function(E){var S,M;y.gSlot?0<(M=(a=m[E].filter(function(T){var C;return(C=!((C=y.requestedSlotTargets[E])!=null&&C.includes(T)))!==null&&C}))!=null?a:[]).length&&((a=t.adFuel.logger)!=null&&a.log("Setting slot targeting: ",{slot:y.slotId,key:E,value:M}),y.gSlot.setTargeting(E,M),y.requestedSlotTargets[E]?(S=y.requestedSlotTargets[E]).push.apply(S,M):y.requestedSlotTargets[E]=c([],M,!0)):(a=t.adFuel.logger)!=null&&a.warn("Slot ".concat(y.slotId," could not find the gslot and goes home disappointed."))})(w);(u=t.adFuel.logger)!=null&&u.log("Built slot targeting:",m,y)},t=this,f=0,p=o.wrappedSlots.where(function(y){return y.isBuilt&&!y.isExcluded}).toArray();f<p.length;f++)g(p[f])},i.prototype.buildPageLevelTargeting=function(o){var n,a,u=this,g=((g=this.adFuel.logger)!=null&&g.log("Building page level targeting.",{root:this.windowObjectName(o),data:window[this.windowObjectName(o)]}),(g=this.adFuel.perf)!=null&&g.addMark("Building Page-Level Targeting"),((g=window[this.windowObjectName(o)])==null?void 0:g.adTargets)||{}),t=((n=this.adFuel.logger)!=null&&n.log("[TargetProcessor] Site Page Targets",g),new Map),f=(Array.isArray((n=o.registry)==null?void 0:n.targeting)&&(n=o.registry)!=null&&n.targeting.forEach(function(s){(w=u.adFuel.logger)!=null&&w.log("[TargetProcessor] Registry Page Target Item: ",s),(w=u.adFuel.logger)!=null&&w.log("[TargetProcessor] Registry Page Target Item Types: ",{first:typeof s[0],second:typeof s[1]});var y,w=s[0]||"undefined",s=s[1];(y=u.adFuel.logger)!=null&&y.log("[TargetProcessor] Registry Page Target KVP: ",{keyName:w,keyValue:s}),t.set(w,s)}),(o=this.adFuel.logger)!=null&&o.log("[TargetProcessor] Registry Targets: ",Object.fromEntries(t)),l(l(l({},this._pageTargets),Object.fromEntries(t)),g));for(a in(n=this.adFuel.logger)!=null&&n.log("pageTargets to be built are: ",f),f)f[a]!=null&&this._googleApi.setTargeting(a,f[a]);(o=this.adFuel.logger)!=null&&o.log("Built page targeting",f)},i.prototype.getAdsQaTargeting=function(){var o,n,a;try{(a=this.adFuel.perf)!=null&&a.addMark("Getting AdsQA Targeting");var u,g,t,f,p=(0,d.getUrlParam)("adsqa");p&&((o=this.adFuel.logger)!=null&&o.log("ADSQA detected."),u=p.split("%3D"),1<p.length?(g=u[0],t=u[1],f=Array.isArray(t)?t:[t],this._pageTargets[g]=f):(n=this.adFuel.logger)!=null&&n.info("ADSQA parsing problem",u))}catch(y){(a=this.adFuel.logger)!=null&&a.error("checkForAdsQA",y)}},i.prototype.removeTargets=function(o,n,a){var u;o===void 0&&(o={}),(u=this.adFuel.perf)!=null&&u.addMark("Removing Targeting [".concat(n,"] ").concat(JSON.stringify(a))),a&&o[n]?o[n]=o[n].filter(function(g){return!a.includes(g)}):delete o[n]},i.prototype.addTargets=function(o,n,a){var u;o[n]=a,(u=this.adFuel.perf)!=null&&u.addMark("Adding Targeting [".concat(n,"] ").concat(JSON.stringify(a))),o[n]?o[n]=c(c([],(u=o[n])!=null?u:[],!0),a.filter(function(g){return!o[n].includes(g)}),!0):o[n]=c([],a,!0)},i.prototype.addPageLevelTargets=function(o,n){this.addTargets(this._pageTargets,o,n)},i.prototype.removePageLevelTargets=function(o,n){this.removeTargets(this._pageTargets,o,n)},i.prototype.addSlotLevelTargets=function(o,n,a){this._slotTargets[o]||(this._slotTargets[o]={}),this.addTargets(this._slotTargets[o],n,a)},i.prototype.removeSlotLevelTargets=function(o,n,a){this.removeTargets(this._slotTargets[o],n,a)},i.prototype.setBulkTargeting=function(o){var n;if(o.slotTargets||o.adTargets){if((n=this.adFuel.perf)!=null&&n.addMark("Setting Bulk Targeting"),o.slotTargets)for(var a=0,u=o.slotTargets;a<u.length;a++){var g=u[a];this.addSlotLevelTargets(g.slotId,g.targetKey,g.targetValues)}if(o.adTargets)for(var t=0,f=o.adTargets;t<f.length;t++){var p=f[t];this.addPageLevelTargets(p.targetKey,p.targetValues)}}else(n=this.adFuel.logger)!=null&&n.error("setBulkTargeting was passed a bad parameter.",o)},e.TargetProcessor=i},{"@turnercode/digital-ads-utilities/dist/getUrlParam":8}],30:[function(r,h,e){"use strict";var l=this&&this.__createBinding||(Object.create?function(d,i,o,n){n===void 0&&(n=o);var a=Object.getOwnPropertyDescriptor(i,o);a&&("get"in a?i.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(d,n,a)}:function(d,i,o,n){d[n=n===void 0?o:n]=i[o]}),c=this&&this.__exportStar||function(d,i){for(var o in d)o==="default"||Object.prototype.hasOwnProperty.call(i,o)||l(i,d,o)};Object.defineProperty(e,"__esModule",{value:!0}),c(r("../system/OptionsParser"),e),c(r("./RequestProcessor"),e),c(r("./SlotProcessor"),e),c(r("./TargetProcessor"),e)},{"../system/OptionsParser":39,"./RequestProcessor":27,"./SlotProcessor":28,"./TargetProcessor":29}],31:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AController=void 0,e.AController=function(l){(this.missionControl=l).register(this)}},{}],32:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAdFuelOptions=void 0,e.BaseAdFuelOptions={AUTO_DISPATCH:!0,COLLAPSE_EMPTY_DIVS:!0,DEFAULT_TIMEOUT:1200,DEFAULT_DESKTOP_TIMEOUT:1200,DEFAULT_MOBILE_TIMEOUT:800,IFRAME_TITLE:"advertisement",NETWORK_ID:"8663477"}},{}],33:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleApi=void 0;var l=r("@turnercode/digital-ads-utilities/dist/getUrlParam");function c(d){this.adFuel=d,this._pubAdsConfigured=!1,this._commandQueue=[],this._setChildDirectedTreatment=!0}c.prototype.executeWhenAvailable=function(d){var i;this.isAvailable?d():((i=this.adFuel.logger)!=null&&i.warn("It seems googletag is not ready yet. Queuing command...",{apiReady:googletag.apiReady,pubadsReady:googletag.pubadsReady}),(i=window.googletag)!=null&&i.cmd.push(d))},c.prototype.flushCmdQueue=function(){for(;0<this._commandQueue.length;)googletag.cmd.push(this._commandQueue.shift())},Object.defineProperty(c.prototype,"isAvailable",{get:function(){var d;return(d=googletag.apiReady)!=null&&d},enumerable:!1,configurable:!0}),c.prototype.destroySlots=function(d){var i=this;0<d.length?this.executeWhenAvailable(function(){var o;d.forEach(function(n){var a;(a=i.adFuel.logger)!=null&&a.log("[GOOGLEAPI] ---------- destroySlots::Destroying Slot: ".concat(n.getSlotElementId())),(a=i.adFuel.perf)!=null&&a.addMark("Destroying Slot: ".concat(n.getSlotElementId()))}),(o=window.googletag)!=null&&o.destroySlots(d)}):this.executeWhenAvailable(function(){var o;(o=i.adFuel.logger)!=null&&o.log("[GOOGLEAPI] ---------- destroySlots::Destroying All Slots"),(o=i.adFuel.perf)!=null&&o.addMark("Destroying All Slots"),(o=window.googletag)!=null&&o.destroySlots()})},c.prototype.clearSlots=function(d){var i=this;0<(d=d===void 0?[]:d).length?this.executeWhenAvailable(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Clearing Slots"),d.forEach(function(n){var a;(a=i.adFuel.perf)!=null&&a.addMark("Clearing Slot: ".concat(n.getSlotElementId()))}),googletag.pubads().clear(d)}):googletag.cmd.push(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Clearing All Slots"),googletag.pubads().clear()})},c.prototype.defineOutOfPageSlot=function(n,i){var o,n=googletag.defineOutOfPageSlot(n,i);if(window.googletag&&n)(o=this.adFuel.perf)!=null&&o.addMark("Defined OOP GPT Slot - ".concat(i)),n.addService(window.googletag.pubads());else{if(!window.googletag)throw Error("Googletag not defined.");(o=this.adFuel.logger)!=null&&o.warn("Unable to define slot: ".concat(i))}return n},c.prototype.defineSlot=function(d,i,o){(u=this.adFuel.logger)!=null&&u.info("Building Standard Slot Object adPath:".concat(d," sizes:").concat(i," slotId:").concat(o));for(var n,a,u=void 0,g=[],t=0,f=i;t<f.length;t++){var p=f[t].map(Number);g.push([p[0],p[1]])}try{u=googletag.defineSlot(d,g,o),window.googletag&&u&&((n=this.adFuel.logger)!=null&&n.info("Defined slot: ".concat(o),u),(a=this.adFuel.perf)!=null&&a.addMark("Defined Standard GPT Slot - ".concat(o)),u.addService(window.googletag.pubads()))}catch(y){(i=this.adFuel.logger)!=null&&i.warn("Unable to define slot: ".concat(o),y)}return u},c.prototype.defineSlotSizeMapping=function(d,i){var o,n;d&&(n=d.getSlotElementId(),(o=this.adFuel.logger)!=null&&o.info("Setting Slot size mapping slotId: ".concat(n," responsiveMap: "),i),d.defineSizeMapping(i),(o=this.adFuel.perf)!=null)&&o.addMark("Defined Slot Responsive Mapping - ".concat(d.getSlotElementId()))},c.prototype.setTargeting=function(d,i){var o=this;this.executeWhenAvailable(function(){var n;googletag.pubads().setTargeting(d,i),(n=o.adFuel.perf)!=null&&n.addMark("Defined Page Target - ".concat(d))})},c.prototype.displaySlotById=function(d){var i=this;this.executeWhenAvailable(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Displaying Slot - ".concat(d)),googletag.display(d)})},c.prototype.refreshSlots=function(d,i){var o=this,n=i||{maintainCorrelator:!0},a=d.where(function(u){return u.isBuilt}).select(function(u){return u.gSlot}).toArray();0<a.length?this.executeWhenAvailable(function(){var u;(u=o.adFuel.logger)!=null&&u.log("GoogleAPI, Refreshing Slots: ".concat(JSON.stringify(a.map(function(g){return g.getSlotElementId()})))),a.forEach(function(g){var t;(t=o.adFuel.perf)!=null&&t.addMark("Refreshing Slot ".concat(g.getSlotElementId()))}),googletag.pubads().refresh(a,{changeCorrelator:!n.maintainCorrelator})}):this.executeWhenAvailable(function(){var u;(u=o.adFuel.logger)!=null&&u.log("GoogleAPI, Refreshing all slots"),(u=o.adFuel.perf)!=null&&u.addMark("Refreshing All Slots"),googletag.pubads().refresh(void 0,{changeCorrelator:!n.maintainCorrelator})})},c.prototype.configurePubAds=function(){var d=this;return new Promise(function(i){d._pubAdsConfigured?i():(d._pubAdsConfigured=!0,d.executeWhenAvailable(function(){(o=d.adFuel.perf)!=null&&o.addMark("Configuring GPT START"),googletag.pubads().addEventListener("impressionViewable",function(a){var u,g=a.slot.getSlotElementId();(u=d.adFuel.perf)!=null&&u.addMark("[".concat(g,"] Impression Viewable")),(u=d.adFuel.logger)!=null&&u.info("impressionViewable",a),document.dispatchEvent(new CustomEvent("SlotViewable",{detail:a}))}).addEventListener("slotVisibilityChanged",function(a){var u;(u=d.adFuel.logger)!=null&&u.info("slotVisibilityChanged",a),document.dispatchEvent(new CustomEvent("slotVisibilityChanged",{detail:a}))}).addEventListener("slotRenderEnded",function(a){var u,g,t,f,p,y,w,s,_,v,m,E,S,M,T,C=a.slot.getSlotElementId();(u=d.adFuel.perf)!=null&&u.addMark("[".concat(C,"] Slot Render Ended")),(u=d.adFuel.logger)!=null&&u.info("slotRenderEnded",a);try{var F,R=d.adFuel.processedData.getKeys(),k=(t=(g=a.slot)==null?void 0:g.getSlotElementId())!=null?t:"NO ID",W={},U=(R.forEach(function(z){d.adFuel.processedData.get(z).wrappedSlots.forEach(function(H){H.unWrappedSlot.rktr_slot_id===k&&(W=H)})}),(f=d.adFuel.logger)!=null&&f.log("========== Active Slot: ",W),W.responseData={advertiserId:a.advertiserId,campaignId:a.campaignId,creativeId:a.creativeId,isEmpty:a.isEmpty,lineItemId:a.lineItemId,renderedSize:a.size,sourceAgnosticCreativeId:a.sourceAgnosticCreativeId,sourceAgnosticLineItemId:a.sourceAgnosticLineItemId},{asset:a.slot,pos:a.slot?a.slot.getTargeting("pos"):[""],empty:!!a.isEmpty,renderedSize:(p=a.size)!=null?p:"0x0",creativeId:(y=a.sourceAgnosticCreativeId)!=null?y:"0",lineItemId:(w=a.sourceAgnosticLineItemId)!=null?w:"0",serviceName:(s=a.serviceName)!=null?s:"",divId:(v=(_=a.slot)==null?void 0:_.getSlotElementId())!=null?v:"NO ID"}),G=(U.empty&&d.adFuel.adFuelOptions.COLLAPSE_EMPTY_DIVS&&(document.getElementById(U.divId).style.display="none"),a.slot.getTargeting("creativeId")||[]),B=(a.creativeId&&G.indexOf(""+a.creativeId)<0&&G.push(""+a.creativeId),a.slot.getTargeting("lineItemId")||[]);a.lineItemId&&B.indexOf(""+a.lineItemId)<0&&B.push(""+a.lineItemId),U.divId!="NO ID"&&(F=document.getElementById(U.divId),(m=d.adFuel.logger)!=null&&m.log("Getting element for ".concat(U.divId," to set className."),F),F?F.className.includes("adfuel-rendered")||(F.className="".concat(F.className," adfuel-rendered").trim(),(E=d.adFuel.logger)!=null&&E.log("".concat(U.divId," className ").concat(F.className))):(S=d.adFuel.logger)!=null&&S.warn("Could not find element ".concat(U.divId," to set adfuel-rendered in className."))),d.executeWhenAvailable(function(){a.slot.setTargeting("creativeId",G),a.slot.setTargeting("lineItemId",B)}),(M=d.adFuel.logger)!=null&&M.info("Dispatching GPTRenderComplete: ",U),U.divId?(T=document.getElementById(U.divId))!=null&&T.dispatchEvent(new CustomEvent("GPTRenderComplete",{detail:U,bubbles:!0})):document.dispatchEvent(new CustomEvent("GPTRenderComplete",{detail:U}))}catch(z){(C=d.adFuel.logger)!=null&&C.error("Error dispatching custom event: GPTRenderComplete",z)}}).addEventListener("slotOnload",function(a){var u,g=a.slot.getSlotElementId();(u=d.adFuel.perf)!=null&&u.addMark("[".concat(g,"] Slot Loaded")),(u=d.adFuel.logger)!=null&&u.info("slotOnLoad",a),document.dispatchEvent(new CustomEvent("GPTSlotLoaded",{detail:a}))}),(o=d.adFuel.logger)!=null&&o.info("Enabling 'Collapse Empty Divs'"),googletag.pubads().collapseEmptyDivs((o=d.adFuel.adFuelOptions.COLLAPSE_EMPTY_DIVS)==null||o),(o=d.adFuel.logger)!=null&&o.info("Enabling 'Async Rendering'"),googletag.pubads().enableAsyncRendering(),(o=d.adFuel.logger)!=null&&o.info("Enabling 'Single Request'"),googletag.pubads().enableSingleRequest(),(0,l.getUrlParam)("enableInitialLoad")||((o=d.adFuel.logger)!=null&&o.info("Disabling 'Initial Load'"),googletag.pubads().disableInitialLoad());var o=((o=(o=window.WM)==null?void 0:o.UserConsent)==null?void 0:o.isInRegion("global"))===!1,n=(n=(n=window.WM)==null?void 0:n.UserConsent)==null?void 0:n.inUserConsentState(["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);o&&!n&&((o=d.adFuel.logger)!=null&&o.log("Restricting Data Processing..."),googletag.pubads().setPrivacySettings({restrictDataProcessing:!0})),(n=d.adFuel.logger)!=null&&n.info("Enabling 'Services'"),(o=d.adFuel.perf)!=null&&o.addMark("Configuring GPT END"),(n=d.adFuel.perf)!=null&&n.addMeasure("Configuring GPT"),(o=d.adFuel.perf)!=null&&o.addMark("Enabling GPT Services"),googletag.enableServices(),i()}))})},c.prototype.enableLazyLoad=function(d){var i=this;this.executeWhenAvailable(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Enabling GPT Lazy Load"),googletag.pubads().enableLazyLoad({fetchMarginPercent:d.fetch,renderMarginPercent:d.render,mobileScaling:d.scaling})})},c.prototype.setChildDirectedTreatmentTag=function(d){var i,o=this;this._setChildDirectedTreatment?(this.executeWhenAvailable(function(){var n;(n=o.adFuel.perf)!=null&&n.addMark("Setting Child-Directed Treatment"),googletag.pubads().setPrivacySettings({childDirectedTreatment:!0,underAgeOfConsent:!0})}),this._setChildDirectedTreatment=!1):(i=this.adFuel.logger)!=null&&i.info("setChidlDirectedTreatment has already been caleld.")},c.prototype.setLocation=function(d,i){var o=this;this.executeWhenAvailable(function(){var n;(n=o.adFuel.perf)!=null&&n.addMark("Setting Location"),googletag.pubads().setLocation(d,i)})},c.prototype.setSafeFrameConfig=function(d){var i=this;this.executeWhenAvailable(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Setting SafeFrame Config"),googletag.pubads().setSafeFrameConfig(d)})},c.prototype.setSlotSafeFrameConfig=function(d,i){var o=this;d&&this.executeWhenAvailable(function(){var n;(n=o.adFuel.perf)!=null&&n.addMark("[".concat(d.getSlotElementId(),"] Setting Slot SafeFrame Config")),d.setSafeFrameConfig(i)})},e.GoogleApi=c},{"@turnercode/digital-ads-utilities/dist/getUrlParam":8}],34:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GptProcessData=void 0;var l=r("linq-collections");function c(){this.wrappedSlots=new l.List,this.url="",this.pageTargets={},this.slotTargets={},this.dispatched=!1}c.prototype.build=function(d,i,o,n,a,u){return n===void 0&&(n=""),a===void 0&&(a={}),u===void 0&&(u={}),this.timestamp=new Date().getTime(),this.registry=d,this.wrappedSlots=i,this.options=o,this.url=n,this.pageTargets=a,this.slotTargets=u,this.dispatched=!1,this},c.prototype.clone=function(){return new c().build(this.registry&&JSON.parse(JSON.stringify(this.registry)),new l.List(this.wrappedSlots.toArray()),this.options&&JSON.parse(JSON.stringify(this.options)),"".concat(this.url),JSON.parse(JSON.stringify(this.pageTargets)),JSON.parse(JSON.stringify(this.slotTargets)))},e.GptProcessData=c},{"linq-collections":23}],35:[function(o,h,e){"use strict";var l,c,d=this&&this.__extends||(l=function(a,u){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(g,t){g.__proto__=t}:function(g,t){for(var f in t)Object.prototype.hasOwnProperty.call(t,f)&&(g[f]=t[f])}))(a,u)},function(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function g(){this.constructor=a}l(a,u),a.prototype=u===null?Object.create(u):(g.prototype=u.prototype,new g)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.GptScriptLoader=void 0,o("@turnercode/digital-ads-utilities/dist/loadScriptFromUrl")),o=o("../system/AController"),o=(c=o.AController,d(n,c),Object.defineProperty(n.prototype,"readyId",{get:function(){return"gptScript"},enumerable:!1,configurable:!0}),n.prototype.loadScript=function(){var a,u=this;return(a=this.perf)!=null&&a.addMark("GPT Script Load START"),(a=this.perf)!=null&&a.addMark("GPT Script Ready START"),(0,i.loadScriptFromUrl)("https://securepubads.g.doubleclick.net/tag/js/gpt.js","GPTScript",this._document).then(function(){var g;(g=u.logger)!=null&&g.info("GPT is loaded."),(g=u.perf)!=null&&g.addMark("GPT Script Load END"),(g=u.perf)!=null&&g.addMeasure("GPT Script Load"),(g=window.googletag)!=null&&g.cmd.push(function(){var t,f=((f=window.googletag)==null?void 0:f.getVersion())||"unknown";(t=u.logger)!=null&&t.info("GPT is ready. Version is ".concat(f)),(t=u.perf)!=null&&t.addMark("GPT Script Ready END"),(f=u.perf)!=null&&f.addMeasure("GPT Script Ready")})})},n);function n(a,u,g,t){t===void 0&&(t=document);var f=c.call(this,a)||this;return f.missionControl=a,f.logger=u,f.perf=g,f._document=t,f.missionControl.setReady(f),f}e.GptScriptLoader=o},{"../system/AController":31,"@turnercode/digital-ads-utilities/dist/loadScriptFromUrl":12}],36:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MissionControl=void 0;var l=r("linq-collections");function c(d,i){this.adFuel=d,this.googleApi=i,this._ready=new l.Dictionary,this._optanonLoaded=!1,this._consentStatus=!0,this._iabRegion="global",this.processQueue=[]}c.prototype.register=function(d){this._ready.setOrUpdate(d.readyId,!1),(d=this.adFuel.logger)!=null&&d.info("Ready at Register",JSON.parse(JSON.stringify(this._ready))),(d=this.adFuel.perf)!=null&&d.addMark("Ready at Register")},Object.defineProperty(c.prototype,"firstProcessor",{get:function(){return this._firstProcessor},set:function(d){this._firstProcessor=d},enumerable:!1,configurable:!0}),c.prototype.setReady=function(d){var i,o=this;if(d){if((i=this.adFuel.logger)!=null&&i.log("Setting Processor Ready: ",d),!this._ready.containsKey(d.readyId))throw new Error("Key not found in ReadyEngine: ".concat(d.readyId));this._ready.setOrUpdate(d.readyId,!0),(i=this.adFuel.logger)!=null&&i.info("Ready",JSON.parse(JSON.stringify(this._ready)))}if(this.readyToLaunch()){if((d=this.adFuel.perf)!=null&&d.addMark("Ready To Launch"),!this._firstProcessor)throw new Error("All processes are ready, but FirstProcessor is not set.");(i=this.adFuel.perf)!=null&&i.addMark("First Processor - Processing"),this.googleApi.executeWhenAvailable(function(){o.runProcessChain(),o.adFuel.flushCmdQueue()})}},c.prototype.runProcessChain=function(){var d,i=this,o=this.processQueue.shift();(d=this.adFuel.logger)!=null&&d.log("[runProcessChain] ProcessData: ",o),o?((d=this.adFuel.logger)!=null&&d.info("[runProcessChain] Starting chain with this data",o),this.adFuel.moduleManager.callStart(o.wrappedSlots.where(function(n){return n.slotExistsOnPage}).toList()).then(function(){i.adFuel.moduleManager.callPreQueue(o.wrappedSlots.where(function(n){return n.slotExistsOnPage&&!n.isExcluded}).toList()).then(function(){var n;(n=i.adFuel.logger)!=null&&n.info("[runProcessChain] calling first processor..."),i._firstProcessor.process(o).then(function(){o.timestamp=new Date().getTime(),i.adFuel.processedData.setOrUpdate(o.timestamp,o),i.runProcessChain(),i.adFuel.flushCmdQueue()})})}).catch(function(n){var a;(a=i.adFuel.logger)!=null&&a.error("[runProcessChain] There was an error in processing the chain.  Mission Control has aborted liftoff.",n)})):(d=this.adFuel.logger)!=null&&d.info("[runProcessChain] No data to process.")},c.prototype.getSlotIfAlreadyProcessed=function(d){var i=(i=this.adFuel.processedData.firstOrDefault(function(o){return o.value.wrappedSlots.any(function(n){return n.slotId===d.slotId&&n.isBuilt})}))==null?void 0:i.value.wrappedSlots.firstOrDefault(function(o){return o.slotId===d.slotId&&o.isBuilt});return d=i!=null?i:d},c.prototype.isReady=function(d){return this._ready.get(d.readyId)},c.prototype.readyToLaunch=function(){var d,i=this._ready.all(function(o){return o.value===!0});return(d=this.adFuel.logger)!=null&&d.info("Ready to launch ".concat(i),this._ready),i},e.MissionControl=c},{"linq-collections":23}],37:[function(n,h,e){"use strict";var l,c,d=this&&this.__extends||(l=function(u,g){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,f){t.__proto__=f}:function(t,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(t[p]=f[p])}))(u,g)},function(u,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function t(){this.constructor=u}l(u,g),u.prototype=g===null?Object.create(g):(t.prototype=g.prototype,new t)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.ModuleManager=e.ModuleWrapper=void 0,n("@turnercode/digital-ads-utilities")),n=n("../system/AController"),o=function(u,g,t,f){g===void 0&&(g=void 0),t===void 0&&(t=!1),f===void 0&&(f=!1),this.moduleName=u,this.unWrappedModule=g,this.isLoaded=t,this.isReady=f},n=(e.ModuleWrapper=o,c=n.AController,d(a,c),Object.defineProperty(a.prototype,"readyId",{get:function(){return"modules"},enumerable:!1,configurable:!0}),a.prototype.executeWhenWindowLoads=function(){var u;(u=this.adFuel.perf)!=null&&u.addMark("Executing Window Processes START"),(u=this.adFuel.perf)!=null&&u.addMark("Executing Window Processes END"),(u=this.adFuel.perf)!=null&&u.addMeasure("Executing Window Processes")},a.prototype.executeWhenDOMLoads=function(){var u;(u=this.adFuel.perf)!=null&&u.addMark("Executing DOM Processes START"),this.adFuel.adFuelOptions.ACTIVE_MODULES?((u=this.adFuel.logger)!=null&&u.log("Are all expected modules loaded? ",{expected:this.adFuel.adFuelOptions.ACTIVE_MODULES,loaded:this.areAllExpectedModulesLoaded}),this.areAllExpectedModulesLoaded?((u=this.adFuel.perf)!=null&&u.addMark("Executing DOM Processes END"),(u=this.adFuel.perf)!=null&&u.addMeasure("Executing DOM Processes")):(u=this.adFuel.logger)!=null&&u.warn("Failed to load all expected modules:",this.adFuel.adFuelOptions.ACTIVE_MODULES)):((u=this.adFuel.logger)!=null&&u.log("~~ ~~ ~~ === === === SETTING MODULE MANAGER READY (A) === === === ~~ ~~ ~~"),this.adFuel.missionControl.setReady(this))},a.prototype.registerModule=function(u){var g,t;this.adFuel.registeredModules.containsKey(u.MODULE_LOG_TAG)?(t=this.adFuel.registeredModules.get(u.MODULE_LOG_TAG)).unWrappedModule=u:((g=this.adFuel.perf)!=null&&g.addMark("Creating ModuleWrapper [".concat(u.MODULE_NAME,"]")),t=new o(u.MODULE_LOG_TAG,u)),(g=this.adFuel.logger)!=null&&g.log("Setting Registered Module: ",{module:u,wrappedModule:t}),this.adFuel.registeredModules.setOrUpdate(u.MODULE_LOG_TAG,t),(g=this.adFuel.logger)!=null&&g.log("Expected Loaded and All Ready?: ",{expected:this.areAllExpectedModulesLoaded,ready:this.areAllModulesReady}),this.areAllExpectedModulesLoaded&&this.areAllModulesReady&&((u=this.adFuel.logger)!=null&&u.info("All modules are loaded and ready, so setting ModuleManager ready."),(t=this.adFuel.perf)!=null&&t.addMark("All Modules Ready"),(g=this.adFuel.logger)!=null&&g.log("~~ ~~ ~~ === === === SETTING MODULE MANAGER READY (B) === === === ~~ ~~ ~~"),this.missionControl.setReady(this))},Object.defineProperty(a.prototype,"areAllExpectedModulesLoaded",{get:function(){for(var u,g,t=0,f=(g=this.adFuel.adFuelOptions.ACTIVE_MODULES)!=null?g:[];t<f.length;t++){var p=f[t];if((u=this.adFuel.logger)!=null&&u.log("moduleLogTag: ",p),!this.adFuel.registeredModules.containsKey(p))return!1}return(g=this.adFuel.logger)!=null&&g.log("notNot: ",!!this.adFuel.adFuelOptions.ACTIVE_MODULES),!!this.adFuel.adFuelOptions.ACTIVE_MODULES},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"areAllModulesReady",{get:function(){return this.adFuel.registeredModules.count()<1||this.adFuel.registeredModules.all(function(u){return u.value.isReady})},enumerable:!1,configurable:!0}),a.prototype.callStart=function(){var u=this;return new Promise(function(g){u.adFuel.registeredModules.where(function(t){return t.value.isReady}).forEach(function(t){var f,p=(p=t.value)==null?void 0:p.unWrappedModule;if(p!=null&&p.start)try{(f=u.adFuel.perf)!=null&&f.addMark("Calling Module Start Process [".concat(t.value.moduleName,"]")),p.start()}catch(y){(f=u.adFuel.logger)!=null&&f.error("Problem calling start for ".concat(p.MODULE_NAME),y)}}),g()})},a.prototype.callPreQueue=function(u){var g=this;return new Promise(function(t){var f,p=u,y=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,_=w.value.unWrappedModule;_!=null&&_.preQueue&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module preQueue Process [".concat(w.value.moduleName,"]")),y.push((0,i.promiseWithTimeout)(1500,_.preQueue(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("MODULE-MANAGER - Problem calling preQueue ".concat(_.MODULE_NAME),v)}),"".concat(_.MODULE_NAME," PreQueue timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - PreQueue Callback Promises: ",y),t(Promise.allSettled(y).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - PreQueue Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a.prototype.callPostQueue=function(u){var g=this;return new Promise(function(t){var f,p=u,y=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,_=w.value.unWrappedModule;_!=null&&_.postQueue&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module postQueue Process [".concat(w.value.moduleName,"]")),y.push((0,i.promiseWithTimeout)(1500,_.postQueue(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("Problem calling postQueue ".concat(_.MODULE_NAME),v)}),"".concat(_.MODULE_NAME," PostQueue timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - PostQueue Callback Promises: ",y),t(Promise.allSettled(y).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - PostQueue Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a.prototype.callPreDispatch=function(u){var g=this;return new Promise(function(t){var f,p=u,y=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,_=w.value.unWrappedModule;_!=null&&_.preDispatch&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module preDispatch Process [".concat(w.value.moduleName,"]")),y.push((0,i.promiseWithTimeout)(1500,_.preDispatch(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("Problem calling preDispatch ".concat(_.MODULE_NAME),v)}),"".concat(_.MODULE_NAME," PreDispatch timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - PreDispatch Callback Promises: ",y),t(Promise.allSettled(y).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - PreDispatch Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a.prototype.callPostDispatch=function(u){var g=this;return new Promise(function(t){var f,p=u,y=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,_=w.value.unWrappedModule;_!=null&&_.postDispatch&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module postDispatch Process [".concat(w.value.moduleName,"]")),y.push((0,i.promiseWithTimeout)(1500,_.postDispatch(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("Problem calling postDispatch ".concat(_.MODULE_NAME),v)}),"".concat(_.MODULE_NAME," PostDispatch timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - PostDispatch Callback Promises: ",y),t(Promise.allSettled(y).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - PostDispatch Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a.prototype.callPreRefresh=function(u){var g=this;return new Promise(function(t){var f,p=u,y=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,_=w.value.unWrappedModule;_!=null&&_.preRefresh&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module preRefresh Process [".concat(w.value.moduleName,"]")),y.push((0,i.promiseWithTimeout)(1500,_.preRefresh(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("Problem calling preRefresh ".concat(_.MODULE_NAME),v)}),"".concat(_.MODULE_NAME," PreRefresh timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - PreRefresh Callback Promises: ",y),t(Promise.allSettled(y).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - PreRefreesh Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a.prototype.callPostRefresh=function(u){var g=this;return new Promise(function(t){var f,p=u,y=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,_=w.value.unWrappedModule;_!=null&&_.postRefresh&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module postRefresh Process [".concat(w.value.moduleName,"]")),y.push((0,i.promiseWithTimeout)(1500,_.postRefresh(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("Problem calling postRefresh ".concat(_.MODULE_NAME),v)}),"".concat(_.MODULE_NAME," PostRefresh timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - PostRefresh Callback Promises: ",y),t(Promise.allSettled(y).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - PostRefresh Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a.prototype.callDestroySlot=function(u){var g=this;return new Promise(function(t){var f,p=u,y=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,_=w.value.unWrappedModule;_!=null&&_.destroySlots&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module destroySlots Process [".concat(w.value.moduleName,"]")),y.push((0,i.promiseWithTimeout)(1500,_.destroySlots(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("Problem calling destroySlots ".concat(_.MODULE_NAME),v)}),"".concat(_.MODULE_NAME," DestroySlot timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - DestroySlot Callback Promises: ",y),t(Promise.allSettled(y).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - DestroySlot Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a);function a(u){var g=c.call(this,u.missionControl)||this;return g.adFuel=u,g._windowLoaded=!1,g._domContentLoaded=!1,window.addEventListener("DOMContentLoaded",function(){var t;g._domContentLoaded||((t=g.adFuel.perf)!=null&&t.addMark("DOMContentLoaded"),g.executeWhenDOMLoads(),g._domContentLoaded=!0)}),window.addEventListener("load",function(){var t;g._windowLoaded||((t=g.adFuel.perf)!=null&&t.addMark("window.load"),g.executeWhenWindowLoads(),g._windowLoaded=!0)}),g}e.ModuleManager=n},{"../system/AController":31,"@turnercode/digital-ads-utilities":11}],38:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Monetization=void 0;var l=r("@turnercode/digital-ads-utilities/dist/Logger"),c=r("@turnercode/digital-ads-utilities/dist/getViewport");function d(i){var o,n=this,a=(this.wrappedSlot=i,this.invalidMappings=["_ns_","_nfs_"],this.invalidSegments=[],this.invalidAdUnits=["CNN/health","CNN/health/healthgrades","CNN/health/leaf","CNN/health/list","CNN/health/photos","CNN/health/specials","CNN/health/video","CNN/student-news"],this.monetizedSizes=["160x600","300x250","300x600","320x50","728x90","970x90","970x250"],this.concertSizes=["1030x590","620x366","325x508","325x204"],this.isMonetized=!0,this.isSuppressed=!1,this.isOutstream=!1,this.isConcert=!1,this.viewportSizes=[],this.filteredSizes=[],this._logger=new l.Logger("AdFuel T$","Monetization","mon","color: #85BB65; padding: 2px"),this._logger.log("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$"),this._logger.log("$$$$$$$$$$  Monetization for Slot: ",i.slotId),this.posValue=i.posMap,(0,c.getViewport)()),u=this.isSuppressed=!1;this.isConcert=!1,this.isOutstream=0<=i.slotId.indexOf("_out_"),i.slotId==="page"&&(this.isMonetized=!1),this.hasInvalidMapping()&&(this.isMonetized=!1),this.hasInvalidUnitSegment()&&(this.isMonetized=!1),this.hasInvalidAdUnit()&&(this.isMonetized=!1),i.responsive&&0<i.responsive.length&&(u=!0,this._logger.log("$$$$$$$$$$ Client Viewport : ",a),o=i.responsive.filter(function(g){return n._logger.log("$$$$$$$$$$ Slot Viewport : ",g),g=g.unwrapped[0][0],n._logger.log("$$$$$$$$$$ Client Min: ",g),parseInt(g,10)<a.width})[0].sizes,this.viewportSizes=o.sizes.map(function(g){return g.unwrapped}),this.isSuppressed=o.suppressed,this._logger.log("$$$$$$$$$$ Viewport Sizes: ",this.viewportSizes)),this._logger.log("$$$$$$$$$$ Is Responsive/Monetized/Suppressed/Outstream: ",{isResponsive:u,isMonetized:this.isMonetized,isSuppressed:this.isSuppressed,isOutstream:this.isOutstream}),this.isOutstream?(this.isMonetized=!0,u?this.viewportSizes.forEach(function(g){n.filteredSizes.push({unwrapped:g,width:parseInt(g[0],10),height:parseInt(g[1],10)})}):i.sizes.forEach(function(g){n.filteredSizes.push(g)})):this.isMonetized&&!this.isSuppressed&&this.monetizedSizes.forEach(function(g){u?n.viewportSizes.forEach(function(t){0<n.concertSizes.indexOf(t.join("x"))&&(n._logger.log("$$$$$$$$$$ Is size a Concert size?",{size:t.join("x"),index:n.concertSizes.indexOf(t.join("x"))}),n.isConcert=!0),g===t.join("x")&&n.filteredSizes.push({unwrapped:t,width:parseInt(t[0],10),height:parseInt(t[1],10)})}):i.sizes.forEach(function(t){0<n.concertSizes.indexOf(t.unwrapped.join("x"))&&(n._logger.log("$$$$$$$$$$ Is size a Concert size?",{size:t.unwrapped.join("x"),index:n.concertSizes.indexOf(t.unwrapped.join("x"))}),n.isConcert=!0),g===t.unwrapped.join("x")&&n.filteredSizes.push(t)})}),this.filteredSizes.length!==0||this.isOutstream||(this.isMonetized=!1),this._logger.log("$$$$$$$$$$ Is Concert: ",this.isConcert),this.isConcert&&(this.isMonetized=!0,this.concertSizes.forEach(function(f){var f=f.split("x"),t=[0,0],f=(f.forEach(function(p,y){t[y]=parseInt(p,10)}),{unwrapped:f,width:t[0],height:t[1]});n._logger.log("$$$$$$$$$$ Pushing Concert Size to Filtered Sizes:",f),n.filteredSizes.push(f)})),this._logger.log("$$$$$$$$$$ Filtered Sizes: ",this.filteredSizes),this._logger.log("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$")}d.prototype.hasInvalidMapping=function(){var i=this,o=!1;return this.invalidMappings.forEach(function(n){(i.wrappedSlot.slotId.includes(n)||i.posValue.includes(n))&&(o=!0)}),o},d.prototype.hasInvalidUnitSegment=function(){var i=this,o=!1;return this.invalidSegments.forEach(function(n){i.wrappedSlot.slotId.includes(n)&&(o=!0)}),o},d.prototype.hasInvalidAdUnit=function(){return this.invalidAdUnits.includes(this.wrappedSlot.adUnitMap)},e.Monetization=d},{"@turnercode/digital-ads-utilities/dist/Logger":3,"@turnercode/digital-ads-utilities/dist/getViewport":9}],39:[function(r,h,e){"use strict";var l=this&&this.__assign||function(){return(l=Object.assign||function(o){for(var n,a=1,u=arguments.length;a<u;a++)for(var g in n=arguments[a])Object.prototype.hasOwnProperty.call(n,g)&&(o[g]=n[g]);return o}).apply(this,arguments)},c=(Object.defineProperty(e,"__esModule",{value:!0}),e.OptionsParser=void 0,r("./SlotWrapper")),d=r("linq-collections");function i(o){this.adFuel=o}i.prototype.processOptions=function(o){(a=this.adFuel.perf)!=null&&a.addMark("Processing Options"),(a=this.adFuel.logger)!=null&&a.log("----slots before processOptions",o.wrappedSlots.select(function(g){return g.toLogging()}).toArray());var n,a=o.options,u=(this.processPageAdUnit(o),a!=null&&a.usePageAdUnit?((n=this.adFuel.logger)!=null&&n.log("Using page ad unit for ad unit mapping."),this.processAdUnitMapping(this.adFuel.pageAdUnit,o)):a!=null&&a.adUnitMap&&this.processAdUnitMapping(a.adUnitMap,o),a!=null&&a.slotMap&&this.processSlotMapping(a.slotMap,o),a!=null&&a.exclude&&this.processExclusions(a.exclude,o),a!=null&&a.slots&&this.processIncludes(a.slots,o),a!=null&&a.posMap&&this.processPosMapping(a.posMap,o),[]);return a!=null&&a.sync?o.wrappedSlots.forEach(function(g){return u.push(g.slotId)}):a!=null&&a.syncSlots&&(Array.isArray(a.syncSlots)||(this.adFuel.adFuelOptions.syncSlots=[a.syncSlots]),u.push.apply(u,a.syncSlots)),o.wrappedSlots.where(function(g){return u.includes(g.slotId)}).forEach(function(g){return g.sync=!0}),(n=this.adFuel.logger)!=null&&n.log("----slots after processOptions",o.wrappedSlots.toArray()),o},i.prototype.processAdUnitMapping=function(o,n){var a,u,g=this;(a=this.adFuel.perf)!=null&&a.addMark("Processing AdUnit Mapping [".concat(JSON.stringify(o),"]")),(a=this.adFuel.logger)!=null&&a.log("Processing AdUnit Mapping ".concat(JSON.stringify(o))),u=JSON.parse(JSON.stringify(typeof o=="string"?{all:o}:o)),(a=this.adFuel.logger)!=null&&a.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= UnitMapClone: ",u),n.wrappedSlots.forEach(function(t){var f;(f=g.adFuel.logger)!=null&&f.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Checking if slot should be mapped: ",{slot:t,id:t.slotId,unitMapClone:u}),u.all!==void 0?((f=g.adFuel.logger)!=null&&f.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Mapping Slot to Global: ",u.all),t.adUnitMap=u.all):u[t.slotId]!==void 0&&((f=g.adFuel.logger)!=null&&f.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Mapping Slot to Specific: ",u[t.slotId]),t.adUnitMap=u[t.slotId])})},i.prototype.processPageAdUnit=function(o){var n;this.adFuel.pageAdUnit===""&&1<o.wrappedSlots.toArray().length&&(o.wrappedSlots.toArray()[0].unWrappedSlot.rktr_ad_id===""?(n=this.adFuel.logger)!=null&&n.error("Could not determine page ad unit.",o.wrappedSlots):((n=this.adFuel.logger)!=null&&n.info("Setting pageAdUnit to:",o.wrappedSlots.toArray()[0].unWrappedSlot.rktr_ad_id),this.adFuel.pageAdUnit=o.wrappedSlots.toArray()[0].unWrappedSlot.rktr_ad_id))},i.prototype.processSlotMapping=function(o,n){(a=this.adFuel.logger)!=null&&a.log("[OptionsParser] Processing Slot Mapping",{slotMap:o,data:n});for(var a,u,g=this,t=0,f=Object.keys(o);t<f.length;t++)(function(p){var y=(u=n.wrappedSlots.firstOrDefault(function(w){return w.slotId===p}))==null?void 0:u.unWrappedSlot;y?n.wrappedSlots.firstOrDefault(function(w){return w.slotId===o[p]})?(u=g.adFuel.logger)!=null&&u.warn("Mapped ".concat(o[p]," slot already exists!")):document.getElementById(o[p])?((u=g.adFuel.logger)!=null&&u.log("[OptionsParser] Creating slot ".concat(p," mapped to ").concat(o[p])),n.wrappedSlots.push(new c.SlotWrapper(l(l({},y),{rktr_slot_id:o[p]})))):(u=g.adFuel.logger)!=null&&u.warn("".concat(o[p]," has no matching element on the page and won't be added to allWrappedSlots.'")):(u=g.adFuel.logger)!=null&&u.warn("Could not find source slot data for ".concat(p," in the registry or allWrappedSlots in processSlotMap."))})(f[t])},i.prototype.processPosMapping=function(o,n){var a,u,g=this;if((a=this.adFuel.perf)!=null&&a.addMark("Processing POS Mapping ".concat(JSON.stringify(o),"]")),(a=this.adFuel.logger)!=null&&a.log("[OptionsParser] Processing POS Mapping",o),typeof o=="string")n.wrappedSlots.forEach(function(p){var y;(y=g.adFuel.logger)!=null&&y.log("[OptionsParser] Setting pos to global:",o),p.posMap=o});else{var t,f=this;for(t in o)(function(p){var y=n.wrappedSlots.firstOrDefault(function(w){return w.slotId===p});if((u=f.adFuel.logger)!=null&&u.log("[OptionsParser] Validating specific pos:",{source:y,key:p}),!y)return(u=f.adFuel.logger)!=null&&u.warn("Cant' find slot ".concat(p," to use as a source in POS Mapping."));y&&((u=f.adFuel.logger)!=null&&u.log("[OptionsParser] Setting pos to specific:",{source:y,key:p}),y.posMap=o[p])})(t)}},i.prototype.processExclusions=function(o,n){var a;(a=this.adFuel.perf)!=null&&a.addMark("Processing Exclusions ".concat(JSON.stringify(o),"]")),Array.isArray(o)||(o=[o]),(a=this.adFuel.logger)!=null&&a.log("#################### Should process exclusions?",0<o.length),o.length<1||((a=this.adFuel.logger)!=null&&a.log("#################### Processing exclusions:",o),(a=this.adFuel.logger)!=null&&a.log("#################### Pre Exclusions: ",n.wrappedSlots),a=n.wrappedSlots.toArray().map(function(u){return o.includes(u.slotId)&&(u.isExcluded=!0),u}),n.wrappedSlots=new d.List(a),(n=this.adFuel.logger)!=null&&n.log("#################### Post Exclusions: ",a))},i.prototype.processIncludes=function(o,n){var a;(a=this.adFuel.perf)!=null&&a.addMark("Processing Slots (inclusions) ".concat(JSON.stringify(o))),Array.isArray(o)||(o=[o]),(a=this.adFuel.logger)!=null&&a.log("#################### Should process inclusions?",0<o.length),o.length<1||((a=this.adFuel.logger)!=null&&a.log("#################### Processing inclusions:",o),(a=this.adFuel.logger)!=null&&a.log("#################### Pre Inclusions: ",n.wrappedSlots),a=n.wrappedSlots.where(function(u){return o.includes(u.slotId)}).toArray().map(function(u){return u.isExcluded=!1,u}),n.wrappedSlots=new d.List(a),(n=this.adFuel.logger)!=null&&n.log("#################### Post Inclusions: ",a))},e.OptionsParser=i},{"./SlotWrapper":43,"linq-collections":23}],40:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayLoader=void 0;var l=r("@turnercode/digital-ads-utilities/dist/localization");function c(d){this.adFuel=d,this._overlaysHidden=!0}Object.defineProperty(c.prototype,"overlaysHidden",{get:function(){return this._overlaysHidden},enumerable:!1,configurable:!0}),c.prototype._togglePageOverlay=function(){var d,i,o,n;(d=this.adFuel.logger)!=null&&d.log("===== OVERLAY LOADER ===== Toggling Page Overlay...",this.overlaysHidden),this.overlaysHidden&&((d=document.createElement("style")).innerHTML="\n        html::-webkit-scrollbar:horizontal { display: none; width: 0; height: 0; }\n        html body::-webkit-scrollbar:horizontal { display: none; width: 0; height: 0; }\n      ",(i=document.createElement("div")).className="pos_overlay",i.id="page_overlay",i.style.position="fixed",i.style.bottom="0",i.style.left="10",i.style.textAlign="left",i.style.padding="5px",i.style.marginBottom="25px",i.style.fontFamily="Verdana",i.style.fontSize="12px",i.style.fontWeight="normal",i.style.lineHeight="12px",i.style.background="rgba(0,50,100,0.7)",i.style.color="#ffffff",i.style.zIndex="2147483000",i.style.overflow="hidden",i.style.overflowY="auto",i.style.overflowX="auto",i.style.width="500px",i.style.height="30vh",(o=document.createElement("ul")).style.listStyleType="none",o.style.margin="0px",o.style.marginTop="5px",o.style.marginBottom="5px",o.style.padding="5px",o.innerHTML=o.innerHTML+'<div style="position: absolute; top: 5px; right: 5px; align: right; text-align: right; display: inline-block;"><a style="cursor: copy; color: white;" onClick="copyPageInfo()">[COPY]</a></div>',n=this.adFuel,["afv","uc","mv","reg"].forEach(function(a){var u,g=document.createElement("li"),t=(g.style.margin="5px",g.style.padding="0px",n.version()),f=n.registeredModules.getKeys(),p=n.fetchedRegistries.keys(),y=((u=n.logger)!=null&&u.log("Version: ",t),(u=n.logger)!=null&&u.log("Modules: ",f),(u=n.logger)!=null&&u.log("Registries: ",p),((u=(u=window.WM)==null?void 0:u.UserConsent)==null?void 0:u.getRegion())||"global"),w=y==="global"?"N/A":JSON.stringify((u=(u=window.WM)==null?void 0:u.UserConsent)==null?void 0:u.getConsentState(),null,2);switch((u=n.logger)!=null&&u.log("Consent Region: -".concat(y,"-")),(u=n.logger)!=null&&u.log("Consent Status: ",w),g.style.direction="ltr",a){case"afv":g.innerHTML='<b style="font-size: 1.25em;">AdFuel v'.concat(t,"</b>");break;case"mv":g.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>Modules:</b>',g.innerHTML=g.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',f.forEach(function(v){var _,v=n.registeredModules.get(v);g.innerHTML=g.innerHTML+'<li style="margin: 0px; margin-left: 5px;">'.concat((_=v.unWrappedModule)==null?void 0:_.MODULE_NAME," v").concat((_=v.unWrappedModule)==null?void 0:_.MODULE_VERSION,"</li>")}),g.innerHTML=g.innerHTML+"</ul>";break;case"reg":g.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>Registries:</b>',g.innerHTML=g.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',Array.from(p).forEach(function(s){var _=n.fetchedRegistries.get(s),v=null;_&&(v=_[0]),g.innerHTML=g.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Name:</b> '.concat(v==null?void 0:v.rktr_id,"</li>"),g.innerHTML=g.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Website:</b> <a style="color: yellow;" href="'.concat(s,'" target="_blank">').concat(s,"</a></li>"),g.innerHTML=g.innerHTML+'<li style="margin: 0px; margin-left: 5px; padding-bottom: 5px; border-bottom: solid 1px white;"><b>Last Updated:</b> '.concat(v==null?void 0:v.rktr_deployed_date,"<br /></li>")}),g.innerHTML=g.innerHTML+"</ul>";break;case"uc":g.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>User Consent:</b>',g.innerHTML=g.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',g.innerHTML=g.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Region:</b> '.concat(y.toUpperCase(),"</li>"),g.innerHTML=g.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Status:</b> '.concat(w?"Granted":"Denied","</li>"),g.innerHTML=g.innerHTML+"</ul>"}o.appendChild(g)}),i.appendChild(o),window.copyPageInfo=function(){var a=(a=document.getElementById("page_overlay"))==null?void 0:a.innerText.replace("[COPY]","");return console.log("Overlay Text: ",a),navigator.clipboard.writeText(a||""),a},this.showTemporalData(i),document.head.appendChild(d),document.body.appendChild(i))},c.prototype._toggleOverlays=function(){var d,i,o=this;if(this._overlaysHidden){(n=this.adFuel.logger)!=null&&n.log("===== OVERLAY LOADER ===== Showing Overlays..."),this._togglePageOverlay();var n=document.querySelectorAll(".adfuel-rendered");(d=this.adFuel.logger)!=null&&d.log("===== OVERLAY LOADER ===== Ad Slots:",n),u=n.length,n.forEach(function(t){var f=t.id,p=document.getElementById(f)||document.createElement("div"),y=(p.style.position="relative",(_=o.adFuel)==null?void 0:_.processedData),_=y.getKeys(),w={},s=(_.forEach(function(m){var E=y.get(m);(m=o.adFuel.logger)!=null&&m.log("===== OVERLAY LOADER ===== Registry:",E),E.wrappedSlots.forEach(function(S){S.unWrappedSlot.rktr_slot_id===f&&S.isBuilt&&S.gSlot&&((w=S).parentRegistry=E.url)})}),(_=o.adFuel.logger)!=null&&_.log("===== OVERLAY LOADER ===== data: ",{processedData:y,adElement:t,adFuel:Object.keys(o.adFuel),activeSlot:w}),f.substring(f.indexOf("_")+1)),_=document.createElement("div"),v=(_.className="pos_overlay",_.style.position="absolute",_.style.top="0",_.style.left="0",_.style.right="0",_.style.bottom="0",_.style.textAlign="left",_.style.padding="5px",_.style.fontFamily="Verdana",_.style.fontSize="12px",_.style.fontWeight="normal",_.style.lineHeight="12px",_.style.background="rgba(0,100,0,0.7)",_.style.color="#ffffff",_.style.zIndex="2147483000",_.style.resize="both",_.style.overflow="hidden",_.style.overflowY="auto",_.style.overflowX="auto",_.style.width=p.style.width+"px",_.style.height=p.style.height+"px",_.id="overlay_"+f,document.createElement("ul"));v.style.listStyleType="none",v.style.margin="0px",v.style.marginTop="5px",v.style.marginBottom="5px",v.style.padding="5px",v.innerHTML=v.innerHTML+'<div style="position: absolute; top: 5px; right: 5px; display: inline-block; align: right; text-align: right"><a style="cursor: copy; color: white;" onClick="copySlotInfo(\''.concat(f,"')\">[COPY]</a></div>"),["Slot","Details","Response","Programmatic","Bids","Targeting"].forEach(function(m){function E(F){return'<ul style="list-style-type: none; margin: 0px; margin-left: '.concat(F,'px; padding-top: 2px; padding-bottom: 2px;">')}function S(F){return'<li style="direction: ltr; margin-left: '.concat(F,'px; padding: 0px;">')}switch(v.innerHTML=v.innerHTML+S(5),m){case"Slot":v.innerHTML=v.innerHTML+'<b style="font-size: 1.25em;">Slot: '.concat(f,"</b>");break;case"Details":v.innerHTML=v.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Details:</b>',v.innerHTML=v.innerHTML+E(10),v.innerHTML=v.innerHTML+S(10)+"<b>POS:</b> "+s+"</li>",v.innerHTML=v.innerHTML+S(10)+"<b>AdUnit:</b> "+((w==null?void 0:w.adUnitMap)||(w==null?void 0:w.unWrappedSlot.rktr_ad_id))+"</li>",v.innerHTML=v.innerHTML+S(10)+"<b>Registry:</b> "+(w==null?void 0:w.parentRegistry)+"</li>",v.innerHTML=v.innerHTML+S(10)+"<b>Monetized:</b> "+(w&&w.monetization?w.monetization.isMonetized:"false")+"</li>",v.innerHTML=v.innerHTML+"</ul>";break;case"Response":v.innerHTML=v.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Response:</b>',v.innerHTML=v.innerHTML+E(10);var M,T=w.responseData;if(T)for(var C in T)C!=="renderedSize"&&(M=T[C])!==null&&(v.innerHTML=v.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>'.concat(C,":</b> ").concat(JSON.stringify(M),"</li>"));v.innerHTML=v.innerHTML+S(10)+"<b>Rendered Size:</b> ".concat(typeof w.responseData.renderedSize!="string"?w.responseData.renderedSize.join("x"):w.responseData.renderedSize,"</li>"),v.innerHTML=v.innerHTML+"</ul>";break;case"Programmatic":v.innerHTML=v.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Programmatic:</b>',v.innerHTML=v.innerHTML+E(10),Object.keys(w.programmatic).forEach(function(F){var R;switch(v.innerHTML=v.innerHTML+S(10),F){case"a9":(R=o.adFuel.logger)!=null&&R.log("===== OVERLAY LOADER ===== A9: ",w.programmatic.a9),v.innerHTML=v.innerHTML+"<b>A9:</b> ",v.innerHTML=v.innerHTML+E(15),v.innerHTML=v.innerHTML+S(15)+"<b>SlotName:</b> "+w.programmatic.a9.slotName+"</li>",v.innerHTML=v.innerHTML+"</ul>";break;case"ias":(R=o.adFuel.logger)!=null&&R.log("===== OVERLAY LOADER ===== IAS: ",w.programmatic.ias),v.innerHTML=v.innerHTML+"<b>IAS:</b> ",v.innerHTML=v.innerHTML+E(15),v.innerHTML=v.innerHTML+S(15)+"<b>adUnitPath:</b> "+w.programmatic.ias.adUnitPath+"</li>",v.innerHTML=v.innerHTML+"</ul>";break;case"krux":(R=o.adFuel.logger)!=null&&R.log("===== OVERLAY LOADER ===== Krux: ",w.programmatic.krux),v.innerHTML=v.innerHTML+"<b>Krux:</b> ",v.innerHTML=v.innerHTML+E(15),v.innerHTML=v.innerHTML+S(15)+"<b>controlTag:</b> "+((0,l.isIntl)()?w.programmatic.krux.intl_controltag:w.programmatic.krux.dom_controltag)+"</li>",v.innerHTML=v.innerHTML+"</ul>";break;case"prebid":(R=o.adFuel.logger)!=null&&R.log("===== OVERLAY LOADER ===== Prebid: ",w.programmatic.prebid),v.innerHTML=v.innerHTML+"<b>Prebid:</b> ",v.innerHTML=v.innerHTML+E(15),Object.keys(w.programmatic.prebid).forEach(function(k){k!=="bids"&&(v.innerHTML=v.innerHTML+S(15)+"<b>".concat(k.toUpperCase(),":</b><br />"),v.innerHTML=v.innerHTML+E(20),Object.keys(w.programmatic.prebid[k]).forEach(function(W){var U=W!=="keywords"?w.programmatic.prebid[k][W]:JSON.stringify(w.programmatic.prebid[k][W]);v.innerHTML=v.innerHTML+S(20)+"<b>".concat(W,":</b> ").concat(U,"</li>")}),v.innerHTML=v.innerHTML+"</ul>",v.innerHTML=v.innerHTML+"</li>")}),v.innerHTML=v.innerHTML+"</ul>"}v.innerHTML=v.innerHTML+"</li>"}),v.innerHTML=v.innerHTML+"</ul>";break;case"Targeting":v.innerHTML=v.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Targeting:</b>',v.innerHTML=v.innerHTML+E(10),Object.keys(w.requestedSlotTargets).forEach(function(F){0<w.requestedSlotTargets[F].length?v.innerHTML=v.innerHTML+S(10)+"<b>".concat(F,":</b> ").concat(JSON.stringify(w.requestedSlotTargets[F].join(", ")),"</li>"):(F=o.adFuel.logger)!=null&&F.log("===== OVERLAY LOADER ===== No Slot Targets [".concat(w.slotId,"]"))}),v.innerHTML=v.innerHTML+"</ul>"}v.innerHTML=v.innerHTML+"</li>"}),window.copySlotInfo=function(m){return m=(m=document.getElementById("overlay_"+m))==null?void 0:m.innerText.replace("[COPY]",""),console.log("Overlay Text: ",m),navigator.clipboard.writeText(m||""),m},_.appendChild(v),p.appendChild(_)}),this._overlaysHidden=!1}else{(d=this.adFuel.logger)!=null&&d.log("===== OVERLAY LOADER ===== Removing Overlays...");for(var a=document.querySelectorAll(".pos_overlay"),u=a.length,g=0;g<u;g++)(i=a[g].parentNode)!=null&&i.removeChild(a[g]);this._overlaysHidden=!0}},c.prototype.startConsoleTool=function(){var d,i=this;try{document.addEventListener("keydown",function(o){o.isComposing||o.keyCode===229||o.code==="229"||o.code==="KeyZ"&&o.ctrlKey&&o.shiftKey&&i._toggleOverlays()})}catch(o){(d=this.adFuel.logger)!=null&&d.log("Error Starting Console Tool: ",o)}},c.prototype.getTemporalData=function(){var d=[];return performance.getEntries().forEach(function(i,o){o===0?["connectEnd","connectStart","domComplete","domContentLoadedEventStart","domContentLoadedEventEnd","domInteractive","domainLookupStart","domainLookupEnd","fetchStart","loadEventEnd","loadEventStart","requestStart","responseStart","responseEnd"].forEach(function(n){i[n]!==1&&d.push({name:n,startTime:i[n],duration:0,entryType:"navigation"})}):(0<=i.name.indexOf("ADFUEL")||0<=["gpt-tag-load","gpt-first-ad-request","gpt-first-ad-render"].indexOf(i.name))&&d.push(i)}),d.sort(function(i,o){return i.startTime>o.startTime?1:i.startTime<o.startTime?-1:0}),d},c.prototype.showTemporalData=function(d){var i=document.createElement("div"),o=(i.style.textAlign="left",i.innerHTML="<b>Performance Data:</b>",this.getTemporalData()),n=["name","entryType","startTime","duration"],a=document.createElement("table"),u=(a.border="1",a.style.width="100%",document.createElement("thead")),g=document.createElement("tr"),t=(u.appendChild(g),n.forEach(function(f){var p=document.createElement("td");p.innerHTML=f.toUpperCase(),p.style.padding="5px",p.style.paddingLeft="5px",p.style.paddingRight="5px",p.style.fontSize="1em",p.style.fontWeight="bolder",p.style.textAlign="center",g.appendChild(p)}),document.createElement("tbody"));o.forEach(function(f){var p=document.createElement("tr");p.style.padding="15px",n.forEach(function(y){var w=document.createElement("td");switch(y){case"name":w.innerHTML=f[y].replace("[ADFUEL TS] ","");break;case"startTime":case"duration":w.innerHTML=parseFloat(f[y]).toFixed(4);break;default:w.innerHTML=f[y]}w.style.padding="2px",w.style.paddingLeft="5px",w.style.paddingRight="5px",w.style.fontSize=".8em",w.style.fontWeight="normal",p.appendChild(w)}),t.appendChild(p)}),a.appendChild(u),a.appendChild(t),i.appendChild(a),d.appendChild(i)},e.OverlayLoader=c},{"@turnercode/digital-ads-utilities/dist/localization":13}],41:[function(p,h,e){"use strict";var l,c,d=this&&this.__extends||(l=function(w,s){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(_,v){_.__proto__=v}:function(_,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(_[m]=v[m])}))(w,s)},function(w,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function _(){this.constructor=w}l(w,s),w.prototype=s===null?Object.create(s):(_.prototype=s.prototype,new _)}),i=this&&this.__awaiter||function(w,s,_,v){return new(_=_||Promise)(function(m,E){function S(C){try{T(v.next(C))}catch(F){E(F)}}function M(C){try{T(v.throw(C))}catch(F){E(F)}}function T(C){var F;C.done?m(C.value):((F=C.value)instanceof _?F:new _(function(R){R(F)})).then(S,M)}T((v=v.apply(w,s||[])).next())})},o=this&&this.__generator||function(w,s){var _,v,m,E={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]},S={next:M(0),throw:M(1),return:M(2)};return typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function M(T){return function(C){var F=[T,C];if(_)throw new TypeError("Generator is already executing.");for(;E=S&&F[S=0]?0:E;)try{if(_=1,v&&(m=2&F[0]?v.return:F[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,F[1])).done)return m;switch(v=0,(F=m?[2&F[0],m.value]:F)[0]){case 0:case 1:m=F;break;case 4:return E.label++,{value:F[1],done:!1};case 5:E.label++,v=F[1],F=[0];continue;case 7:F=E.ops.pop(),E.trys.pop();continue;default:if(!(m=0<(m=E.trys).length&&m[m.length-1])&&(F[0]===6||F[0]===2)){E=0;continue}if(F[0]===3&&(!m||F[1]>m[0]&&F[1]<m[3]))E.label=F[1];else if(F[0]===6&&E.label<m[1])E.label=m[1],m=F;else{if(!(m&&E.label<m[2])){m[2]&&E.ops.pop(),E.trys.pop();continue}E.label=m[2],E.ops.push(F)}}F=s.call(w,E)}catch(R){F=[6,R],v=0}finally{_=m=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}}},n=(Object.defineProperty(e,"__esModule",{value:!0}),e.RegistryLoader=void 0,p("./AController")),a=p("@turnercode/digital-ads-utilities"),u=p("linq-collections"),g=p("../system"),t=p("."),f=p("./OptionsParser"),p=(c=n.AController,d(y,c),Object.defineProperty(y.prototype,"readyId",{get:function(){return"registry"},enumerable:!1,configurable:!0}),y.prototype.loadRegistryFromUrl=function(w,s){var _;return i(this,void 0,void 0,function(){var v,m=this;return o(this,function(E){return(_=this.adFuel.logger)!=null&&_.info("Loading registry JSON from ".concat(w)),typeof w!="string"?(_=this.adFuel.logger)!=null&&_.log("loadRegistryFromUrl was given a Url value that wasn't a string.",console.trace()):(w.slice(2+(w.lastIndexOf(".")-1>>>0))==="js"&&((_=this.adFuel.logger)!=null&&_.warn("The 'min.js' and '.js' registry file formats are deprecated. Please change your code to use the '.json' registry file."),(v=w.split(".")).pop(),w="".concat(v.filter(function(S){return S.toLowerCase()!=="min"}).join("."),".json"),(_=this.adFuel.logger)!=null)&&_.info("Converting input to use '.json' registry file. Converted to: ".concat(w,". ")),w=(0,a.normalizeUrl)(w),(_=this.adFuel.logger)!=null&&_.log("Looking for Registry JSON: ",w),this.fetchedRegistries.has(w)?((_=this.adFuel.logger)!=null&&_.log("Fetching Registry object from Cache"),v=this.fetchedRegistries.get(w),(_=this.adFuel.logger)!=null&&_.log("===== [RegistryLoader/loadRegistryFromUrl] Registry: ",v),this.loadRegistryFromJson(JSON.parse(JSON.stringify(v)),s,w)):((_=this.adFuel.logger)!=null&&_.log("Fetching Registry JSON from CDN"),(_=this.adFuel.perf)!=null&&_.addMark("Loading Registry JSON START"),fetch(w).then(function(S){return S.json()}).then(function(S){return m.fetchedRegistries.set(w,JSON.parse(JSON.stringify(S.registry))),S.registry}).then(function(S){var M;(M=m.adFuel.perf)!=null&&M.addMark("Loading Registry JSON END"),(M=m.adFuel.perf)!=null&&M.addMeasure("Loading Registry JSON"),m.loadRegistryFromJson(S,s,w)}).catch(function(S){var M;throw(M=m.adFuel.logger)!=null&&M.error("Error loading ".concat(w),S),Error(S)}))),[2]})})},y.prototype.loadRegistryFromJson=function(w,s,_){(S=this.adFuel.perf)!=null&&S.addMark("Processing Registry [".concat(w[0].rktr_id,"]")),_=_||"".concat(w[0].rktr_id),(S=this.adFuel.logger)!=null&&S.log("===== [RegistryLoader/loadRegistryFromJson] Registry: ",{registry:w,jsonUrl:_});var v,m=new u.List,E=w[0];E.slots=[],(S=this.adFuel.logger)!=null&&S.log("===== [RegistryLoader/loadRegistryFromJson] Options: ",s);for(var S,M=1;M<w.length;M++)E.slots.push(JSON.parse(JSON.stringify(w[M]))),s.slots&&s.slots.length!==0?0<=s.slots.indexOf(JSON.parse(JSON.stringify(w[M])).rktr_slot_id)&&((v=this.adFuel.logger)!=null&&v.log("===== [RegistryLoader/loadRegistryFromJson] Selective Slot: ",w[M]),m.push(new g.SlotWrapper(JSON.parse(JSON.stringify(w[M]))))):((v=this.adFuel.logger)!=null&&v.log("===== [RegistryLoader/loadRegistryFromJson] All Slots: ",w[M]),m.push(new g.SlotWrapper(JSON.parse(JSON.stringify(w[M])))));S=new t.GptProcessData().build(E,m,s,_),(_=this.adFuel.logger)!=null&&_.log("data variable in loadRegistryfromJson",S),this.loadRegistryFromObject(S)},y.prototype.loadRegistryFromObject=function(w){var s;w=new f.OptionsParser(this.adFuel).processOptions(w),(s=this.adFuel.logger)!=null&&s.info("GptProcessDataObject for processing",w),this.adFuel.missionControl.processQueue.push(w),this.missionControl.setReady(this)},y);function y(w){var s=c.call(this,w.missionControl)||this;return s.adFuel=w,s.fetchedRegistries=new Map,s}e.RegistryLoader=p},{".":45,"../system":45,"./AController":31,"./OptionsParser":39,"@turnercode/digital-ads-utilities":11,"linq-collections":23}],42:[function(r,h,e){"use strict";function l(c){this.unwrapped=c}Object.defineProperty(e,"__esModule",{value:!0}),e.SizeWrapper=void 0,Object.defineProperty(l.prototype,"width",{get:function(){return+this.unwrapped[0]},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"height",{get:function(){return+this.unwrapped[1]},enumerable:!1,configurable:!0}),e.SizeWrapper=l},{}],43:[function(r,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlotWrapper=void 0;var l=r("./Monetization"),c=r("./SizeWrapper"),d=r("./ViewportWrapper");function i(o){this.unWrappedSlot=o,this._sync=!1,this._isExcluded=!1,this._hasBeenDisplayed=!1,this._gslot=void 0,this._monetization={isMonetized:!1,filteredSizes:[],isSuppressed:!1},this._adUnitMap="",this._parentRegistry="",this._responsive=[],this._sizes=[],this._requestedSlotTargets={},this._posMap="",this.programmatic={},this.responseData={advertiserId:void 0,campaignId:void 0,creativeId:void 0,isEmpty:!0,lineItemId:void 0,renderedSize:"",sourceAgnosticCreativeId:void 0,sourceAgnosticLineItemId:void 0},this._adUnitMap=o.rktr_ad_id,this._posMap="";for(var n=0,a=this.targeting;n<a.length;n++){var u=a[n];if(u[0]==="pos"){this._posMap=u[1][0];break}}this.unWrappedSlot.responsive=this.formatResponsiveMapping(o);for(var g=0,t=this.unWrappedSlot.responsive;g<t.length;g++){var f=t[g];this._responsive.push(new d.ViewportWrapper(f))}for(var p=0,y=this.unWrappedSlot.sizes;p<y.length;p++){var w=y[p];this._sizes.push(new c.SizeWrapper(w))}this._monetization=new l.Monetization(this),this._parentRegistry=""}i.prototype.formatResponsiveMapping=function(o){return o.responsive.map(function(n){return n.map(function(a){return a[0]==="suppress"?[]:a.map(function(u){return Array.isArray(u)?u.map(function(g){return typeof g!="string"||g==="fluid"?g:parseInt(g,10)}):typeof u=="string"?parseInt(u,10):u})})})},Object.defineProperty(i.prototype,"slotId",{get:function(){return this.unWrappedSlot.rktr_slot_id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sync",{get:function(){return this._sync},set:function(o){this._sync=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isOutOfPage",{get:function(){return 1<=this.unWrappedSlot.rktr_slot_id.indexOf("_oop")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isBuilt",{get:function(){return!!this._gslot},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isExcluded",{get:function(){return this._isExcluded},set:function(o){this._isExcluded=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasBeenDisplayed",{get:function(){return this._hasBeenDisplayed},set:function(o){this._hasBeenDisplayed=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"slotExistsOnPage",{get:function(){return!!document.getElementById(this.slotId)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gSlot",{get:function(){return this._gslot},set:function(o){this._gslot=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"monetization",{get:function(){return this._monetization},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parentRegistry",{get:function(){return this._parentRegistry},set:function(o){this._parentRegistry=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"adUnitMap",{get:function(){return this._adUnitMap},set:function(o){this._adUnitMap=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"posMap",{get:function(){return this._posMap||""},set:function(o){this._posMap=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"targeting",{get:function(){return this.unWrappedSlot.targeting},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"responsive",{get:function(){return this._responsive},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sizes",{get:function(){return this._sizes},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isSinglton",{get:function(){return this.unWrappedSlot.rktr_slot_id.indexOf("ad_mod")===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"requestedSlotTargets",{get:function(){return this._requestedSlotTargets},set:function(o){this._requestedSlotTargets=o},enumerable:!1,configurable:!0}),i.prototype.toLogging=function(){return{slotId:this.slotId,isExcluded:this.isExcluded,isBuilt:this.isBuilt,hasBeenDisplayed:this.hasBeenDisplayed,slotExistsOnPage:this.slotExistsOnPage,isOOP:this.isOutOfPage}},e.SlotWrapper=i},{"./Monetization":38,"./SizeWrapper":42,"./ViewportWrapper":44}],44:[function(c,h,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewportWrapper=void 0;var l=c("./SizeWrapper"),c=(Object.defineProperty(d.prototype,"viewport",{get:function(){return new l.SizeWrapper(this.unwrapped[0])},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"sizes",{get:function(){for(var i={sizes:[],suppressed:!1},o=0,n=this.unwrapped[1];o<n.length;o++){var a=n[o];Array.isArray(a)?i.sizes.push(new l.SizeWrapper(a)):i.suppressed=!0}return i},enumerable:!1,configurable:!0}),d);function d(i){this.unwrapped=i}e.ViewportWrapper=c},{"./SizeWrapper":42}],45:[function(r,h,e){"use strict";var l=this&&this.__createBinding||(Object.create?function(d,i,o,n){n===void 0&&(n=o);var a=Object.getOwnPropertyDescriptor(i,o);a&&("get"in a?i.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(d,n,a)}:function(d,i,o,n){d[n=n===void 0?o:n]=i[o]}),c=this&&this.__exportStar||function(d,i){for(var o in d)o==="default"||Object.prototype.hasOwnProperty.call(i,o)||l(i,d,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.processors=void 0,e.processors=r("../processors/index"),c(r("./MissionControl"),e),c(r("./SlotWrapper"),e),c(r("./ViewportWrapper"),e),c(r("./SizeWrapper"),e),c(r("./GoogleApi"),e),c(r("./GptProcessData"),e),c(r("./RegistryLoader"),e),c(r("./ModuleManager"),e),c(r("./GptScriptLoader"),e),c(r("./OverlayLoader"),e),c(r("./BaseAdFuelOptions"),e)},{"../processors/index":30,"./BaseAdFuelOptions":32,"./GoogleApi":33,"./GptProcessData":34,"./GptScriptLoader":35,"./MissionControl":36,"./ModuleManager":37,"./OverlayLoader":40,"./RegistryLoader":41,"./SizeWrapper":42,"./SlotWrapper":43,"./ViewportWrapper":44}],46:[function(r,h,e){h.exports={family:"Platinum Peacemaker ",major:3,minor:0,revision:49}},{}]},{},[25])(25)})});var Re=cs();function Es(){Re.get("TRINITY_CONFIGURATION.domestic.michonne.features.enableCep")&&ps(),Re.get("TRINITY_CONFIGURATION.domestic.michonne.features.enableInViewRefresh")&&hs(),Re.get("TRINITY_CONFIGURATION.domestic.michonne.features.enableMalvertisingDetection")&&ms(),Re.get("TRINITY_CONFIGURATION.domestic.michonne.features.enableBlockThrough")&&ws(),bs()}(function(){window.AdFuelOptions?Es():window.addEventListener("adfuel.loaded",Es)})();})();
//# sourceMappingURL=cnn-adfuel-body.map
